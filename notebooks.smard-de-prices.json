{"version":3,"kind":"Notebook","sha256":"1f3dbb20e3fb1f02ddac491aec486488bf804c0f6f18a9149e7ba39d97b3f988","slug":"notebooks.smard-de-prices","location":"/notebooks/03_smard_DE_prices.ipynb","dependencies":[],"frontmatter":{"title":"Electricity prices in Germany","content_includes_title":false,"jupytext":{},"authors":[{"nameParsed":{"literal":"Christian Groll","given":"Christian","family":"Groll"},"name":"Christian Groll","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/cgroll/world-of-energy","copyright":"2026","source_url":"https://github.com/cgroll/world-of-energy/blob/main/book/notebooks/03_smard_DE_prices.ipynb","edit_url":"https://github.com/cgroll/world-of-energy/edit/main/book/notebooks/03_smard_DE_prices.ipynb","exports":[{"format":"ipynb","filename":"03_smard_DE_prices.ipynb","url":"/world-of-energy/build/03_smard_DE_prices-14be4b8bb15a961fefca7541e0c37db2.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"This notebook loads and visualizes day-ahead electricity prices for the\nGerman-Luxembourg market area from SMARD data.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ehNpxJ0QhE"}],"key":"dBLl4ggasb"},{"type":"heading","depth":2,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Background","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VWImXqLxNM"}],"identifier":"background","label":"Background","html_id":"background","implicit":true,"key":"bnWOxBeXzi"},{"type":"paragraph","position":{"start":{"line":6,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"mb9suiKuQc"},{"type":"strong","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"SMARD","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"PQOtWNUUBm"}],"key":"cuyG0rffWj"},{"type":"text","value":" platform (operated by the German Federal Network Agency,\n","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"a5pdW4ZRqg"},{"type":"emphasis","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Bundesnetzagentur","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"uXDVRlOsad"}],"key":"HNObYiPpuN"},{"type":"text","value":") is the primary hub for high-resolution electricity market\ndata in Germany. It serves as a transparent “scoreboard” for the energy\ntransition.","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"Oa5TEBejZa"}],"key":"Ta4kmucxe3"},{"type":"heading","depth":3,"position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"What are SMARD Electricity Prices (DE/LU)?","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"cyDtWu6qmq"}],"identifier":"what-are-smard-electricity-prices-de-lu","label":"What are SMARD Electricity Prices (DE/LU)?","html_id":"what-are-smard-electricity-prices-de-lu","implicit":true,"key":"fMNw9q019y"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"VeICdN8xJK"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"DE/LU","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"zAY4yFLQmf"}],"key":"lPwf34b1PL"},{"type":"text","value":" price refers to the wholesale cost of electricity for the joint\nbidding zone comprising ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"WE3ETapT6x"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Germany and Luxembourg","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"Wvy8oUHPzz"}],"key":"DyLB8Axja3"},{"type":"text","value":".","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"NI08FjX4tg"}],"key":"DKn1Pxt6Wx"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":16,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":16,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Uniform Price:","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"capQCOgh4x"}],"key":"eCwgD59J9e"},{"type":"text","value":" Within this zone, electricity is treated as if it were on\na “copper plate”—the wholesale price is the same regardless of location.","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"ILsQiy44LK"}],"key":"LzwOK8GPbv"}],"key":"isUIZc0HPf"},{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Wholesale vs. Retail:","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"mtOKoqniVE"}],"key":"u1fVRgBy5B"},{"type":"text","value":" These are ","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"CRbziIySHT"},{"type":"emphasis","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"wholesale","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"CTxHCLaPmJ"}],"key":"bwYDUYGjH1"},{"type":"text","value":" prices (what energy suppliers\npay on the exchange). Retail bills include additional taxes, grid fees, and\nlevies.","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"EmSYGsyXcz"}],"key":"Aucs1hIrtU"}],"key":"nJpTWWPs5g"},{"type":"listItem","spread":true,"position":{"start":{"line":21,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Volatility:","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"AuSCLQSV4Z"}],"key":"nDSYWGOB9y"},{"type":"text","value":" Prices fluctuate hourly based on weather (wind/solar), demand\n(industrial activity), and fuel prices (natural gas).","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"DR18xpZIdu"}],"key":"zxZhSPkseb"}],"key":"LssLDUuOiN"}],"key":"mXaLfmQoOO"},{"type":"heading","depth":3,"position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"What is Day-Ahead?","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"zWkwKmTPuN"}],"identifier":"what-is-day-ahead","label":"What is Day-Ahead?","html_id":"what-is-day-ahead","implicit":true,"key":"K5N659ET04"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"VloagfZ5uF"},{"type":"strong","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Day-Ahead Market","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"xylwBDbHHQ"}],"key":"NZLX8AzX5B"},{"type":"text","value":" is the primary exchange for electricity. Because\nelectricity is difficult to store, it must be traded before production.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"CB73efHVOk"}],"key":"T1B0VEptAI"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":29,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"The Auction:","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"Up0i6eVfzd"}],"key":"YzuFzAfUQC"},{"type":"text","value":" Every day at ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"fcQrlP9M3K"},{"type":"strong","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"12:00 CET","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"eom2nUAUrn"}],"key":"qNtJc7SyhS"},{"type":"text","value":", an auction takes place for each\nhour of the ","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"b2d8fqaYOj"},{"type":"emphasis","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"following","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"ee2OmzAPKR"}],"key":"oEddxARbef"},{"type":"text","value":" day.","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"n7alnIErv1"}],"key":"v5Qptp4pjO"}],"key":"lXnMWd7DZi"},{"type":"listItem","spread":true,"position":{"start":{"line":31,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"text","value":"Clearing Price:","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"ZesCtOz09V"}],"key":"feNwPmLf5W"},{"type":"text","value":" The exchange algorithm finds where supply meets demand.\nThis “Market Clearing Price” is what SMARD publishes.","position":{"start":{"line":31,"column":1},"end":{"line":31,"column":1}},"key":"uYjYLGxyXs"}],"key":"H4xZrdrpOI"}],"key":"Irx1Dt6yRP"}],"key":"ZsriVIWjsq"},{"type":"heading","depth":3,"position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"children":[{"type":"text","value":"Connection to Other Bidding Zones","position":{"start":{"line":34,"column":1},"end":{"line":34,"column":1}},"key":"kw1SlCyXM8"}],"identifier":"connection-to-other-bidding-zones","label":"Connection to Other Bidding Zones","html_id":"connection-to-other-bidding-zones","implicit":true,"key":"l0r0DuDuAX"},{"type":"paragraph","position":{"start":{"line":36,"column":1},"end":{"line":39,"column":1}},"children":[{"type":"text","value":"Germany/Luxembourg is part of the ","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"YVvAPZhFJB"},{"type":"strong","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"children":[{"type":"text","value":"Single Day-Ahead Coupling (SDAC)","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"QL6DFLXikK"}],"key":"pzbKOEzyLM"},{"type":"text","value":", linking\nmost of Europe. Through interconnectors, electricity flows from low-price areas\n(high supply) to high-price areas (high demand). When cables are congested,\nprices “split” between zones.","position":{"start":{"line":36,"column":1},"end":{"line":36,"column":1}},"key":"niws6uKYS4"}],"key":"Q7sIQIwTKb"},{"type":"heading","depth":3,"position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"children":[{"type":"text","value":"Daylight Savings Time Transitions","position":{"start":{"line":41,"column":1},"end":{"line":41,"column":1}},"key":"OuXgA7f2DJ"}],"identifier":"daylight-savings-time-transitions","label":"Daylight Savings Time Transitions","html_id":"daylight-savings-time-transitions","implicit":true,"key":"QcmG5daqIX"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":43,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":43,"column":1},"end":{"line":44,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"children":[{"type":"text","value":"Spring (23-hour day):","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"gtzb2zQkq4"}],"key":"MT7bX3BG4n"},{"type":"text","value":" When clocks jump from 02:00 to 03:00, the 2 AM hour\nis missing from the data.","position":{"start":{"line":43,"column":1},"end":{"line":43,"column":1}},"key":"wi2DTthvdH"}],"key":"WgvWyGF55N"}],"key":"LFDMf81gRx"},{"type":"listItem","spread":true,"position":{"start":{"line":45,"column":1},"end":{"line":48,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"Autumn (25-hour day):","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"CJsbBbcCR4"}],"key":"WcyxPje7u2"},{"type":"text","value":" When clocks fall back, the extra hour is labeled\nas ","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"G88OXNs6Jx"},{"type":"strong","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"children":[{"type":"text","value":"3A and 3B","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"f73Xt9YbNj"}],"key":"tsyVUdVBCp"},{"type":"text","value":" (or similar). This often shows very low prices due to\nreduced demand and extra generation capacity.","position":{"start":{"line":45,"column":1},"end":{"line":45,"column":1}},"key":"Hj52eBZ7GW"}],"key":"ie8v4PN4fi"}],"key":"uG8nLltkEJ"}],"key":"k6vC639VST"},{"type":"thematicBreak","position":{"start":{"line":49,"column":1},"end":{"line":49,"column":1}},"key":"dNv6N0M21F"},{"type":"heading","depth":2,"position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"Observations from the Data","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"ERsvM51bos"}],"identifier":"observations-from-the-data","label":"Observations from the Data","html_id":"observations-from-the-data","implicit":true,"key":"Wm0tgtULEZ"},{"type":"heading","depth":3,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"The 2021-2023 Energy Crisis","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"AQc4ekdAkj"}],"identifier":"the-2021-2023-energy-crisis","label":"The 2021-2023 Energy Crisis","html_id":"the-2021-2023-energy-crisis","implicit":true,"key":"aoVMiBbfmD"},{"type":"paragraph","position":{"start":{"line":55,"column":1},"end":{"line":57,"column":1}},"children":[{"type":"text","value":"The most striking feature in the data is the dramatic price surge from mid-2021\nthrough early 2023, with monthly averages peaking above ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"BvAhXczJEh"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"460 EUR/MWh","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"F4ULyOwPz7"}],"key":"LYmt8NRysS"},{"type":"text","value":" in\nAugust 2022—roughly 10x the pre-crisis baseline of ~40 EUR/MWh.","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"kyA9avwNpB"}],"key":"UxePvvPong"},{"type":"paragraph","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"strong","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"children":[{"type":"text","value":"Primary causes:","position":{"start":{"line":59,"column":1},"end":{"line":59,"column":1}},"key":"kSbluVMBPn"}],"key":"TEih6Gm5PP"}],"key":"m3qRxBuB37"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":61,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":61,"column":1},"end":{"line":62,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"Post-COVID recovery (2021):","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"zLdhZFcRfs"}],"key":"rMXf2MlIvO"},{"type":"text","value":" Economic rebound increased global energy\ndemand, particularly for LNG in Asia, tightening European gas supplies.","position":{"start":{"line":61,"column":1},"end":{"line":61,"column":1}},"key":"hcM7gjHJUr"}],"key":"zbYbGDJjHi"}],"key":"Q8kGGp3dTu"},{"type":"listItem","spread":true,"position":{"start":{"line":63,"column":1},"end":{"line":66,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"Russia’s invasion of Ukraine (Feb 2022):","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"TWxsDHVxGY"}],"key":"mGXbEKXm1v"},{"type":"text","value":" Russia had supplied ~44% of\nEU natural gas imports. The subsequent supply cuts caused gas prices to surge\n5-fold, directly impacting electricity prices since gas plants often set the\nmarginal price.","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"rWsNYajiDO"}],"key":"KpXvegnTkn"}],"key":"wYGHzc6coJ"},{"type":"listItem","spread":true,"position":{"start":{"line":67,"column":1},"end":{"line":70,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"Merit order effect:","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"DxjPqH2jRw"}],"key":"i5HuvSa4ec"},{"type":"text","value":" In electricity markets, the most expensive plant\nneeded to meet demand sets the price for all generators. With gas prices\nsoaring, this “marginal” plant became extremely costly.","position":{"start":{"line":67,"column":1},"end":{"line":67,"column":1}},"key":"qV4DVDZf84"}],"key":"HU0BEFd2zb"}],"key":"yS3WCwRKKg"}],"key":"LC8wTjyox4"},{"type":"paragraph","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"text","value":"The crisis peaked in ","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"KRjxg2hvCU"},{"type":"strong","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"children":[{"type":"text","value":"August 2022","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"ZWjp59VhzZ"}],"key":"CXtedwkQ1R"},{"type":"text","value":" when wholesale prices exceeded 850 EUR/MWh.","position":{"start":{"line":71,"column":1},"end":{"line":71,"column":1}},"key":"m8ICswosp3"}],"key":"w1jS43R7wa"},{"type":"heading","depth":3,"position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"Negative Prices","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"s1ejoghCtk"}],"identifier":"negative-prices","label":"Negative Prices","html_id":"negative-prices","implicit":true,"key":"kEsZVOdoI1"},{"type":"paragraph","position":{"start":{"line":75,"column":1},"end":{"line":77,"column":1}},"children":[{"type":"text","value":"The hourly data shows prices occasionally dropping below zero (visible as\ndownward spikes reaching -200 to -500 EUR/MWh). ","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"a2NCfYY9Xo"},{"type":"strong","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"Negative prices","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"d4b65NpkVB"}],"key":"Y9rnNxf4VE"},{"type":"text","value":" mean\nproducers must ","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"SMWhdLyday"},{"type":"emphasis","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"pay","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"h6YDcfNUIf"}],"key":"NyXCJEVoU2"},{"type":"text","value":" to have their electricity taken off the grid.","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"uitwBJyGI6"}],"key":"tfwvnICvNM"},{"type":"paragraph","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"strong","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"children":[{"type":"text","value":"Why this happens:","position":{"start":{"line":79,"column":1},"end":{"line":79,"column":1}},"key":"Q7enT2yCDp"}],"key":"Lg71PpoXhu"}],"key":"h7eLQpApCz"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":81,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":81,"column":1},"end":{"line":83,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"children":[{"type":"text","value":"Renewable oversupply:","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"GLtUiI04Xq"}],"key":"dZPsjH9fLf"},{"type":"text","value":" On sunny, windy days (especially weekends), solar\nand wind generation can exceed demand. Germany added massive renewable\ncapacity—the EU installed a record 56 GW of solar in 2023 alone.","position":{"start":{"line":81,"column":1},"end":{"line":81,"column":1}},"key":"J8HIAIBjZP"}],"key":"ujBvsKrZnP"}],"key":"ubDrgkpANt"},{"type":"listItem","spread":true,"position":{"start":{"line":84,"column":1},"end":{"line":85,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"children":[{"type":"text","value":"Inflexible generation:","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"SjNJpr7jCj"}],"key":"xzq3ssM8H0"},{"type":"text","value":" Nuclear and some coal plants cannot quickly ramp\ndown, so they pay to keep running rather than face costly shutdown/restart.","position":{"start":{"line":84,"column":1},"end":{"line":84,"column":1}},"key":"oA3Pta0nec"}],"key":"git891wztO"}],"key":"n8HrmNKUK4"},{"type":"listItem","spread":true,"position":{"start":{"line":86,"column":1},"end":{"line":87,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"children":[{"type":"text","value":"Grid congestion:","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"s4YObUONcM"}],"key":"FzvcZtlfWl"},{"type":"text","value":" Limited transmission capacity can trap excess power in\ncertain regions.","position":{"start":{"line":86,"column":1},"end":{"line":86,"column":1}},"key":"ROanx5MqDA"}],"key":"KSGvnB7jcX"}],"key":"ti7D9eNozY"},{"type":"listItem","spread":true,"position":{"start":{"line":88,"column":1},"end":{"line":90,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"children":[{"type":"text","value":"Timing mismatch:","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"yp3xkXYHbW"}],"key":"a6NE7z33Og"},{"type":"text","value":" Peak solar production (midday) doesn’t align with peak\ndemand (mornings/evenings), especially on low-demand weekends.","position":{"start":{"line":88,"column":1},"end":{"line":88,"column":1}},"key":"U9e1gJi5mq"}],"key":"Peg8sKvlS7"}],"key":"gQ5qKlXIC3"}],"key":"jI9iTOL0Na"},{"type":"paragraph","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"In H1 2025, Germany experienced ","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"HsrCUFvebr"},{"type":"strong","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"children":[{"type":"text","value":"389 hours","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"EoMh5sE1yq"}],"key":"NQn1R0hUa1"},{"type":"text","value":" of negative day-ahead prices.","position":{"start":{"line":91,"column":1},"end":{"line":91,"column":1}},"key":"HGHJ2G8cmL"}],"key":"oZAqaR1q0J"},{"type":"heading","depth":3,"position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"children":[{"type":"text","value":"Positive Price Spikes","position":{"start":{"line":93,"column":1},"end":{"line":93,"column":1}},"key":"D8JDe9XK3R"}],"identifier":"positive-price-spikes","label":"Positive Price Spikes","html_id":"positive-price-spikes","implicit":true,"key":"mPB1sljiNf"},{"type":"paragraph","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"children":[{"type":"text","value":"Extreme upward spikes (600-900+ EUR/MWh) occur during supply scarcity events:","position":{"start":{"line":95,"column":1},"end":{"line":95,"column":1}},"key":"dobM60adTa"}],"key":"y4j5ar5OLV"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":97,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":97,"column":1},"end":{"line":99,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"children":[{"type":"text","value":"Dunkelflaute:","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"key":"WosRyz0niY"}],"key":"ujc9OVs7lZ"},{"type":"text","value":" German for “dark doldrums”—periods of cold, cloudy, windless\nweather when renewable output collapses. In December 2024, intraday prices\nbriefly hit ~1,000 EUR/MWh during an extended Dunkelflaute.","position":{"start":{"line":97,"column":1},"end":{"line":97,"column":1}},"key":"uDC0GKQ6cl"}],"key":"RcRCUoMhfe"}],"key":"KFhOnKaCBq"},{"type":"listItem","spread":true,"position":{"start":{"line":100,"column":1},"end":{"line":101,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"children":[{"type":"text","value":"Plant outages:","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"SFNMWHVNXk"}],"key":"Bhexx0pjyq"},{"type":"text","value":" Unplanned maintenance or failures of conventional plants\nduring high-demand periods exacerbate scarcity.","position":{"start":{"line":100,"column":1},"end":{"line":100,"column":1}},"key":"lDzU9D5xzP"}],"key":"QCkpAsakvf"}],"key":"oILb7ICcpH"},{"type":"listItem","spread":true,"position":{"start":{"line":102,"column":1},"end":{"line":104,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"children":[{"type":"text","value":"Peak demand:","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"rzj4PXfoMI"}],"key":"hJgVzw8dLo"},{"type":"text","value":" Cold winter evenings with high heating demand and low\nrenewable output force reliance on expensive gas “peaker” plants.","position":{"start":{"line":102,"column":1},"end":{"line":102,"column":1}},"key":"HjsM98HkIR"}],"key":"lXOLqFMHfn"}],"key":"nHVyp40RrR"}],"key":"BvCCbzVOH0"},{"type":"paragraph","position":{"start":{"line":105,"column":1},"end":{"line":106,"column":1}},"children":[{"type":"text","value":"These dynamics illustrate why ","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"vBWoSHYYPf"},{"type":"strong","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"children":[{"type":"text","value":"flexibility","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"jkWqEQwQ1y"}],"key":"BfTOw8CGfp"},{"type":"text","value":" (storage, demand response, grid\nexpansion) is critical for integrating high shares of variable renewables.","position":{"start":{"line":105,"column":1},"end":{"line":105,"column":1}},"key":"Rs5S5mx910"}],"key":"JAm63sUfdB"}],"key":"GDyFTTYa7w"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Data Source","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"p4uRT9uQ2D"}],"identifier":"data-source","label":"Data Source","html_id":"data-source","implicit":true,"key":"zQV1WDbIZq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"The price data is downloaded from the SMARD API using the following function:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"hPOOCxJazm"}],"key":"K15OfCMJnS"},{"type":"include","file":"../../woe/smard/api.py","literal":true,"filter":{"lines":[[8,91]]},"children":[{"type":"code","value":"def download_smard_data(\n    region: str, \n    resolution: str, \n    variable: int, \n    variable_name: str,\n    start_time: Optional[datetime] = None\n) -> pd.DataFrame:\n    \"\"\"Download data from SMARD API for given parameters.\n    \n    Note: The SMARD API uses a block-based data retrieval system where we first get\n    timestamps marking the start of data blocks (e.g. weekly chunks), then fetch\n    the actual observations for each block in separate requests.\n    \n    Args:\n        region: Region code (e.g. 'DE' for Germany)\n        resolution: Time resolution (e.g. 'day', 'hour')\n        variable: Variable ID for the type of power data\n        variable_name: Name of the variable to use as column label\n        start_time: Optional datetime to specify start of data collection.\n                   If None, returns all available data.\n    \n    Returns:\n        pd.DataFrame: DataFrame with timestamp index and value column\n        \n    Raises:\n        RuntimeError: If there's an error fetching data from the API\n    \"\"\"\n    base_url = \"https://www.smard.de/app\"\n    \n    # Step 1: Get available timestamps\n    index_url = f\"{base_url}/chart_data/{variable}/{region}/index_{resolution}.json\"\n    response = requests.get(index_url)\n    \n    if response.status_code != 200:\n        raise RuntimeError(f\"Error fetching timestamps: {response.status_code}\")\n        \n    timestamps = response.json()[\"timestamps\"]\n    \n    if not timestamps:\n        raise RuntimeError(\"No timestamps available for the specified parameters\")\n\n    # Filter timestamps if start_time is provided\n    if start_time:\n        start_timestamp = int(start_time.timestamp() * 1000)  # Convert to milliseconds\n        timestamps = [ts for ts in timestamps if ts >= start_timestamp]\n        \n        if not timestamps:\n            raise RuntimeError(f\"No data available after {start_time}\")\n\n    # Initialize empty lists to store all data\n    all_timestamps = []\n    all_values = []\n\n    # Step 2: Get data for each timestamp\n    for timestamp in timestamps:\n        data_url = f\"{base_url}/chart_data/{variable}/{region}/{variable}_{region}_{resolution}_{timestamp}.json\"\n        data_response = requests.get(data_url)\n        \n        if data_response.status_code != 200:\n            print(f\"Warning: Error fetching data for timestamp {timestamp}: {data_response.status_code}\")\n            continue\n            \n        data = data_response.json()\n        series_data: List[Tuple[int, float]] = data[\"series\"]\n        \n        # Extract timestamps and values\n        ts = [datetime.fromtimestamp(ts/1000) for ts, _ in series_data]\n        values = [val for _, val in series_data]\n        \n        all_timestamps.extend(ts)\n        all_values.extend(values)\n    \n    # Create and return dataframe\n    df = pd.DataFrame({\n        'timestamp': all_timestamps,\n        variable_name: all_values\n    })\n    \n    # Sort by timestamp and remove duplicates\n    df = df.sort_values('timestamp').drop_duplicates(subset='timestamp')\n    df.set_index('timestamp', inplace=True)\n    df = df.dropna()\n    \n    return df ","lang":"python","filename":"api.py","key":"kKV94EtRYZ"}],"key":"nZeoS9UL59"}],"key":"fBaVyQI0Aw"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:21.096720Z","iopub.status.busy":"2026-02-08T19:38:21.096524Z","iopub.status.idle":"2026-02-08T19:38:21.640425Z","shell.execute_reply":"2026-02-08T19:38:21.639535Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"import pandas as pd\nimport matplotlib.pyplot as plt\n\nfrom woe.paths import ProjPaths","key":"c6JobAxeJr"},{"type":"outputs","id":"Iu6Z3DLsbXylIcKG90kHq","children":[],"key":"qcMdO0qVju"}],"key":"sAPfYqRdFO"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:21.642401Z","iopub.status.busy":"2026-02-08T19:38:21.642104Z","iopub.status.idle":"2026-02-08T19:38:21.665879Z","shell.execute_reply":"2026-02-08T19:38:21.665266Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Load the price data\npaths = ProjPaths()\nprices_file = paths.smard_prices_file\n\nprint(f\"Loading data from: {prices_file}\")\ndf = pd.read_parquet(prices_file)\n\nprint(f\"Data shape: {df.shape}\")\nprint(f\"Date range: {df.index.min()} to {df.index.max()}\")\ndf.head()","key":"J1nphYiebQ"},{"type":"outputs","id":"IZiZ031zeedIEx_0gHuLf","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Loading data from: /home/chris/research/world-of-energy/data/downloads/smard/prices_de_lu.parquet\nData shape: (64457, 1)\nDate range: 2018-10-01 00:00:00 to 2026-02-09 23:00:00\n"},"children":[],"key":"uJq1wSZNkF"},{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":2,"metadata":{},"data":{"text/html":{"content":"<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>PRICE_DE_LU</th>\n    </tr>\n    <tr>\n      <th>timestamp</th>\n      <th></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>2018-10-01 00:00:00</th>\n      <td>59.53</td>\n    </tr>\n    <tr>\n      <th>2018-10-01 01:00:00</th>\n      <td>56.10</td>\n    </tr>\n    <tr>\n      <th>2018-10-01 02:00:00</th>\n      <td>51.41</td>\n    </tr>\n    <tr>\n      <th>2018-10-01 03:00:00</th>\n      <td>47.38</td>\n    </tr>\n    <tr>\n      <th>2018-10-01 04:00:00</th>\n      <td>47.59</td>\n    </tr>\n  </tbody>\n</table>\n</div>","content_type":"text/html"},"text/plain":{"content":"                     PRICE_DE_LU\ntimestamp                       \n2018-10-01 00:00:00        59.53\n2018-10-01 01:00:00        56.10\n2018-10-01 02:00:00        51.41\n2018-10-01 03:00:00        47.38\n2018-10-01 04:00:00        47.59","content_type":"text/plain"}}},"children":[],"key":"QQwJm2y8dW"}],"key":"ohLU8fBHkV"}],"key":"lk7cv5USRd"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:21.667184Z","iopub.status.busy":"2026-02-08T19:38:21.667092Z","iopub.status.idle":"2026-02-08T19:38:21.838272Z","shell.execute_reply":"2026-02-08T19:38:21.837615Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Time series plot of electricity prices\nfig, ax = plt.subplots(figsize=(14, 6))\n\nax.plot(df.index, df[\"PRICE_DE_LU\"], linewidth=0.5, alpha=0.8)\nax.set_xlabel(\"Date\")\nax.set_ylabel(\"Price (EUR/MWh)\")\nax.set_title(\"DE/LU Day-Ahead Electricity Prices\")\nax.grid(True, alpha=0.3)\n\nfig.tight_layout()\nplt.show()","key":"YLw0wokQe8"},{"type":"outputs","id":"qZjaEiAXc6ZJ4FBTk1OGf","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"20c97c6e429de5e4eb20cc8110b371ac","path":"/world-of-energy/build/20c97c6e429de5e4eb20cc8110b371ac.png"},"text/plain":{"content":"<Figure size 1400x600 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"UThyeeVKtO"}],"key":"aAJy5bGilh"}],"key":"tLw4QK2W7F"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:21.840374Z","iopub.status.busy":"2026-02-08T19:38:21.840192Z","iopub.status.idle":"2026-02-08T19:38:21.997531Z","shell.execute_reply":"2026-02-08T19:38:21.996929Z"},"lines_to_next_cell":2},"children":[{"type":"code","lang":"python","executable":true,"value":"# Monthly average prices\nmonthly_avg = df.resample(\"ME\").mean()\n\nfig, ax = plt.subplots(figsize=(14, 6))\n\nax.plot(monthly_avg.index, monthly_avg[\"PRICE_DE_LU\"], marker=\"o\", markersize=3)\nax.set_xlabel(\"Date\")\nax.set_ylabel(\"Price (EUR/MWh)\")\nax.set_title(\"DE/LU Monthly Average Electricity Prices\")\nax.grid(True, alpha=0.3)\n\nfig.tight_layout()\nplt.show()","key":"FOtkfcRAA3"},{"type":"outputs","id":"FnzzJFG8mqC0pRirBawIN","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"f195cf2d6118175e2990c51b64eec3c7","path":"/world-of-energy/build/f195cf2d6118175e2990c51b64eec3c7.png"},"text/plain":{"content":"<Figure size 1400x600 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"CdjB1IAzGb"}],"key":"VKXlRcIRzx"}],"key":"BdSWPlya4t"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Intraday Seasonality","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xr9HhQjqcI"}],"identifier":"intraday-seasonality","label":"Intraday Seasonality","html_id":"intraday-seasonality","implicit":true,"key":"NeIV4L4guq"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"The charts above use hourly resolution which compresses daily patterns. Below\nwe zoom into a three-week window so that the recurring daily and weekly price\ncycles become clearly visible.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"mnPwIi6ttt"}],"key":"NJAFv8WwMP"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Typical patterns:","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"FsGd2wrOsL"}],"key":"qOcJd4JYTD"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":9,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":9,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Morning ramp (06:00–09:00):","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"pHQHnF2B5O"}],"key":"cjYi33Nb0r"},{"type":"text","value":" Prices rise sharply as households and\nindustry come online.","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"t8nVFZQdfj"}],"key":"Yq6xNviJEQ"}],"key":"uzibgAldYn"},{"type":"listItem","spread":true,"position":{"start":{"line":11,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"Solar dip (11:00–15:00):","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"a23zUEMTv1"}],"key":"DgPqRpvdtw"},{"type":"text","value":" On sunny days, abundant solar generation\npushes prices down around midday—sometimes below zero.","position":{"start":{"line":11,"column":1},"end":{"line":11,"column":1}},"key":"KL3EsonNbp"}],"key":"PMezVOHHmp"}],"key":"DnFHexeX4I"},{"type":"listItem","spread":true,"position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Evening peak (17:00–20:00):","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"b2LZiR9drI"}],"key":"ddxAUFcCCs"},{"type":"text","value":" Demand stays high while solar fades,\nforcing expensive gas plants onto the grid.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"MiCdWHr0zA"}],"key":"DUcQPImRdk"}],"key":"LG1bPf5Xhw"},{"type":"listItem","spread":true,"position":{"start":{"line":15,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Weekend effect:","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"KoBxvs4s8I"}],"key":"yibYvsTJ82"},{"type":"text","value":" Lower industrial demand on Saturdays and Sundays\ncompresses the entire price curve downward.","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"Z4BETvVcx0"}],"key":"rzltxFEHFn"}],"key":"UtlUbF4Vre"}],"key":"PwUwdFbZcj"}],"key":"pQwTyzH5Oa"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:21.998850Z","iopub.status.busy":"2026-02-08T19:38:21.998758Z","iopub.status.idle":"2026-02-08T19:38:22.002997Z","shell.execute_reply":"2026-02-08T19:38:22.002461Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"from datetime import datetime, timedelta\n\n# Pick a recent 3-week window ending at the last full day in the hourly data\nend_date = df.index.max().normalize()\nstart_date = end_date - timedelta(weeks=3)\n\nsub_prices = df.loc[start_date:end_date].copy()\nprint(f\"Hourly prices: {start_date.date()} to {end_date.date()} ({len(sub_prices)} records)\")","key":"Zxq7L1dGj2"},{"type":"outputs","id":"l_z8GyHO4X8_Za_thkdZm","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Hourly prices: 2026-01-19 to 2026-02-09 (433 records)\n"},"children":[],"key":"NyoFjnZQoW"}],"key":"gtFPEaOTia"}],"key":"i0ugp6HKUB"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.004120Z","iopub.status.busy":"2026-02-08T19:38:22.004023Z","iopub.status.idle":"2026-02-08T19:38:22.163328Z","shell.execute_reply":"2026-02-08T19:38:22.162713Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"fig, ax = plt.subplots(figsize=(14, 5))\n\nimport matplotlib.dates as mdates\n\nax.plot(sub_prices.index, sub_prices[\"PRICE_DE_LU\"], linewidth=0.6)\nax.set_ylabel(\"Price (EUR/MWh)\")\nax.set_title(\n    f\"Hourly DE/LU Day-Ahead Prices \"\n    f\"({start_date.strftime('%d %b')} – {end_date.strftime('%d %b %Y')})\"\n)\nax.grid(True, alpha=0.3)\n\n# Show every day on the x-axis\nax.xaxis.set_major_locator(mdates.DayLocator())\nax.xaxis.set_major_formatter(mdates.DateFormatter(\"%d %b\"))\nfig.autofmt_xdate(rotation=45)\n\n# Shade weekends\nfor dt in pd.date_range(start_date, end_date, freq=\"D\"):\n    if dt.weekday() >= 5:  # Saturday=5, Sunday=6\n        ax.axvspan(dt, dt + timedelta(days=1), alpha=0.08, color=\"grey\")\n\nax.legend([\"Price\", \"Weekend\"], loc=\"upper right\")\nfig.tight_layout()\nplt.show()","key":"GRn0zFn2SS"},{"type":"outputs","id":"r7hQ5U6qtqUpMlZwYM-oq","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"42c796bcc6f24416771c560375f7a64a","path":"/world-of-energy/build/42c796bcc6f24416771c560375f7a64a.png"},"text/plain":{"content":"<Figure size 1400x500 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"lz34FraCtk"}],"key":"S0N8WwauQN"}],"key":"VJsFelBN3I"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.164824Z","iopub.status.busy":"2026-02-08T19:38:22.164737Z","iopub.status.idle":"2026-02-08T19:38:22.261558Z","shell.execute_reply":"2026-02-08T19:38:22.260961Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Average daily profile across the 3-week window\nsub_prices[\"hour\"] = sub_prices.index.hour + sub_prices.index.minute / 60\nsub_prices[\"is_weekend\"] = sub_prices.index.weekday >= 5\n\nweekday_profile = sub_prices[~sub_prices[\"is_weekend\"]].groupby(\"hour\")[\"PRICE_DE_LU\"].mean()\nweekend_profile = sub_prices[sub_prices[\"is_weekend\"]].groupby(\"hour\")[\"PRICE_DE_LU\"].mean()\n\nfig, ax = plt.subplots(figsize=(10, 5))\n\nax.plot(weekday_profile.index, weekday_profile.values, label=\"Weekday avg\", linewidth=1.5)\nax.plot(weekend_profile.index, weekend_profile.values, label=\"Weekend avg\", linewidth=1.5)\nax.set_xlabel(\"Hour of day\")\nax.set_ylabel(\"Price (EUR/MWh)\")\nax.set_title(\n    f\"Average Daily Price Profile \"\n    f\"({start_date.strftime('%d %b')} – {end_date.strftime('%d %b %Y')})\"\n)\nax.set_xlim(0, 24)\nax.set_xticks(range(0, 25, 3))\nax.legend()\nax.grid(True, alpha=0.3)\n\n# Clean up helper columns\nsub_prices.drop(columns=[\"hour\", \"is_weekend\"], inplace=True)\n\nfig.tight_layout()\nplt.show()","key":"fjUkMydgJ2"},{"type":"outputs","id":"9sJHoMursUosd6s948aHE","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"95b4cbe882f52d3c59145e704a19aa88","path":"/world-of-energy/build/95b4cbe882f52d3c59145e704a19aa88.png"},"text/plain":{"content":"<Figure size 1000x500 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"v8RwU1GhvA"}],"key":"kWDfSEWfkg"}],"key":"FYuIgBg3DD"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Electricity Prices and Natural Gas","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Njjv4Z6gkA"}],"identifier":"electricity-prices-and-natural-gas","label":"Electricity Prices and Natural Gas","html_id":"electricity-prices-and-natural-gas","implicit":true,"key":"oefq5NKync"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"In European electricity markets, ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"Jiy8uEnyQO"},{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"natural gas plants","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"dleJ98wfDY"}],"key":"uPPjpsBbVL"},{"type":"text","value":" frequently set the\nmarginal (price-setting) price because they sit at the expensive end of the\nmerit order. When gas prices rise, the cost of running these plants increases,\nwhich lifts the clearing price for ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ajqtAGu4eK"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"all","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qHacYfuSMQ"}],"key":"RuvXKZ1Fbl"},{"type":"text","value":" generators—even low-cost renewables.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"c8btf2yloc"}],"key":"feCESRke2T"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":11,"column":1}},"children":[{"type":"text","value":"The chart below overlays monthly average electricity prices with the TTF\n(Title Transfer Facility) natural gas front-month futures price. TTF is the\nbenchmark hub for north-west European gas trading and the most liquid gas\ncontract on the continent.","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"F1QhgvnBIC"}],"key":"L05GbBgVUv"},{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"The tight co-movement during 2021-2023 illustrates how the gas supply crisis\ndirectly transmitted into record electricity prices.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"TBipTRN4Ma"}],"key":"RfTVjYB1lV"}],"key":"jRBIcsv4He"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.263046Z","iopub.status.busy":"2026-02-08T19:38:22.262941Z","iopub.status.idle":"2026-02-08T19:38:22.270167Z","shell.execute_reply":"2026-02-08T19:38:22.269293Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Load TTF gas prices\ngas_df = pd.read_parquet(paths.ttf_gas_prices_file)\ngas_df.index = pd.to_datetime(gas_df.index)\n\nprint(f\"Gas prices: {len(gas_df)} records\")\nprint(f\"Date range: {gas_df.index.min().date()} to {gas_df.index.max().date()}\")","key":"TAv9p276WC"},{"type":"outputs","id":"eMeNeTU8pvYA3QSZDiNOo","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Gas prices: 2086 records\nDate range: 2017-10-23 to 2026-02-06\n"},"children":[],"key":"uQDvr1e1bi"}],"key":"JYU5XZnLbG"}],"key":"ZcJ7yax4Pr"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.271291Z","iopub.status.busy":"2026-02-08T19:38:22.271209Z","iopub.status.idle":"2026-02-08T19:38:22.426919Z","shell.execute_reply":"2026-02-08T19:38:22.426318Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Monthly averages for both series\nmonthly_power = df.resample(\"ME\").mean()\nmonthly_gas = gas_df[\"Close\"].resample(\"ME\").mean()\n\nfig, ax1 = plt.subplots(figsize=(14, 6))\n\ncolor_power = \"tab:blue\"\nax1.plot(monthly_power.index, monthly_power[\"PRICE_DE_LU\"],\n         color=color_power, linewidth=1.2, label=\"Electricity (DE/LU)\")\nax1.set_xlabel(\"Date\")\nax1.set_ylabel(\"Electricity Price (EUR/MWh)\", color=color_power)\nax1.tick_params(axis=\"y\", labelcolor=color_power)\n\nax2 = ax1.twinx()\ncolor_gas = \"tab:orange\"\nax2.plot(monthly_gas.index, monthly_gas.values,\n         color=color_gas, linewidth=1.2, label=\"TTF Gas\")\nax2.set_ylabel(\"TTF Gas Price (EUR/MWh)\", color=color_gas)\nax2.tick_params(axis=\"y\", labelcolor=color_gas)\n\nax1.set_title(\"Monthly Average Electricity vs Natural Gas Prices\")\nax1.grid(True, alpha=0.3)\n\n# Combined legend\nlines1, labels1 = ax1.get_legend_handles_labels()\nlines2, labels2 = ax2.get_legend_handles_labels()\nax1.legend(lines1 + lines2, labels1 + labels2, loc=\"upper left\")\n\nfig.tight_layout()\nplt.show()","key":"T2H5ysZhr9"},{"type":"outputs","id":"Ts-Fwl2bQhQS-rLbw4-Lp","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"8373eb584412aa5956f51a3f3b50b164","path":"/world-of-energy/build/8373eb584412aa5956f51a3f3b50b164.png"},"text/plain":{"content":"<Figure size 1400x600 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"jAYxBLrnPQ"}],"key":"u9MB7WPjD6"}],"key":"kqwtnulhjP"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Renewable Generation and Residual Load","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pPiWvLST75"}],"identifier":"renewable-generation-and-residual-load","label":"Renewable Generation and Residual Load","html_id":"renewable-generation-and-residual-load","implicit":true,"key":"TAPto66DB6"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"strong","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Residual load","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ewrLR4s1fA"}],"key":"Md601sltjo"},{"type":"text","value":" is the electricity demand that must be covered by\ndispatchable (controllable) power plants ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"L4FkVx0HDg"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"after","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"gS78Wy6m5E"}],"key":"jDD0oFhsJM"},{"type":"text","value":" subtracting variable\nrenewable generation:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"AL7zIMqYJM"}],"key":"XHVGYddD9h"},{"type":"math","value":"\\text{Residual Load} = \\text{Total Load} - \\text{Solar}\n  - \\text{Wind Onshore} - \\text{Wind Offshore}","position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"html":"<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mtext>Residual Load</mtext><mo>=</mo><mtext>Total Load</mtext><mo>−</mo><mtext>Solar</mtext><mo>−</mo><mtext>Wind Onshore</mtext><mo>−</mo><mtext>Wind Offshore</mtext></mrow><annotation encoding=\"application/x-tex\">\\text{Residual Load} = \\text{Total Load} - \\text{Solar}\n  - \\text{Wind Onshore} - \\text{Wind Offshore}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord text\"><span class=\"mord\">Residual Load</span></span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord text\"><span class=\"mord\">Total Load</span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord text\"><span class=\"mord\">Solar</span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"></span><span class=\"mord text\"><span class=\"mord\">Wind Onshore</span></span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.6944em;\"></span><span class=\"mord text\"><span class=\"mord\">Wind Offshore</span></span></span></span></span></span>","enumerator":"1","key":"AxDfjCy3sS"},{"type":"paragraph","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"It is the single most important driver of wholesale electricity prices:","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"CbQ6lIF94L"}],"key":"jDRzMxhBb6"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":12,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":12,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"High residual load","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"y5e6kiv1Dx"}],"key":"HL0wWxQRZN"},{"type":"text","value":" → more conventional plants must run, including\nexpensive gas turbines → ","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"EYR3z7MuDl"},{"type":"strong","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"higher prices","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"ysvZFA5gP6"}],"key":"SLKTlsQeHd"}],"key":"BvXsVOkxJQ"}],"key":"Do8DgzbgGp"},{"type":"listItem","spread":true,"position":{"start":{"line":14,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Low / negative residual load","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"xOqkuf52Ca"}],"key":"U8O9qA6d2R"},{"type":"text","value":" → renewables cover (or exceed) demand →\ncheap plants suffice → ","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"o2UplZjFVl"},{"type":"strong","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"lower prices","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"YTidmTRHjm"}],"key":"DexELDlEYS"},{"type":"text","value":" (sometimes negative)","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ncNh4TFr4e"}],"key":"L8FMqz2wyZ"}],"key":"AhQ2dybOG2"}],"key":"goYckGItJL"},{"type":"paragraph","position":{"start":{"line":17,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"The stacked area chart below shows renewable generation (solar, onshore wind,\noffshore wind) against total electricity load. The gap between the top of the\nrenewables stack and the load line ","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"rAByn0cg7T"},{"type":"emphasis","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"is","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"Ro5x1d5o9d"}],"key":"IU2G6VWeK1"},{"type":"text","value":" the residual load.","position":{"start":{"line":17,"column":1},"end":{"line":17,"column":1}},"key":"FJ1zDDfICS"}],"key":"wT2YIG0EEK"}],"key":"aFLe8axYF4"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.428003Z","iopub.status.busy":"2026-02-08T19:38:22.427912Z","iopub.status.idle":"2026-02-08T19:38:22.471305Z","shell.execute_reply":"2026-02-08T19:38:22.470761Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Load generation and load data\nsolar = pd.read_parquet(paths.smard_solar_file)\nwind_on = pd.read_parquet(paths.smard_wind_onshore_file)\nwind_off = pd.read_parquet(paths.smard_wind_offshore_file)\ntotal_load = pd.read_parquet(paths.smard_total_load_file)\n\n# Combine into one DataFrame\ngen = pd.concat([\n    solar.rename(columns={solar.columns[0]: \"solar\"}),\n    wind_on.rename(columns={wind_on.columns[0]: \"wind_onshore\"}),\n    wind_off.rename(columns={wind_off.columns[0]: \"wind_offshore\"}),\n    total_load.rename(columns={total_load.columns[0]: \"total_load\"}),\n], axis=1).dropna()\n\ngen[\"renewables\"] = gen[\"solar\"] + gen[\"wind_onshore\"] + gen[\"wind_offshore\"]\ngen[\"residual_load\"] = gen[\"total_load\"] - gen[\"renewables\"]\n\nprint(f\"Generation data: {len(gen)} records\")\nprint(f\"Date range: {gen.index.min()} to {gen.index.max()}\")","key":"XQ6hDKW8rV"},{"type":"outputs","id":"i5QlK0LGF3wcUsVfwYuoQ","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Generation data: 64420 records\n"},"children":[],"key":"EijFLj8B9a"},{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Date range: 2018-10-01 01:00:00 to 2026-02-05 13:00:00\n"},"children":[],"key":"tiRmDXTHmB"}],"key":"h3aI7frJbV"}],"key":"iDkIxbNxym"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.472580Z","iopub.status.busy":"2026-02-08T19:38:22.472474Z","iopub.status.idle":"2026-02-08T19:38:22.606131Z","shell.execute_reply":"2026-02-08T19:38:22.605619Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Renewables vs total load (monthly averages for readability)\nmonthly_gen = gen.resample(\"ME\").mean()\n\nfig, ax = plt.subplots(figsize=(14, 6))\n\nax.stackplot(\n    monthly_gen.index,\n    monthly_gen[\"solar\"],\n    monthly_gen[\"wind_onshore\"],\n    monthly_gen[\"wind_offshore\"],\n    labels=[\"Solar\", \"Wind Onshore\", \"Wind Offshore\"],\n    alpha=0.7,\n)\nax.plot(monthly_gen.index, monthly_gen[\"total_load\"],\n        color=\"black\", linewidth=0.8, label=\"Total Load\")\n\nax.set_xlabel(\"Date\")\nax.set_ylabel(\"Power (MW)\")\nax.set_title(\"Renewable Generation vs Total Load (Monthly Averages)\")\nax.legend(loc=\"upper left\")\nax.grid(True, alpha=0.3)\n\nfig.tight_layout()\nplt.show()","key":"Lz3ee3KFyz"},{"type":"outputs","id":"9MTlLL3TQ_A23fNfEFH_1","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"4c847d1066678753ed321a69dd44e971","path":"/world-of-energy/build/4c847d1066678753ed321a69dd44e971.png"},"text/plain":{"content":"<Figure size 1400x600 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"n5b2GlXCRO"}],"key":"KOit6fN0RN"}],"key":"BHfZ3lYHjS"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.607940Z","iopub.status.busy":"2026-02-08T19:38:22.607757Z","iopub.status.idle":"2026-02-08T19:38:22.717800Z","shell.execute_reply":"2026-02-08T19:38:22.717130Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Monthly average residual load\nfig, ax = plt.subplots(figsize=(14, 6))\n\nax.plot(monthly_gen.index, monthly_gen[\"residual_load\"], color=\"tab:red\", linewidth=1.2)\nax.axhline(0, color=\"black\", linewidth=0.5, linestyle=\"--\")\nax.set_xlabel(\"Date\")\nax.set_ylabel(\"Residual Load (MW)\")\nax.set_title(\"Monthly Average Residual Load\")\nax.grid(True, alpha=0.3)\n\nfig.tight_layout()\nplt.show()","key":"ZS6M4t3qOT"},{"type":"outputs","id":"jxDc3i3SRFsfPxKh8c1pY","children":[{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"d56bd381ba1f6b28fc8146de22fc4f17","path":"/world-of-energy/build/d56bd381ba1f6b28fc8146de22fc4f17.png"},"text/plain":{"content":"<Figure size 1400x600 with 1 Axes>","content_type":"text/plain"}}},"children":[],"key":"pPy4fpoOdL"}],"key":"xCARQNEdwl"}],"key":"XtMpzUSj7F"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Residual Load vs Electricity Price","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"isY8DP15hV"}],"identifier":"residual-load-vs-electricity-price","label":"Residual Load vs Electricity Price","html_id":"residual-load-vs-electricity-price","implicit":true,"key":"UkHMlNtoli"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Because the merit order is roughly monotonic—cheap renewables first, then\ncoal/lignite, then gas—the price is largely determined by ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"A70PsuBjPn"},{"type":"emphasis","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"how far up","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"sUtV7Xck3e"}],"key":"R21vu7FJNf"},{"type":"text","value":" the\nsupply curve demand reaches. Residual load measures exactly that.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"f0QinSNQmB"}],"key":"MRWCq1uPTU"},{"type":"paragraph","position":{"start":{"line":7,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"The charts below zoom into three-week windows to show how hourly residual\nload and electricity prices move together. A linear fit\n(price = intercept + slope × residual load) is used to align the two\ny-axes so that the visual overlap reflects the statistical relationship.","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"cJLZ4jNad3"}],"key":"iCPUh5GooF"}],"key":"N140blzp0B"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.719340Z","iopub.status.busy":"2026-02-08T19:38:22.719157Z","iopub.status.idle":"2026-02-08T19:38:22.726882Z","shell.execute_reply":"2026-02-08T19:38:22.726248Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"import numpy as np\n\n# Align price and residual load on the same index\nprice_res = df[[\"PRICE_DE_LU\"]].join(gen[[\"residual_load\"]], how=\"inner\").dropna()\n\n\ndef plot_price_vs_residual(price_res_window, title_dates):\n    \"\"\"Plot price and residual load with axes aligned via a linear fit.\"\"\"\n    X = price_res_window[\"residual_load\"].values\n    y = price_res_window[\"PRICE_DE_LU\"].values\n    slope, intercept = np.polyfit(X, y, 1)\n    print(f\"Linear fit: price = {intercept:.2f} + {slope:.4f} × residual_load\")\n\n    fig, ax1 = plt.subplots(figsize=(14, 6))\n\n    color1 = \"tab:blue\"\n    ax1.plot(price_res_window.index, price_res_window[\"residual_load\"],\n             color=color1, linewidth=0.5, alpha=0.7, label=\"Residual Load\")\n    ax1.set_xlabel(\"Date\")\n    ax1.set_ylabel(\"Residual Load (MW)\", color=color1)\n    ax1.tick_params(axis=\"y\", labelcolor=color1)\n\n    ax2 = ax1.twinx()\n    color2 = \"tab:orange\"\n    ax2.plot(price_res_window.index, price_res_window[\"PRICE_DE_LU\"],\n             color=color2, linewidth=0.5, alpha=0.7, label=\"Price\")\n    ax2.set_ylabel(\"Price (EUR/MWh)\", color=color2)\n    ax2.tick_params(axis=\"y\", labelcolor=color2)\n\n    # Align the residual load axis to the price axis using the linear fit\n    p_lo, p_hi = ax2.get_ylim()\n    ax1.set_ylim((p_lo - intercept) / slope, (p_hi - intercept) / slope)\n\n    ax1.set_title(f\"Residual Load and Electricity Price ({title_dates})\")\n    ax1.grid(True, alpha=0.3)\n\n    lines1, labels1 = ax1.get_legend_handles_labels()\n    lines2, labels2 = ax2.get_legend_handles_labels()\n    ax1.legend(lines1 + lines2, labels1 + labels2, loc=\"upper left\")\n\n    fig.tight_layout()\n    plt.show()","key":"k3u2oGrwtq"},{"type":"outputs","id":"A-e2hJi0BwJeYqYT2yrB6","children":[],"key":"tbFUk3vURY"}],"key":"YZJ5ElU1cO"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.728505Z","iopub.status.busy":"2026-02-08T19:38:22.728421Z","iopub.status.idle":"2026-02-08T19:38:22.895453Z","shell.execute_reply":"2026-02-08T19:38:22.894881Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# Recent 3-week window (same as intraday section above)\nprice_res_sub = price_res.loc[start_date:end_date]\nprint(f\"Matched records: {len(price_res_sub)}\")\n\nplot_price_vs_residual(\n    price_res_sub,\n    f\"{start_date.strftime('%d %b')} – {end_date.strftime('%d %b %Y')}\",\n)","key":"tf43FazflC"},{"type":"outputs","id":"UIgznUt0cdQtCTqO6_wVZ","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Matched records: 422\nLinear fit: price = 26.08 + 0.0023 × residual_load\n"},"children":[],"key":"xLjUlYypwQ"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"1fc951968a79e88fd336fbcfaacd26e3","path":"/world-of-energy/build/1fc951968a79e88fd336fbcfaacd26e3.png"},"text/plain":{"content":"<Figure size 1400x600 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"ZWmCXWviRJ"}],"key":"dWY8u3yEBw"}],"key":"QGFBMrHxm2"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:22.896936Z","iopub.status.busy":"2026-02-08T19:38:22.896760Z","iopub.status.idle":"2026-02-08T19:38:23.044334Z","shell.execute_reply":"2026-02-08T19:38:23.043774Z"}},"children":[{"type":"code","lang":"python","executable":true,"value":"# A second 3-week window in 2025 for comparison\nstart_2025 = pd.Timestamp(\"2025-06-01\")\nend_2025 = start_2025 + timedelta(weeks=3)\n\nprice_res_2025 = price_res.loc[start_2025:end_2025]\nprint(f\"Matched records (2025 window): {len(price_res_2025)}\")\n\nplot_price_vs_residual(\n    price_res_2025,\n    f\"{start_2025.strftime('%d %b')} – {end_2025.strftime('%d %b %Y')}\",\n)","key":"pp4ElU5cSY"},{"type":"outputs","id":"SRgAJLGn90xaVzksnFGU1","children":[{"type":"output","jupyter_data":{"name":"stdout","output_type":"stream","text":"Matched records (2025 window): 505\nLinear fit: price = -11.72 + 0.0036 × residual_load\n"},"children":[],"key":"X0eUSHvLLt"},{"type":"output","jupyter_data":{"output_type":"display_data","metadata":{},"data":{"image/png":{"content_type":"image/png","hash":"3699f1a148e9f5508302132890369229","path":"/world-of-energy/build/3699f1a148e9f5508302132890369229.png"},"text/plain":{"content":"<Figure size 1400x600 with 2 Axes>","content_type":"text/plain"}}},"children":[],"key":"tNHl6Sy920"}],"key":"c9omu86Ysc"}],"key":"hPLObQlxEx"},{"type":"block","kind":"notebook-code","data":{"execution":{"iopub.execute_input":"2026-02-08T19:38:23.045918Z","iopub.status.busy":"2026-02-08T19:38:23.045824Z","iopub.status.idle":"2026-02-08T19:38:23.049219Z","shell.execute_reply":"2026-02-08T19:38:23.048785Z"},"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"from IPython.display import Markdown\n\nMarkdown(f\"Last run: {datetime.now().strftime('%Y-%m-%d')}\")","visibility":"remove","key":"lTE5B6uhCF"},{"type":"outputs","id":"2OKeetooE-J5Dezy_UCiQ","children":[{"type":"output","jupyter_data":{"output_type":"execute_result","execution_count":16,"metadata":{},"data":{"text/markdown":{"content":"Last run: 2026-02-08","content_type":"text/markdown"},"text/plain":{"content":"<IPython.core.display.Markdown object>","content_type":"text/plain"}}},"children":[],"key":"t3Ea1BPZXe"}],"visibility":"show","key":"gIfqxKqlCr"}],"visibility":"show","key":"pOUdxh277r"}],"key":"aHBFLlUF5D"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"World of Energy","url":"/","group":"World of Energy"},"next":{"title":"Fossil Fuel Costs and Electricity Price Reconstruction","url":"/notebooks/reconstruct-prices","group":"World of Energy"}}},"domain":"http://localhost:3000"}