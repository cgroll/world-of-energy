schema: '2.0'
stages:
  download_smard_prices:
    cmd: python pipeline/01_download_smard_DE_prices.py
    deps:
    - path: pipeline/01_download_smard_DE_prices.py
      hash: md5
      md5: 55dc545d791c4b6b6158783029743c3c
      size: 4910
    - path: woe/paths.py
      hash: md5
      md5: d266f4c13f558f1c23397adfd42490f7
      size: 5122
    - path: woe/smard/api.py
      hash: md5
      md5: c02064fa8acf43138169778269a8c2f0
      size: 3245
    - path: woe/smard/config.py
      hash: md5
      md5: 9ee10c8add293c031abbee0f066cd00d
      size: 6793
    outs:
    - path: data/downloads/smard/prices_de_lu.parquet
      hash: md5
      md5: 247fac1902042be63cbf5508d5d0c8ed
      size: 787806
  process_smard_DE_prices:
    cmd: "MPLBACKEND=Agg python pipeline/03_smard_DE_prices.py && uv run jupytext
      --to md:myst --output book/notebooks/03_smard_DE_prices.md pipeline/03_smard_DE_prices.py
      && sed -i -e 's/```{code-cell}/```{code-cell} python/g' -e '/root_level_metadata_filter/d'
      book/notebooks/03_smard_DE_prices.md\n"
    deps:
    - path: data/downloads/smard/prices_de_lu.parquet
      hash: md5
      md5: cf091d3ecfb114e2564af97688b900d9
      size: 788094
    - path: data/downloads/smard/solar.parquet
      hash: md5
      md5: e4e47c88ae22d08959fa3bffb8a595d0
      size: 965503
    - path: data/downloads/smard/total_load.parquet
      hash: md5
      md5: 938685177e69ea6c964a0f0679dbef2b
      size: 970693
    - path: data/downloads/smard/wind_offshore.parquet
      hash: md5
      md5: f42de75296c83e34d0158366076bc0d8
      size: 820468
    - path: data/downloads/smard/wind_onshore.parquet
      hash: md5
      md5: f66f1e142f63e91293cb7b716c368bdb
      size: 1107429
    - path: data/downloads/ttf_gas_prices.parquet
      hash: md5
      md5: 4eb34b88f8ef89d3f1c126be75a41555
      size: 81588
    - path: pipeline/03_smard_DE_prices.py
      hash: md5
      md5: 3d57c414f2b507f425d561bca3db436f
      size: 19465
    - path: woe/paths.py
      hash: md5
      md5: e225909b00b81405a77978c7fa49a19c
      size: 6718
    outs:
    - path: book/notebooks/03_smard_DE_prices.md
      hash: md5
      md5: 6f23af0537e9c3c882489f8e1fca730c
      size: 19158
    - path: output/images/03_daily_profile.png
      hash: md5
      md5: 195604fd08232c9645a8ed48aa89168c
      size: 97784
    - path: output/images/03_electricity_vs_gas.png
      hash: md5
      md5: 388b67b5f6bcf82a6ab33763dfb84e08
      size: 125520
    - path: output/images/03_hourly_prices.png
      hash: md5
      md5: a14318fb3a96540a8c98a8c0a02ea3fb
      size: 119299
    - path: output/images/03_intraday_3week.png
      hash: md5
      md5: 3a207a50584d7fbbdbc2c93c686a3c42
      size: 148388
    - path: output/images/03_monthly_avg_prices.png
      hash: md5
      md5: a8b888482f44916bccd8464eea5c906e
      size: 86701
    - path: output/images/03_monthly_residual_load.png
      hash: md5
      md5: 3f996eab5512ad4b77cd3c362c2aa187
      size: 106604
    - path: output/images/03_price_vs_residual_2025.png
      hash: md5
      md5: 918289069adbe469732fdd6141f77169
      size: 229394
    - path: output/images/03_price_vs_residual_recent.png
      hash: md5
      md5: c3d08253094e5f36ec246d1a4a1a43ad
      size: 193622
    - path: output/images/03_renewables_vs_load.png
      hash: md5
      md5: 433dc4655235b7b6db5c77a0dd77e27a
      size: 166043
  download_residual_load:
    cmd: python pipeline/03_download_residual_load.py
    deps:
    - path: pipeline/03_download_residual_load.py
      hash: md5
      md5: f742280168d8eaedc58e8cfd8b0313f4
      size: 5875
    - path: woe/paths.py
      hash: md5
      md5: d266f4c13f558f1c23397adfd42490f7
      size: 5122
    - path: woe/smard/api.py
      hash: md5
      md5: c02064fa8acf43138169778269a8c2f0
      size: 3245
    - path: woe/smard/config.py
      hash: md5
      md5: 9ee10c8add293c031abbee0f066cd00d
      size: 6793
    outs:
    - path: data/downloads/smard/solar.parquet
      hash: md5
      md5: 2d167c549529925bc2487d41f536fd05
      size: 965212
    - path: data/downloads/smard/total_load.parquet
      hash: md5
      md5: b3d1bd65cbdb6c7bae7e1adaebd8487f
      size: 970395
    - path: data/downloads/smard/wind_offshore.parquet
      hash: md5
      md5: 01d0343fa8c7270e9fdf6ddb5eef95ec
      size: 820177
    - path: data/downloads/smard/wind_onshore.parquet
      hash: md5
      md5: 970d28b021112af36a612f26565ed3a4
      size: 1107080
  download_capacities:
    cmd: python pipeline/07_download_capacities.py
    deps:
    - path: pipeline/07_download_capacities.py
      hash: md5
      md5: fd80ee87dc67fe0018eab6cee712050c
      size: 6091
    - path: woe/paths.py
      hash: md5
      md5: 84ff61a59654d299ca4064eb67595043
      size: 4591
    - path: woe/smard/api.py
      hash: md5
      md5: c02064fa8acf43138169778269a8c2f0
      size: 3245
    - path: woe/smard/config.py
      hash: md5
      md5: 9ee10c8add293c031abbee0f066cd00d
      size: 6793
    outs:
    - path: data/downloads/smard/capacities.parquet
      hash: md5
      md5: 09ff4edfc9e9bc8c5e6b42b1afe5a377
      size: 9534
  download_baseload_and_capacities:
    cmd: python pipeline/07_download_baseload_and_capacities.py
    deps:
    - path: pipeline/07_download_baseload_and_capacities.py
      hash: md5
      md5: 2349a2be791d1375664945e2d5c3e4d8
      size: 9825
    - path: woe/paths.py
      hash: md5
      md5: d266f4c13f558f1c23397adfd42490f7
      size: 5122
    - path: woe/smard/api.py
      hash: md5
      md5: c02064fa8acf43138169778269a8c2f0
      size: 3245
    - path: woe/smard/config.py
      hash: md5
      md5: 9ee10c8add293c031abbee0f066cd00d
      size: 6793
    outs:
    - path: data/downloads/smard/biomass.parquet
      hash: md5
      md5: 938602e2748d0d7d8dfc899bcd9cc14d
      size: 878162
    - path: data/downloads/smard/capacities.parquet
      hash: md5
      md5: 09ff4edfc9e9bc8c5e6b42b1afe5a377
      size: 9534
    - path: data/downloads/smard/hydro.parquet
      hash: md5
      md5: dffcb9456034b78fb541baa132c1d5a1
      size: 886006
    - path: data/downloads/smard/nuclear.parquet
      hash: md5
      md5: c19776a48e7a55da39b89e64bc29be11
      size: 546315
  download_ttf_gas:
    cmd: python pipeline/02_download_ttf_gas.py
    deps:
    - path: pipeline/02_download_ttf_gas.py
      hash: md5
      md5: 04661454b2d980fbcd83fea10a3530a2
      size: 3762
    - path: woe/paths.py
      hash: md5
      md5: e225909b00b81405a77978c7fa49a19c
      size: 6718
    outs:
    - path: data/downloads/ttf_gas_prices.parquet
      hash: md5
      md5: 4eb34b88f8ef89d3f1c126be75a41555
      size: 81588
  process_reconstruct_prices:
    cmd: "MPLBACKEND=Agg python pipeline/04_reconstruct_prices.py && uv run jupytext
      --to md:myst --output book/notebooks/04_reconstruct_prices.md pipeline/04_reconstruct_prices.py
      && sed -i -e 's/```{code-cell}/```{code-cell} python/g' -e '/root_level_metadata_filter/d'
      book/notebooks/04_reconstruct_prices.md\n"
    deps:
    - path: data/downloads/investing_com/carbon_emissions_futures.csv
      hash: md5
      md5: 1defc0c22075c50c858604cab57a5e69
      size: 143506
    - path: data/downloads/investing_com/rotterdam_coal_futures.csv
      hash: md5
      md5: 06114f8bc08e64fcfb9e165ce54c2dbf
      size: 145594
    - path: data/downloads/smard/biomass.parquet
      hash: md5
      md5: 707834dd4e428a8c159c319c0434a0d7
      size: 878453
    - path: data/downloads/smard/capacities.parquet
      hash: md5
      md5: 09ff4edfc9e9bc8c5e6b42b1afe5a377
      size: 9534
    - path: data/downloads/smard/hydro.parquet
      hash: md5
      md5: 8a67ca752c1fd3f02e82ade5d8cf9c69
      size: 886283
    - path: data/downloads/smard/nuclear.parquet
      hash: md5
      md5: c19776a48e7a55da39b89e64bc29be11
      size: 546315
    - path: data/downloads/smard/prices_de_lu.parquet
      hash: md5
      md5: cf091d3ecfb114e2564af97688b900d9
      size: 788094
    - path: data/downloads/smard/solar.parquet
      hash: md5
      md5: e4e47c88ae22d08959fa3bffb8a595d0
      size: 965503
    - path: data/downloads/smard/total_load.parquet
      hash: md5
      md5: 938685177e69ea6c964a0f0679dbef2b
      size: 970693
    - path: data/downloads/smard/wind_offshore.parquet
      hash: md5
      md5: f42de75296c83e34d0158366076bc0d8
      size: 820468
    - path: data/downloads/smard/wind_onshore.parquet
      hash: md5
      md5: f66f1e142f63e91293cb7b716c368bdb
      size: 1107429
    - path: data/downloads/ttf_gas_prices.parquet
      hash: md5
      md5: 4eb34b88f8ef89d3f1c126be75a41555
      size: 81588
    - path: pipeline/04_reconstruct_prices.py
      hash: md5
      md5: 615d92c07b83eb9366eef9b1a46ca9e9
      size: 24024
    - path: woe/paths.py
      hash: md5
      md5: e225909b00b81405a77978c7fa49a19c
      size: 6718
    outs:
    - path: book/notebooks/04_reconstruct_prices.md
      hash: md5
      md5: bd8b87a416f416f3e2158985ee209431
      size: 23782
    - path: output/images/04_actual_vs_reconstructed.png
      hash: md5
      md5: 0aaeb6e6fc15f0bad725bfb34d7c16ba
      size: 107915
    - path: output/images/04_fuel_switching.png
      hash: md5
      md5: 591b5f2dc4de52eede978fd00bb14a81
      size: 211868
    - path: output/images/04_monthly_srmc.png
      hash: md5
      md5: bb0717ed8093a8612bece5ee4333bf9a
      size: 107531
    - path: output/images/04_r2_comparison.png
      hash: md5
      md5: b15d4d926b82ed915f5887b1047411a1
      size: 45726
    - path: output/images/04_scatter_fossil_rl_vs_price.png
      hash: md5
      md5: 6f3ba921a54436860b10f67ad743f81d
      size: 413698
    - path: output/images/04_scatter_reconstructed_vs_actual.png
      hash: md5
      md5: 83313f8c1999cbadf7c5a817321289a7
      size: 203678
    - path: output/images/04_scatter_residual_load_vs_price.png
      hash: md5
      md5: 2cb331ca970f0d4fe5dbc8bc995c5588
      size: 416539
    - path: output/images/04_srmc_components.png
      hash: md5
      md5: 9dc0cb13405f5d69c93962699ed28029
      size: 190961
    - path: output/images/04_srmc_timeseries.png
      hash: md5
      md5: 6dab96cae6549f9d150d207710db60a3
      size: 130432
  download_smard_price_analysis_data:
    cmd: python pipeline/01_download_smard_price_analysis_data.py
    deps:
    - path: pipeline/01_download_smard_price_analysis_data.py
      hash: md5
      md5: 23f156e46c8f7aea1c7d7fbcf8fdeb5d
      size: 12013
    - path: woe/paths.py
      hash: md5
      md5: e225909b00b81405a77978c7fa49a19c
      size: 6718
    - path: woe/smard/api.py
      hash: md5
      md5: c02064fa8acf43138169778269a8c2f0
      size: 3245
    - path: woe/smard/config.py
      hash: md5
      md5: c97b7ad4729aad7045e5b9a11bcc4042
      size: 7258
    outs:
    - path: data/downloads/smard/biomass.parquet
      hash: md5
      md5: 707834dd4e428a8c159c319c0434a0d7
      size: 878453
    - path: data/downloads/smard/capacities.parquet
      hash: md5
      md5: 09ff4edfc9e9bc8c5e6b42b1afe5a377
      size: 9534
    - path: data/downloads/smard/hydro.parquet
      hash: md5
      md5: 8a67ca752c1fd3f02e82ade5d8cf9c69
      size: 886283
    - path: data/downloads/smard/nuclear.parquet
      hash: md5
      md5: c19776a48e7a55da39b89e64bc29be11
      size: 546315
    - path: data/downloads/smard/prices_de_lu.parquet
      hash: md5
      md5: cf091d3ecfb114e2564af97688b900d9
      size: 788094
    - path: data/downloads/smard/solar.parquet
      hash: md5
      md5: e4e47c88ae22d08959fa3bffb8a595d0
      size: 965503
    - path: data/downloads/smard/total_load.parquet
      hash: md5
      md5: 938685177e69ea6c964a0f0679dbef2b
      size: 970693
    - path: data/downloads/smard/wind_offshore.parquet
      hash: md5
      md5: f42de75296c83e34d0158366076bc0d8
      size: 820468
    - path: data/downloads/smard/wind_onshore.parquet
      hash: md5
      md5: f66f1e142f63e91293cb7b716c368bdb
      size: 1107429
  process_load_seasonalities:
    cmd: "MPLBACKEND=Agg python pipeline/05_load_seasonalities.py && uv run jupytext
      --to md:myst --output book/notebooks/05_load_seasonalities.md pipeline/05_load_seasonalities.py
      && sed -i -e 's/```{code-cell}/```{code-cell} python/g' -e '/root_level_metadata_filter/d'
      book/notebooks/05_load_seasonalities.md\n"
    deps:
    - path: data/downloads/smard/prices_de_lu.parquet
      hash: md5
      md5: cf091d3ecfb114e2564af97688b900d9
      size: 788094
    - path: data/downloads/smard/solar.parquet
      hash: md5
      md5: e4e47c88ae22d08959fa3bffb8a595d0
      size: 965503
    - path: data/downloads/smard/total_load.parquet
      hash: md5
      md5: 938685177e69ea6c964a0f0679dbef2b
      size: 970693
    - path: data/downloads/smard/wind_offshore.parquet
      hash: md5
      md5: f42de75296c83e34d0158366076bc0d8
      size: 820468
    - path: data/downloads/smard/wind_onshore.parquet
      hash: md5
      md5: f66f1e142f63e91293cb7b716c368bdb
      size: 1107429
    - path: pipeline/05_load_seasonalities.py
      hash: md5
      md5: 5d5f227eeb697421159a12e569a659b1
      size: 6192
    - path: woe/paths.py
      hash: md5
      md5: e225909b00b81405a77978c7fa49a19c
      size: 6718
    outs:
    - path: book/notebooks/05_load_seasonalities.md
      hash: md5
      md5: 5ee35b8df9545bc465c04ef46fe3c92a
      size: 6121
    - path: output/images/05_seasonality_load.png
      hash: md5
      md5: 4b04dafa4ee44618032dbbf78b6d58a2
      size: 86981
    - path: output/images/05_seasonality_price.png
      hash: md5
      md5: d998e60f8628fc89644612f30a6ee37b
      size: 75608
    - path: output/images/05_seasonality_renewables.png
      hash: md5
      md5: b8dd672e04b840c04ba5e2f39824ba84
      size: 90051
    - path: output/images/05_seasonality_residual_load.png
      hash: md5
      md5: 6cfa03a88deca8a50348826c969b7c16
      size: 77839
    - path: output/images/05_seasonality_solar.png
      hash: md5
      md5: 5da112ea3617d1c59ae998b9a3a22f28
      size: 67947
    - path: output/images/05_seasonality_wind.png
      hash: md5
      md5: 1637ca45d91d00d4f50f11a9208e1512
      size: 82352
  download_smard_forecasts:
    cmd: python pipeline/06_download_smard_forecasts.py
    deps:
    - path: pipeline/06_download_smard_forecasts.py
      hash: md5
      md5: 7b70a77029b3b08b76e948da9bcad6c1
      size: 7732
    - path: woe/paths.py
      hash: md5
      md5: e225909b00b81405a77978c7fa49a19c
      size: 6718
    - path: woe/smard/api.py
      hash: md5
      md5: c02064fa8acf43138169778269a8c2f0
      size: 3245
    - path: woe/smard/config.py
      hash: md5
      md5: c97b7ad4729aad7045e5b9a11bcc4042
      size: 7258
    outs:
    - path: data/downloads/smard/forecast_da_load.parquet
      hash: md5
      md5: c24c6682976ae86b6e1c7cc6883684a5
      size: 3691359
    - path: data/downloads/smard/forecast_da_solar.parquet
      hash: md5
      md5: f84fd8a97cbec7f6a1a025c009da8644
      size: 3300565
    - path: data/downloads/smard/forecast_da_wind_offshore.parquet
      hash: md5
      md5: 0207963dd9e14ae7fc94f6aa2e25c7ae
      size: 3391063
    - path: data/downloads/smard/forecast_da_wind_onshore.parquet
      hash: md5
      md5: 5a4807a705a6a0f12dc74430fbe56cd3
      size: 3670243
    - path: data/downloads/smard/forecast_id_solar.parquet
      hash: md5
      md5: dee39112eee5830222df5a233fbb4880
      size: 3036012
    - path: data/downloads/smard/forecast_id_wind_offshore.parquet
      hash: md5
      md5: 7fec438fde86b0132458e6f07d8e98c7
      size: 3123690
    - path: data/downloads/smard/forecast_id_wind_onshore.parquet
      hash: md5
      md5: 127245b10833a978422e79b257f9250d
      size: 3379514
  process_earth_seasons:
    cmd: "MPLBACKEND=Agg python pipeline/10_earth_seasons.py && uv run jupytext --to
      md:myst --output book/notebooks/10_earth_seasons.md pipeline/10_earth_seasons.py
      && sed -i -e 's/```{code-cell}/```{code-cell} python/g' -e '/root_level_metadata_filter/d'
      book/notebooks/10_earth_seasons.md\n"
    deps:
    - path: pipeline/10_earth_seasons.py
      hash: md5
      md5: 7401f2b575250551845b8d18654b75a4
      size: 26224
    - path: woe/paths.py
      hash: md5
      md5: e225909b00b81405a77978c7fa49a19c
      size: 6718
    outs:
    - path: book/notebooks/10_earth_seasons.md
      hash: md5
      md5: 1441dc53b645d92b3e9de0db7c593b8c
      size: 25971
    - path: output/images/10_ee_ndvi_africa_by_doy.gif
      hash: md5
      md5: ad67b5238811e9e66a68594cb94c8f56
      size: 2770278
    - path: output/images/10_ee_ndvi_by_doy.gif
      hash: md5
      md5: bf7dec085b5cd23d52c1819c2af30406
      size: 562875
    - path: output/images/10_ee_temperature_by_hour.gif
      hash: md5
      md5: df1790a6e94d942bd70ea0c11219a2e6
      size: 1213302
    - path: output/images/10_ee_temperature_by_month.gif
      hash: md5
      md5: 7bedd851b723146a644a7f2e8d28207b
      size: 381462
    - path: output/images/10_elevation_heatmap_munich.png
      hash: md5
      md5: 05dafa8cba00168e0e30b6d04b0461c7
      size: 158043
    - path: output/images/10_elevation_heatmap_sydney.png
      hash: md5
      md5: 3ca59faef656fdef27fc94d0ae1bd0b3
      size: 157666
    - path: output/images/10_subsolar_migration.gif
      hash: md5
      md5: 7b424d20457b989fb1ce17fd133b4472
      size: 28116592
    - path: output/images/10_sunlight_animation_2025_06_21.gif
      hash: md5
      md5: 20ad5fbd34895f82d2f3b394900dd8e8
      size: 34902536
    - path: output/images/10_sunlight_animation_2025_12_21.gif
      hash: md5
      md5: 192bc1b0f84a403bc4b73a364c02428d
      size: 36449435
  process_ee_seasons:
    cmd: "python pipeline/10_ee_seasons.py && uv run jupytext --to md:myst --output
      book/notebooks/10_ee_seasons.md pipeline/10_ee_seasons.py && sed -i -e 's/```{code-cell}/```{code-cell}
      python/g' -e '/root_level_metadata_filter/d' book/notebooks/10_ee_seasons.md\n"
    deps:
    - path: pipeline/10_ee_seasons.py
      hash: md5
      md5: 0b30963b9509399451bd8255cf5733b0
      size: 10094
    - path: woe/paths.py
      hash: md5
      md5: e225909b00b81405a77978c7fa49a19c
      size: 6718
    outs:
    - path: book/notebooks/10_ee_seasons.md
      hash: md5
      md5: 56f63f531dd49719f9c5f226ff49e07d
      size: 10100
    - path: output/images/10_ee_ndvi_africa_by_doy.gif
      hash: md5
      md5: ad67b5238811e9e66a68594cb94c8f56
      size: 2770278
    - path: output/images/10_ee_ndvi_by_doy.gif
      hash: md5
      md5: bf7dec085b5cd23d52c1819c2af30406
      size: 562875
    - path: output/images/10_ee_temperature_by_hour.gif
      hash: md5
      md5: df1790a6e94d942bd70ea0c11219a2e6
      size: 1213302
    - path: output/images/10_ee_temperature_by_month.gif
      hash: md5
      md5: 7bedd851b723146a644a7f2e8d28207b
      size: 381462
  download_monthly_era5:
    cmd: python pipeline/13_download_monthly_era5.py
    deps:
    - path: pipeline/13_download_monthly_era5.py
      hash: md5
      md5: 08028215c9295f45b8ce980bc2cef322
      size: 6250
    - path: woe/paths.py
      hash: md5
      md5: 5810100b4f4e4128339bf27e45d5d9c9
      size: 8594
    outs:
    - path: 
        data/downloads/era5/monthly_aggregates/nc/era5_monthly_pressure_levels.nc
      hash: md5
      md5: b873003c16c57cbfe6f8762da6ae5be9
      size: 1169824773
    - path: data/downloads/era5/monthly_aggregates/nc/era5_sl_climate.nc
      hash: md5
      md5: b811f68da61cef1f9c03ad73092f1219
      size: 363626248
    - path: data/downloads/era5/monthly_aggregates/nc/era5_sl_wind_solar.nc
      hash: md5
      md5: 3aa5cf2eb4487f98d9ba96c954ced662
      size: 507762809
  nc_to_zarr:
    cmd: python pipeline/14_nc_to_zarr.py
    deps:
    - path: 
        data/downloads/era5/monthly_aggregates/nc/era5_monthly_pressure_levels.nc
      hash: md5
      md5: b873003c16c57cbfe6f8762da6ae5be9
      size: 1169824773
    - path: data/downloads/era5/monthly_aggregates/nc/era5_sl_climate.nc
      hash: md5
      md5: b811f68da61cef1f9c03ad73092f1219
      size: 363626248
    - path: data/downloads/era5/monthly_aggregates/nc/era5_sl_wind_solar.nc
      hash: md5
      md5: 3aa5cf2eb4487f98d9ba96c954ced662
      size: 507762809
    - path: pipeline/14_nc_to_zarr.py
      hash: md5
      md5: 103a25429b159a2ffc2ead5c770d8b64
      size: 3767
    outs:
    - path: data/downloads/era5/monthly_aggregates/zarr/era5_monthly.zarr
      hash: md5
      md5: 582beb9fd99af742c27acdd663ac01c1.dir
      size: 3562653332
      nfiles: 956
