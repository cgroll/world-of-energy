{"version":3,"kind":"Notebook","sha256":"8d35cad89b439bfd6f64cbe2cefe99002eaac81ac9d33a7be7011384b7a9db51","slug":"notebooks.daily-jet-stream-animations","location":"/notebooks/20_daily_jet_stream_animations.md","dependencies":[],"frontmatter":{"title":"NAO and Jet Stream — Daily Evolution","kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"jupytext":{"text_representation":{"format_name":"percent"}},"content_includes_title":false,"authors":[{"nameParsed":{"literal":"Christian Groll","given":"Christian","family":"Groll"},"name":"Christian Groll","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/cgroll/world-of-energy","copyright":"2026","source_url":"https://github.com/cgroll/world-of-energy/blob/main/book/notebooks/20_daily_jet_stream_animations.md","edit_url":"https://github.com/cgroll/world-of-energy/edit/main/book/notebooks/20_daily_jet_stream_animations.md","thumbnail":"/world-of-energy/build/18_t2m_z500_2014-201-96112a6f29da2165408e97a4f61febe6.gif","exports":[{"format":"md","filename":"20_daily_jet_stream_animations.md","url":"/world-of-energy/build/20_daily_jet_stream_-fdc8a2b8c2751caa9f0367ac9ff3e864.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":17,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"zbVcH0oICD"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"North Atlantic Oscillation (NAO)","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"umG9jNZqaD"}],"key":"jdeQ0TBio3"},{"type":"text","value":" is the leading mode of atmospheric\nvariability over the North Atlantic.  Its sign determines whether the\nmid-latitude jet stream is amplified and tracking north-east into Europe\n(NAO+) or weakened and shifted south, with Rossby-wave ridges blocking the\nwesterly flow (NAO−).","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"cCBXEvWcQe"}],"key":"zELJCKkcwq"},{"type":"paragraph","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"children":[{"type":"text","value":"This chapter animates two contrasting DJF (December–February) winters:","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"E27zotecg8"}],"key":"s6rdBrpZUA"},{"type":"table","position":{"start":{"line":21,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Period","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"Avmb1o3rHo"}],"key":"RsSwsgqnlN"},{"type":"tableCell","header":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"NAO phase","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"p43scoMoRQ"}],"key":"KIsdAqXLZd"},{"type":"tableCell","header":true,"position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"children":[{"type":"text","value":"Character","position":{"start":{"line":21,"column":1},"end":{"line":21,"column":1}},"key":"WZYel4NRbX"}],"key":"cXD4nFVbSE"}],"key":"khfDwiQbFg"},{"type":"tableRow","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"2014–2015","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"A0GHGhnjjQ"}],"key":"LtdBOrBMUn"},{"type":"tableCell","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Strong NAO+","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"f1DecLboPt"}],"key":"wwEsRVm2DM"},{"type":"tableCell","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"text","value":"Mild, stormy, vigorous westerlies over Europe","position":{"start":{"line":23,"column":1},"end":{"line":23,"column":1}},"key":"RJuaAjzPiw"}],"key":"duRvNT77iz"}],"key":"ifPRAfiZtI"},{"type":"tableRow","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"2009–2010","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"m7mzlXWTO3"}],"key":"a2iJm92FrC"},{"type":"tableCell","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Strong NAO−","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"uoj4V9l9Yl"}],"key":"JA241i80qa"},{"type":"tableCell","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"Cold, blocked, persistent high-pressure over Europe","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"yM6yR8BEKi"}],"key":"EkIa6i8yQC"}],"key":"RYrmNrzDj9"}],"key":"W10nsjwwX3"},{"type":"paragraph","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Each animation frame shows:","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"EHm1pROFi0"}],"key":"zDEgVkJcZi"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":27,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":27,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"text","value":"Z500 geopotential height","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"JkqcRQ9otl"}],"key":"RNwlDtXiJY"},{"type":"text","value":" (500 hPa) as labelled contour lines — ridges\n(high Z500) and troughs (low Z500) reveal the large-scale wave pattern.","position":{"start":{"line":27,"column":1},"end":{"line":27,"column":1}},"key":"jC3l4E25cX"}],"key":"RH3pDAkCij"}],"key":"E9HV1PAhZc"},{"type":"listItem","spread":true,"position":{"start":{"line":29,"column":1},"end":{"line":31,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"text","value":"Jet stream","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"L62lKpcBCK"}],"key":"as9kImWmyY"},{"type":"text","value":" (250 hPa wind speed ≥ 30 m/s) filled in purple — the\ncore of the upper-tropospheric westerly flow.","position":{"start":{"line":29,"column":1},"end":{"line":29,"column":1}},"key":"f36dZjJpr4"}],"key":"b4mt6DgIIz"}],"key":"jnkzMt1w29"}],"key":"QVUHgAt8fX"},{"type":"paragraph","position":{"start":{"line":32,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"text","value":"Data source: ERA5 reanalysis downloaded from ARCO-ERA5 (Google Cloud),\ndaily at 12:00 UTC.","position":{"start":{"line":32,"column":1},"end":{"line":32,"column":1}},"key":"kq3mtFH963"}],"key":"vBVv4wdi4g"}],"key":"l4Y0NSTYTa"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import io\n\nimport numpy as np\nimport xarray as xr\nimport matplotlib.pyplot as plt\nimport matplotlib.patches as mpatches\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\nfrom PIL import Image\n\nfrom woe.paths import ProjPaths\n\npaths = ProjPaths()","key":"u4eonucQXX"},{"type":"outputs","id":"MKjzFbeNzSmcXj5RotRpq","children":[],"key":"OSFb42XOOi"}],"key":"IUmzpUFESW"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"children":[{"type":"text","value":"Parameters","position":{"start":{"line":51,"column":1},"end":{"line":51,"column":1}},"key":"CleDW1QPT4"}],"identifier":"parameters","label":"Parameters","html_id":"parameters","implicit":true,"key":"KYmCZj5QSU"}],"key":"cyvoAi9wHB"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"G = 9.80665            # standard gravity (m/s²)\nJET_THRESHOLD = 30     # m/s — standard meteorological jet-stream criterion\nGIF_DURATION_MS = 300  # milliseconds per frame\n\n# North Atlantic / Europe domain\nEXTENT = [-90, 40, 20, 80]   # [lon_min, lon_max, lat_min, lat_max] in PlateCarree\n\n# Lambert Conformal is the standard operational projection for North Atlantic\n# synoptic charts: it preserves angles, has low distortion in the mid-latitudes,\n# and gives the familiar \"tilted\" view that meteorologists expect.\nPROJ = ccrs.LambertConformal(\n    central_longitude=-20,\n    central_latitude=55,\n    standard_parallels=(35, 65),\n)\n\nPERIODS = [\"2014-2015\", \"2009-2010\"]","key":"LLgI4h3xMw"},{"type":"outputs","id":"KDrOmSpajco7ycYmqXP1J","children":[],"key":"tL4va6QuZL"}],"key":"OWVWVf9ao8"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"children":[{"type":"text","value":"2m temperature and Z500 — surface air mass perspective","position":{"start":{"line":73,"column":1},"end":{"line":73,"column":1}},"key":"r4wtZPMeyR"}],"identifier":"id-2m-temperature-and-z500-surface-air-mass-perspective","label":"2m temperature and Z500 — surface air mass perspective","html_id":"id-2m-temperature-and-z500-surface-air-mass-perspective","implicit":true,"key":"aJ5dmyCPoO"},{"type":"paragraph","position":{"start":{"line":75,"column":1},"end":{"line":80,"column":1}},"children":[{"type":"text","value":"The first set of animations shows ","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"SH9F8kRJCX"},{"type":"strong","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"2m temperature","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"TwYc755OVZ"}],"key":"Zz8BTXBGsK"},{"type":"text","value":" as a filled colour field\nwith ","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"mgDqX58Lh8"},{"type":"strong","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"children":[{"type":"text","value":"500 hPa geopotential height (Z500)","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"KtEJk72iHe"}],"key":"ZvjUlWmoe0"},{"type":"text","value":" as labelled contour lines on top.\nThis combination is the classic synoptic-meteorology view of the lower\ntroposphere: the temperature field reveals where cold polar air has invaded\nand where warm maritime air is advected, while the Z500 contours show the\nsteering-level ridge/trough pattern that drives that advection.","position":{"start":{"line":75,"column":1},"end":{"line":75,"column":1}},"key":"lWZiL0RnSY"}],"key":"DXn50Nwue5"}],"key":"BGzwou09wU"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def render_frame_t2m_z500(\n    lats: np.ndarray,\n    lons: np.ndarray,\n    t2m_celsius: np.ndarray,\n    gph500: np.ndarray,\n    date_str: str,\n    period_name: str,\n) -> Image.Image:\n    \"\"\"Render a 2m-temperature + Z500-contour frame and return a PIL Image.\n\n    Parameters\n    ----------\n    lats, lons    : coordinate arrays (1-D)\n    t2m_celsius   : 2m temperature in °C, shape (lat, lon)\n    gph500        : 500 hPa geopotential height in metres, shape (lat, lon)\n    date_str      : ISO date string for the title, e.g. \"2014-12-01\"\n    period_name   : e.g. \"2014-2015\"\n    \"\"\"\n    fig = plt.figure(figsize=(12, 8))\n    ax = fig.add_subplot(1, 1, 1, projection=PROJ)\n\n    # --- Background: 2m temperature ---\n    # Winter range over the Atlantic–Europe domain: roughly −30 to +20 °C\n    im = ax.pcolormesh(\n        lons, lats, t2m_celsius,\n        cmap=\"RdBu_r\",\n        vmin=-30, vmax=20,\n        transform=ccrs.PlateCarree(),\n        shading=\"auto\",\n        zorder=1,\n    )\n\n    # --- Z500 contour lines ---\n    z500_levels = np.arange(4800, 6001, 60)\n    cs = ax.contour(\n        lons, lats, gph500,\n        levels=z500_levels,\n        colors=\"black\",\n        linewidths=0.6,\n        transform=ccrs.PlateCarree(),\n        zorder=3,\n    )\n    ax.clabel(cs, fmt=\"%d m\", fontsize=6, inline=True, inline_spacing=3)\n\n    # --- Political geography ---\n    ax.add_feature(cfeature.COASTLINE, linewidth=0.7, color=\"0.15\", zorder=4)\n    ax.add_feature(cfeature.BORDERS, linewidth=0.4, linestyle=\"--\",\n                   color=\"0.35\", zorder=4)\n\n    ax.set_extent(EXTENT, crs=ccrs.PlateCarree())\n\n    # --- Gridlines ---\n    gl = ax.gridlines(\n        crs=ccrs.PlateCarree(),\n        draw_labels=True,\n        linewidth=0.3,\n        color=\"gray\",\n        alpha=0.5,\n        linestyle=\":\",\n    )\n    gl.top_labels = False\n    gl.right_labels = False\n    gl.xlabel_style = {\"size\": 8}\n    gl.ylabel_style = {\"size\": 8}\n\n    # --- Colorbar ---\n    cbar = fig.colorbar(im, ax=ax, orientation=\"vertical\", pad=0.02,\n                        fraction=0.03, aspect=30, shrink=0.85)\n    cbar.set_label(\"2m temperature (°C)\", fontsize=9)\n    cbar.ax.tick_params(labelsize=8)\n\n    ax.set_title(\n        f\"2m temperature (colour) + Z500 geopotential height (contours, m)\\n\"\n        f\"{date_str} 12:00 UTC  |  ERA5  |  Winter {period_name}\",\n        fontsize=11, pad=8,\n    )\n\n    buf = io.BytesIO()\n    fig.savefig(buf, format=\"png\", dpi=100, bbox_inches=\"tight\")\n    plt.close(fig)\n    buf.seek(0)\n    return Image.open(buf).copy()","key":"P56weIv8ya"},{"type":"outputs","id":"YyYxv4zwwYjVlWZXsmcB_","children":[],"key":"kasR73FOzc"}],"key":"s3Q6DCKQaD"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"children":[{"type":"text","value":"Generate T2m + Z500 animations","position":{"start":{"line":167,"column":1},"end":{"line":167,"column":1}},"key":"gdEVKAFTiK"}],"identifier":"generate-t2m-z500-animations","label":"Generate T2m + Z500 animations","html_id":"generate-t2m-z500-animations","implicit":true,"key":"eFgnuOJfLq"}],"key":"qDOxUtv04G"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"for period_name in PERIODS:\n    data_file = paths.era5_nao_jetstream_path / f\"era5_nao_jetstream_{period_name}.nc\"\n    gif_file = paths.images_path / f\"18_t2m_z500_{period_name}.gif\"\n\n    print(f\"[{period_name}] Loading {data_file.name} ...\")\n    ds = xr.open_dataset(data_file)\n    lats = ds.latitude.values\n    lons = ds.longitude.values\n    n = len(ds.time)\n\n    frames = []\n    for i, t in enumerate(ds.time.values):\n        date_str = str(t)[:10]\n        gph500 = ds[\"geopotential\"].sel(time=t).values / G\n        t2m_celsius = ds[\"2m_temperature\"].sel(time=t).values - 273.15\n\n        frame = render_frame_t2m_z500(lats, lons, t2m_celsius, gph500,\n                                      date_str, period_name)\n        frames.append(frame)\n        print(f\"  frame {i + 1:3d}/{n}  {date_str}\", end=\"\\r\")\n\n    frames[0].save(\n        gif_file,\n        save_all=True,\n        append_images=frames[1:],\n        duration=GIF_DURATION_MS,\n        loop=0,\n    )\n    print(f\"\\n[{period_name}] Saved: {gif_file.name}  ({n} frames)\")\n    ds.close()","key":"BCFUkHlRAz"},{"type":"outputs","id":"qUMn1q-SiPNqQxtjLt5Qj","children":[],"key":"GSC2D8ZXOY"}],"key":"mDeEZUCvTu"},{"type":"block","children":[{"type":"heading","depth":4,"position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"children":[{"type":"text","value":"NAO+ winter 2014–2015 — temperature and Z500","position":{"start":{"line":202,"column":1},"end":{"line":202,"column":1}},"key":"p6V8EgSsJl"}],"identifier":"nao-winter-2014-2015-temperature-and-z500","label":"NAO+ winter 2014–2015 — temperature and Z500","html_id":"nao-winter-2014-2015-temperature-and-z500","implicit":true,"key":"XaZMv0QO9k"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/18_t2m_z500_2014-201-96112a6f29da2165408e97a4f61febe6.gif","alt":"Daily 2m temperature (colour, °C) and 500 hPa geopotential height (contour\nlines, m) during the NAO+ winter of December 2014 – February 2015.  The\ntightly packed Z500 contours over the North Atlantic reflect the strong\nwesterly pressure gradient; mild maritime air (red/orange) is advected\npersistently into western and central Europe.  ERA5 reanalysis, 12:00 UTC.","data":{"altTextIsAutoGenerated":true},"key":"LIqcPyBApj","urlSource":"../../output/images/18_t2m_z500_2014-2015.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":206,"column":1},"end":{"line":210,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-18-t2m-z500-2014-2015","identifier":"fig-18-t2m-z500-2014-2015","html_id":"fig-18-t2m-z500-2014-2015","enumerator":"1","children":[{"type":"text","value":"Figure ","key":"SzZJyn1z5F"},{"type":"text","value":"1","key":"JXMlfKCaX3"},{"type":"text","value":":","key":"B3TUX4HYf3"}],"template":"Figure %s:","key":"PfZAJgqnz0"},{"type":"text","value":"Daily 2m temperature (colour, °C) and 500 hPa geopotential height (contour\nlines, m) during the NAO+ winter of December 2014 – February 2015.  The\ntightly packed Z500 contours over the North Atlantic reflect the strong\nwesterly pressure gradient; mild maritime air (red/orange) is advected\npersistently into western and central Europe.  ERA5 reanalysis, 12:00 UTC.","position":{"start":{"line":206,"column":1},"end":{"line":206,"column":1}},"key":"SkQUuXcEY2"}],"key":"RRp4vWcBlb"}],"key":"mpoTVInctB"}],"label":"fig-18-t2m-z500-2014-2015","identifier":"fig-18-t2m-z500-2014-2015","enumerator":"1","html_id":"fig-18-t2m-z500-2014-2015","key":"cip9oGuwbg"}],"key":"Hspxbi3IJL"},{"type":"block","position":{"start":{"line":213,"column":1},"end":{"line":213,"column":1}},"children":[{"type":"heading","depth":4,"position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"children":[{"type":"text","value":"NAO− winter 2009–2010 — temperature and Z500","position":{"start":{"line":215,"column":1},"end":{"line":215,"column":1}},"key":"jryVt9Z116"}],"identifier":"nao-winter-2009-2010-temperature-and-z500","label":"NAO− winter 2009–2010 — temperature and Z500","html_id":"nao-winter-2009-2010-temperature-and-z500","implicit":true,"key":"JbmkFEfYGU"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/18_t2m_z500_2009-201-51045c2ab3428b438bd05cde6e7e43a0.gif","alt":"Daily 2m temperature (colour, °C) and 500 hPa geopotential height (contour\nlines, m) during the NAO− winter of December 2009 – February 2010.  A\npersistent Z500 ridge over Greenland and Scandinavia (widely spaced, elevated\ncontours) channels cold Arctic air (blue) southward over the European\ncontinent.  ERA5 reanalysis, 12:00 UTC.","data":{"altTextIsAutoGenerated":true},"key":"NkizcsvzMl","urlSource":"../../output/images/18_t2m_z500_2009-2010.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":219,"column":1},"end":{"line":223,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-18-t2m-z500-2009-2010","identifier":"fig-18-t2m-z500-2009-2010","html_id":"fig-18-t2m-z500-2009-2010","enumerator":"2","children":[{"type":"text","value":"Figure ","key":"IDrqQzVxwN"},{"type":"text","value":"2","key":"rOoaQ7rkad"},{"type":"text","value":":","key":"QJOWmZojZF"}],"template":"Figure %s:","key":"bAjgNl4Qey"},{"type":"text","value":"Daily 2m temperature (colour, °C) and 500 hPa geopotential height (contour\nlines, m) during the NAO− winter of December 2009 – February 2010.  A\npersistent Z500 ridge over Greenland and Scandinavia (widely spaced, elevated\ncontours) channels cold Arctic air (blue) southward over the European\ncontinent.  ERA5 reanalysis, 12:00 UTC.","position":{"start":{"line":219,"column":1},"end":{"line":219,"column":1}},"key":"aLm2cNanC9"}],"key":"sEEi8i90Wq"}],"key":"aO9dG6wd7s"}],"label":"fig-18-t2m-z500-2009-2010","identifier":"fig-18-t2m-z500-2009-2010","enumerator":"2","html_id":"fig-18-t2m-z500-2009-2010","key":"e52vRJ0nPR"}],"key":"e86iw4Vqrn"},{"type":"block","position":{"start":{"line":226,"column":1},"end":{"line":226,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"children":[{"type":"text","value":"Jet stream — upper-tropospheric flow","position":{"start":{"line":228,"column":1},"end":{"line":228,"column":1}},"key":"W6tOl6EICv"}],"identifier":"jet-stream-upper-tropospheric-flow","label":"Jet stream — upper-tropospheric flow","html_id":"jet-stream-upper-tropospheric-flow","implicit":true,"key":"Mtdx2swfwt"},{"type":"paragraph","position":{"start":{"line":230,"column":1},"end":{"line":234,"column":1}},"children":[{"type":"text","value":"The second set of animations focuses on the ","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"S9ggXE6h4p"},{"type":"strong","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"children":[{"type":"text","value":"jet stream","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"lrNUeYdGsD"}],"key":"eyV0doNHl3"},{"type":"text","value":" at 250 hPa,\nthe level where upper-tropospheric winds are strongest.  The jet stream\nposition and strength are tightly coupled to the Z500 pattern above: in NAO+\nwinters it flows vigorously north-eastward across the Atlantic; in NAO−\nwinters it weakens or splits, allowing persistent blocking.","position":{"start":{"line":230,"column":1},"end":{"line":230,"column":1}},"key":"iN6qREnRcs"}],"key":"ZdLUkWKzR1"}],"key":"RUnOvxofk6"},{"type":"block","position":{"start":{"line":236,"column":1},"end":{"line":236,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":238,"column":1},"end":{"line":238,"column":1}},"children":[{"type":"text","value":"Helper — render one synoptic frame","position":{"start":{"line":238,"column":1},"end":{"line":238,"column":1}},"key":"B6Lax6mDJ7"}],"identifier":"helper-render-one-synoptic-frame","label":"Helper — render one synoptic frame","html_id":"helper-render-one-synoptic-frame","implicit":true,"key":"nZo7Rb9LLZ"}],"key":"mnWGw3SakR"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def render_frame(\n    lats: np.ndarray,\n    lons: np.ndarray,\n    gph500: np.ndarray,\n    wspd250: np.ndarray,\n    date_str: str,\n    period_name: str,\n) -> Image.Image:\n    \"\"\"Render a single synoptic map frame and return a PIL Image.\n\n    Parameters\n    ----------\n    lats, lons : coordinate arrays (1-D)\n    gph500     : 500 hPa geopotential height in metres, shape (lat, lon)\n    wspd250    : 250 hPa wind speed in m/s, shape (lat, lon)\n    date_str   : ISO date string for the title, e.g. \"2014-12-01\"\n    period_name: e.g. \"2014-2015\"\n    \"\"\"\n    fig = plt.figure(figsize=(12, 8))\n    ax = fig.add_subplot(1, 1, 1, projection=PROJ)\n\n    # --- Background: land and ocean colours ---\n    ax.add_feature(cfeature.OCEAN, facecolor=\"#d0e8f5\", zorder=0)\n    ax.add_feature(cfeature.LAND, facecolor=\"#f0ede8\", zorder=0)\n\n    # --- Z500 contour lines ---\n    # Typical mid-latitude winter range: ~4 900 – 5 900 m; 60 m interval\n    z500_levels = np.arange(4800, 6001, 60)\n    cs = ax.contour(\n        lons, lats, gph500,\n        levels=z500_levels,\n        colors=\"black\",\n        linewidths=0.6,\n        transform=ccrs.PlateCarree(),\n        zorder=3,\n    )\n    ax.clabel(cs, fmt=\"%d m\", fontsize=6, inline=True, inline_spacing=3)\n\n    # --- Jet stream: filled purple above threshold ---\n    jet_speed_masked = np.where(wspd250 >= JET_THRESHOLD, wspd250, np.nan)\n    ax.contourf(\n        lons, lats, jet_speed_masked,\n        levels=[JET_THRESHOLD, 300],\n        colors=[\"mediumpurple\"],\n        alpha=0.75,\n        transform=ccrs.PlateCarree(),\n        zorder=4,\n    )\n    # Crisp boundary at the jet threshold\n    ax.contour(\n        lons, lats, wspd250,\n        levels=[JET_THRESHOLD],\n        colors=[\"rebeccapurple\"],\n        linewidths=1.0,\n        transform=ccrs.PlateCarree(),\n        zorder=5,\n    )\n\n    # --- Political geography ---\n    ax.add_feature(cfeature.COASTLINE, linewidth=0.7, color=\"black\", zorder=6)\n    ax.add_feature(cfeature.BORDERS, linewidth=0.4, linestyle=\"--\",\n                   color=\"0.35\", zorder=6)\n\n    ax.set_extent(EXTENT, crs=ccrs.PlateCarree())\n\n    # --- Gridlines ---\n    gl = ax.gridlines(\n        crs=ccrs.PlateCarree(),\n        draw_labels=True,\n        linewidth=0.3,\n        color=\"gray\",\n        alpha=0.5,\n        linestyle=\":\",\n    )\n    gl.top_labels = False\n    gl.right_labels = False\n    gl.xlabel_style = {\"size\": 8}\n    gl.ylabel_style = {\"size\": 8}\n\n    # --- Legend ---\n    legend_elements = [\n        mpatches.Patch(\n            facecolor=\"mediumpurple\", edgecolor=\"rebeccapurple\",\n            alpha=0.75, label=f\"Jet stream ≥ {JET_THRESHOLD} m/s  (250 hPa)\",\n        ),\n    ]\n    ax.legend(handles=legend_elements, loc=\"lower left\", fontsize=9,\n              framealpha=0.85)\n\n    ax.set_title(\n        f\"Z500 geopotential height (contours, m) + Jet stream (purple)\\n\"\n        f\"{date_str} 12:00 UTC  |  ERA5  |  Winter {period_name}\",\n        fontsize=11, pad=8,\n    )\n\n    buf = io.BytesIO()\n    fig.savefig(buf, format=\"png\", dpi=100, bbox_inches=\"tight\")\n    plt.close(fig)\n    buf.seek(0)\n    return Image.open(buf).copy()","key":"Thu8aFpnnd"},{"type":"outputs","id":"6FRQ1s1af-EvUAE5AXj-1","children":[],"key":"Ykx8kXdrwo"}],"key":"zIQ5Vxtgb0"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"children":[{"type":"text","value":"Generate animations — one GIF per winter period","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"ShVn2g5f18"}],"identifier":"generate-animations-one-gif-per-winter-period","label":"Generate animations — one GIF per winter period","html_id":"generate-animations-one-gif-per-winter-period","implicit":true,"key":"e3l8TIL9d2"}],"key":"UKldP3Kzoy"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"for period_name in PERIODS:\n    data_file = paths.era5_nao_jetstream_path / f\"era5_nao_jetstream_{period_name}.nc\"\n    gif_file = paths.images_path / f\"18_nao_jet_stream_{period_name}.gif\"\n\n    print(f\"[{period_name}] Loading {data_file.name} ...\")\n    ds = xr.open_dataset(data_file)\n    lats = ds.latitude.values\n    lons = ds.longitude.values\n    n = len(ds.time)\n    print(f\"  {n} timesteps, lat {lats[0]:.1f}–{lats[-1]:.1f}, \"\n          f\"lon {lons[0]:.1f}–{lons[-1]:.1f}\")\n\n    frames = []\n    for i, t in enumerate(ds.time.values):\n        date_str = str(t)[:10]\n\n        # Z500 geopotential height (m): convert J/kg → m\n        gph500 = ds[\"geopotential\"].sel(time=t).values / G\n\n        # 250 hPa wind speed\n        u250 = ds[\"u_component_of_wind\"].sel(time=t).values\n        v250 = ds[\"v_component_of_wind\"].sel(time=t).values\n        wspd250 = np.sqrt(u250 ** 2 + v250 ** 2)\n\n        frame = render_frame(lats, lons, gph500, wspd250, date_str, period_name)\n        frames.append(frame)\n        print(f\"  frame {i + 1:3d}/{n}  {date_str}\", end=\"\\r\")\n\n    frames[0].save(\n        gif_file,\n        save_all=True,\n        append_images=frames[1:],\n        duration=GIF_DURATION_MS,\n        loop=0,\n    )\n    print(f\"\\n[{period_name}] Saved: {gif_file.name}  ({n} frames)\")\n    ds.close()","key":"rZyq1Ok9Ox"},{"type":"outputs","id":"7L7I2pjdUaCIOGcFQQ5Z7","children":[],"key":"xIKP7KkeoW"}],"key":"DWpbq5SpNz"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":385,"column":1},"end":{"line":385,"column":1}},"children":[{"type":"text","value":"NAO+ winter: 2014–2015","position":{"start":{"line":385,"column":1},"end":{"line":385,"column":1}},"key":"e5N42PazKK"}],"identifier":"nao-winter-2014-2015","label":"NAO+ winter: 2014–2015","html_id":"nao-winter-2014-2015","implicit":true,"key":"DPIA0Eb36v"},{"type":"paragraph","position":{"start":{"line":387,"column":1},"end":{"line":393,"column":1}},"children":[{"type":"text","value":"The 2014–2015 winter was dominated by a strongly positive NAO.  Persistent\nwesterly flow channelled a procession of Atlantic depressions into western\nand central Europe, bringing above-average temperatures and above-average\nstorm activity.  The animation shows a tight, zonally oriented jet stream\ntracking north-eastward across the Atlantic into the British Isles and\nScandinavia, with Z500 contours packed closely together — indicating a\nstrong meridional pressure gradient.","position":{"start":{"line":387,"column":1},"end":{"line":387,"column":1}},"key":"m5xZ43Asn5"}],"key":"IW4Eh4fbKQ"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/18_nao_jet_stream_20-a954325f8f7ae0fac9fedc9b89e6d9d6.gif","alt":"Daily evolution of Z500 geopotential height (contour lines, m) and the\n250 hPa jet stream core (purple, ≥ 30 m/s) during the NAO+ winter of\nDecember 2014 – February 2015.  ERA5 reanalysis, 12:00 UTC each day.","data":{"altTextIsAutoGenerated":true},"key":"kluys9RxZ4","urlSource":"../../output/images/18_nao_jet_stream_2014-2015.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":397,"column":1},"end":{"line":399,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-18-nao-jet-2014-2015","identifier":"fig-18-nao-jet-2014-2015","html_id":"fig-18-nao-jet-2014-2015","enumerator":"3","children":[{"type":"text","value":"Figure ","key":"jzpSeyARz8"},{"type":"text","value":"3","key":"I1nE72FsrV"},{"type":"text","value":":","key":"ZMrAcpSrse"}],"template":"Figure %s:","key":"Z600rCS5Qz"},{"type":"text","value":"Daily evolution of Z500 geopotential height (contour lines, m) and the\n250 hPa jet stream core (purple, ≥ 30 m/s) during the NAO+ winter of\nDecember 2014 – February 2015.  ERA5 reanalysis, 12:00 UTC each day.","position":{"start":{"line":397,"column":1},"end":{"line":397,"column":1}},"key":"EMmhbgFIel"}],"key":"PuNEUI6V2R"}],"key":"GDqk5PHPZw"}],"label":"fig-18-nao-jet-2014-2015","identifier":"fig-18-nao-jet-2014-2015","enumerator":"3","html_id":"fig-18-nao-jet-2014-2015","key":"tL6KeX1gXz"}],"key":"O8QBodYKfP"},{"type":"block","position":{"start":{"line":402,"column":1},"end":{"line":402,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":404,"column":1},"end":{"line":404,"column":1}},"children":[{"type":"text","value":"NAO− winter: 2009–2010","position":{"start":{"line":404,"column":1},"end":{"line":404,"column":1}},"key":"Gd9uQLVepn"}],"identifier":"nao-winter-2009-2010","label":"NAO− winter: 2009–2010","html_id":"nao-winter-2009-2010","implicit":true,"key":"kfce7Zmecl"},{"type":"paragraph","position":{"start":{"line":406,"column":1},"end":{"line":413,"column":1}},"children":[{"type":"text","value":"The 2009–2010 winter was one of the strongest NAO− episodes in recent\ndecades.  A persistent blocking anticyclone over Greenland and Scandinavia\ndeflected the jet stream southward, cutting off the supply of mild maritime\nair to central Europe.  Much of the continent experienced a prolonged cold\nspell with temperatures several degrees below the seasonal norm.  The\nanimation shows a split or southward-displaced jet, with high Z500 ridges\nanchored over northern Europe — the hallmark of an atmospheric blocking\npattern.","position":{"start":{"line":406,"column":1},"end":{"line":406,"column":1}},"key":"Zbh59emYR2"}],"key":"rp2He1L60L"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/18_nao_jet_stream_20-b92cce27c37c89922779eb8369d7a78c.gif","alt":"Daily evolution of Z500 geopotential height (contour lines, m) and the\n250 hPa jet stream core (purple, ≥ 30 m/s) during the NAO− winter of\nDecember 2009 – February 2010.  ERA5 reanalysis, 12:00 UTC each day.","data":{"altTextIsAutoGenerated":true},"key":"F59Iz9rkrj","urlSource":"../../output/images/18_nao_jet_stream_2009-2010.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":417,"column":1},"end":{"line":419,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-18-nao-jet-2009-2010","identifier":"fig-18-nao-jet-2009-2010","html_id":"fig-18-nao-jet-2009-2010","enumerator":"4","children":[{"type":"text","value":"Figure ","key":"mgQ5iXAcDf"},{"type":"text","value":"4","key":"Cl8bRs070m"},{"type":"text","value":":","key":"YNO75KprKc"}],"template":"Figure %s:","key":"FQgSMdLdji"},{"type":"text","value":"Daily evolution of Z500 geopotential height (contour lines, m) and the\n250 hPa jet stream core (purple, ≥ 30 m/s) during the NAO− winter of\nDecember 2009 – February 2010.  ERA5 reanalysis, 12:00 UTC each day.","position":{"start":{"line":417,"column":1},"end":{"line":417,"column":1}},"key":"TOJ67XEfJ4"}],"key":"zdrwlE3kXc"}],"key":"De4InjxLgx"}],"label":"fig-18-nao-jet-2009-2010","identifier":"fig-18-nao-jet-2009-2010","enumerator":"4","html_id":"fig-18-nao-jet-2009-2010","key":"jkwZhXJfvu"}],"key":"VYGaUfZVvT"},{"type":"block","position":{"start":{"line":422,"column":1},"end":{"line":422,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":424,"column":1},"end":{"line":424,"column":1}},"children":[{"type":"text","value":"Combined view — jet stream and temperature side by side","position":{"start":{"line":424,"column":1},"end":{"line":424,"column":1}},"key":"DjPHFUb9Xw"}],"identifier":"combined-view-jet-stream-and-temperature-side-by-side","label":"Combined view — jet stream and temperature side by side","html_id":"combined-view-jet-stream-and-temperature-side-by-side","implicit":true,"key":"Mck9AM7wWW"},{"type":"paragraph","position":{"start":{"line":426,"column":1},"end":{"line":431,"column":1}},"children":[{"type":"text","value":"The combined animation places both perspectives in a single frame:\nthe ","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"cIKVsn9U9H"},{"type":"strong","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"children":[{"type":"text","value":"left panel","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"oMJevO0w7b"}],"key":"EbTdzjRE05"},{"type":"text","value":" shows Z500 contours with the jet stream (purple) and\nthe ","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"nsBPmXESAj"},{"type":"strong","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"children":[{"type":"text","value":"right panel","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"g2fK6jAAZb"}],"key":"jON0iXCfuL"},{"type":"text","value":" shows the same Z500 contours over 2m temperature.\nSeeing them together makes it easier to trace how the upper-level wave\npattern simultaneously positions the jet and controls cold/warm air advection\nat the surface.","position":{"start":{"line":426,"column":1},"end":{"line":426,"column":1}},"key":"ihKuqexAB2"}],"key":"TMPx1BPnxN"}],"key":"MPTNnNJRUI"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"def render_frame_combined(\n    lats: np.ndarray,\n    lons: np.ndarray,\n    gph500: np.ndarray,\n    wspd250: np.ndarray,\n    t2m_celsius: np.ndarray,\n    date_str: str,\n    period_name: str,\n) -> Image.Image:\n    \"\"\"Two-panel frame: left Z500+jet, right Z500+T2m. Returns a PIL Image.\"\"\"\n    fig = plt.figure(figsize=(22, 9))\n    ax_jet = fig.add_subplot(1, 2, 1, projection=PROJ)\n    ax_t2m = fig.add_subplot(1, 2, 2, projection=PROJ)\n\n    z500_levels = np.arange(4800, 6001, 60)\n\n    # ---- Left panel: Z500 + jet stream ----\n    ax_jet.add_feature(cfeature.OCEAN, facecolor=\"#d0e8f5\", zorder=0)\n    ax_jet.add_feature(cfeature.LAND, facecolor=\"#f0ede8\", zorder=0)\n\n    cs_jet = ax_jet.contour(\n        lons, lats, gph500,\n        levels=z500_levels, colors=\"black\", linewidths=0.6,\n        transform=ccrs.PlateCarree(), zorder=3,\n    )\n    ax_jet.clabel(cs_jet, fmt=\"%d m\", fontsize=5, inline=True, inline_spacing=2)\n\n    jet_masked = np.where(wspd250 >= JET_THRESHOLD, wspd250, np.nan)\n    ax_jet.contourf(\n        lons, lats, jet_masked,\n        levels=[JET_THRESHOLD, 300], colors=[\"mediumpurple\"], alpha=0.75,\n        transform=ccrs.PlateCarree(), zorder=4,\n    )\n    ax_jet.contour(\n        lons, lats, wspd250,\n        levels=[JET_THRESHOLD], colors=[\"rebeccapurple\"], linewidths=1.0,\n        transform=ccrs.PlateCarree(), zorder=5,\n    )\n\n    ax_jet.add_feature(cfeature.COASTLINE, linewidth=0.6, color=\"black\", zorder=6)\n    ax_jet.add_feature(cfeature.BORDERS, linewidth=0.35, linestyle=\"--\",\n                       color=\"0.35\", zorder=6)\n    ax_jet.set_extent(EXTENT, crs=ccrs.PlateCarree())\n\n    gl_jet = ax_jet.gridlines(crs=ccrs.PlateCarree(), draw_labels=True,\n                               linewidth=0.3, color=\"gray\", alpha=0.5, linestyle=\":\")\n    gl_jet.top_labels = False\n    gl_jet.right_labels = False\n    gl_jet.xlabel_style = {\"size\": 7}\n    gl_jet.ylabel_style = {\"size\": 7}\n\n    ax_jet.legend(\n        handles=[mpatches.Patch(facecolor=\"mediumpurple\", edgecolor=\"rebeccapurple\",\n                                alpha=0.75, label=f\"Jet ≥ {JET_THRESHOLD} m/s (250 hPa)\")],\n        loc=\"lower left\", fontsize=8, framealpha=0.85,\n    )\n    ax_jet.set_title(\"Z500 (contours) + Jet stream (purple)\", fontsize=10, pad=6)\n\n    # ---- Right panel: Z500 + 2m temperature ----\n    im = ax_t2m.pcolormesh(\n        lons, lats, t2m_celsius,\n        cmap=\"RdBu_r\", vmin=-30, vmax=20,\n        transform=ccrs.PlateCarree(), shading=\"auto\", zorder=1,\n    )\n\n    cs_t2m = ax_t2m.contour(\n        lons, lats, gph500,\n        levels=z500_levels, colors=\"black\", linewidths=0.6,\n        transform=ccrs.PlateCarree(), zorder=3,\n    )\n    ax_t2m.clabel(cs_t2m, fmt=\"%d m\", fontsize=5, inline=True, inline_spacing=2)\n\n    ax_t2m.add_feature(cfeature.COASTLINE, linewidth=0.6, color=\"0.15\", zorder=4)\n    ax_t2m.add_feature(cfeature.BORDERS, linewidth=0.35, linestyle=\"--\",\n                       color=\"0.35\", zorder=4)\n    ax_t2m.set_extent(EXTENT, crs=ccrs.PlateCarree())\n\n    gl_t2m = ax_t2m.gridlines(crs=ccrs.PlateCarree(), draw_labels=True,\n                               linewidth=0.3, color=\"gray\", alpha=0.5, linestyle=\":\")\n    gl_t2m.top_labels = False\n    gl_t2m.left_labels = False\n    gl_t2m.xlabel_style = {\"size\": 7}\n    gl_t2m.ylabel_style = {\"size\": 7}\n\n    cbar = fig.colorbar(im, ax=ax_t2m, orientation=\"vertical\",\n                        pad=0.04, fraction=0.025, aspect=35, shrink=0.9)\n    cbar.set_label(\"2m temperature (°C)\", fontsize=8)\n    cbar.ax.tick_params(labelsize=7)\n\n    ax_t2m.set_title(\"Z500 (contours) + 2m temperature\", fontsize=10, pad=6)\n\n    fig.suptitle(\n        f\"{date_str} 12:00 UTC  |  ERA5 reanalysis  |  Winter {period_name}\",\n        fontsize=12, y=1.01,\n    )\n    fig.tight_layout()\n\n    buf = io.BytesIO()\n    fig.savefig(buf, format=\"png\", dpi=100, bbox_inches=\"tight\")\n    plt.close(fig)\n    buf.seek(0)\n    return Image.open(buf).copy()","key":"GNHpeUy9sl"},{"type":"outputs","id":"JWwpeKW7jvC7wrWI27Hvu","children":[],"key":"kOdiYOmdch"}],"key":"xEdBY7qyra"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"children":[{"type":"text","value":"Generate combined animations","position":{"start":{"line":538,"column":1},"end":{"line":538,"column":1}},"key":"saojsOTbeS"}],"identifier":"generate-combined-animations","label":"Generate combined animations","html_id":"generate-combined-animations","implicit":true,"key":"Z7xZpMWBmL"}],"key":"caF5yDNJTw"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"for period_name in PERIODS:\n    data_file = paths.era5_nao_jetstream_path / f\"era5_nao_jetstream_{period_name}.nc\"\n    gif_file = paths.images_path / f\"18_combined_{period_name}.gif\"\n\n    print(f\"[{period_name}] Loading {data_file.name} ...\")\n    ds = xr.open_dataset(data_file)\n    lats = ds.latitude.values\n    lons = ds.longitude.values\n    n = len(ds.time)\n\n    frames = []\n    for i, t in enumerate(ds.time.values):\n        date_str = str(t)[:10]\n\n        gph500 = ds[\"geopotential\"].sel(time=t).values / G\n        u250 = ds[\"u_component_of_wind\"].sel(time=t).values\n        v250 = ds[\"v_component_of_wind\"].sel(time=t).values\n        wspd250 = np.sqrt(u250 ** 2 + v250 ** 2)\n        t2m_celsius = ds[\"2m_temperature\"].sel(time=t).values - 273.15\n\n        frame = render_frame_combined(lats, lons, gph500, wspd250, t2m_celsius,\n                                      date_str, period_name)\n        frames.append(frame)\n        print(f\"  frame {i + 1:3d}/{n}  {date_str}\", end=\"\\r\")\n\n    frames[0].save(\n        gif_file,\n        save_all=True,\n        append_images=frames[1:],\n        duration=GIF_DURATION_MS,\n        loop=0,\n    )\n    print(f\"\\n[{period_name}] Saved: {gif_file.name}  ({n} frames)\")\n    ds.close()","key":"DSXbLcSkzr"},{"type":"outputs","id":"UdBKMXUe58dIA0GO8buqW","children":[],"key":"wn0grRd9vb"}],"key":"N07D1iOlFg"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":577,"column":1},"end":{"line":577,"column":1}},"children":[{"type":"text","value":"NAO+ winter 2014–2015 — combined view","position":{"start":{"line":577,"column":1},"end":{"line":577,"column":1}},"key":"HiXihrN4JS"}],"identifier":"nao-winter-2014-2015-combined-view","label":"NAO+ winter 2014–2015 — combined view","html_id":"nao-winter-2014-2015-combined-view","implicit":true,"key":"mcFgkSV8ev"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/18_combined_2014-201-b11a3cd70c5bae82ab35a16917de7ae7.gif","alt":"Side-by-side daily animation for the NAO+ winter of December 2014 –\nFebruary 2015.  Left: Z500 geopotential height (contour lines, m) with the\n250 hPa jet stream core (purple, ≥ 30 m/s).  Right: same Z500 contours\nover 2m temperature (°C).  ERA5 reanalysis, 12:00 UTC each day.","data":{"altTextIsAutoGenerated":true},"key":"rHeAIpaofx","urlSource":"../../output/images/18_combined_2014-2015.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":581,"column":1},"end":{"line":584,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-18-combined-2014-2015","identifier":"fig-18-combined-2014-2015","html_id":"fig-18-combined-2014-2015","enumerator":"5","children":[{"type":"text","value":"Figure ","key":"BkMSiDO7o9"},{"type":"text","value":"5","key":"EMDWCkH7HA"},{"type":"text","value":":","key":"kTA3B3HVAP"}],"template":"Figure %s:","key":"GhddEHrbht"},{"type":"text","value":"Side-by-side daily animation for the NAO+ winter of December 2014 –\nFebruary 2015.  Left: Z500 geopotential height (contour lines, m) with the\n250 hPa jet stream core (purple, ≥ 30 m/s).  Right: same Z500 contours\nover 2m temperature (°C).  ERA5 reanalysis, 12:00 UTC each day.","position":{"start":{"line":581,"column":1},"end":{"line":581,"column":1}},"key":"Y7LU9NNMYm"}],"key":"plpHyHFYbO"}],"key":"ewgJbKXnyK"}],"label":"fig-18-combined-2014-2015","identifier":"fig-18-combined-2014-2015","enumerator":"5","html_id":"fig-18-combined-2014-2015","key":"ev3WXWpjlg"}],"key":"r7O6mhS3vU"},{"type":"block","position":{"start":{"line":587,"column":1},"end":{"line":587,"column":1}},"children":[{"type":"heading","depth":3,"position":{"start":{"line":589,"column":1},"end":{"line":589,"column":1}},"children":[{"type":"text","value":"NAO− winter 2009–2010 — combined view","position":{"start":{"line":589,"column":1},"end":{"line":589,"column":1}},"key":"kyVR4IozQh"}],"identifier":"nao-winter-2009-2010-combined-view","label":"NAO− winter 2009–2010 — combined view","html_id":"nao-winter-2009-2010-combined-view","implicit":true,"key":"qxhcBTjgQi"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/18_combined_2009-201-3e69a1600673633c5f5cc55ae8d5e194.gif","alt":"Side-by-side daily animation for the NAO− winter of December 2009 –\nFebruary 2010.  Left: Z500 geopotential height (contour lines, m) with the\n250 hPa jet stream core (purple, ≥ 30 m/s).  Right: same Z500 contours\nover 2m temperature (°C).  ERA5 reanalysis, 12:00 UTC each day.","data":{"altTextIsAutoGenerated":true},"key":"l1LRj0bxp0","urlSource":"../../output/images/18_combined_2009-2010.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":593,"column":1},"end":{"line":596,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-18-combined-2009-2010","identifier":"fig-18-combined-2009-2010","html_id":"fig-18-combined-2009-2010","enumerator":"6","children":[{"type":"text","value":"Figure ","key":"EUG9abF0wA"},{"type":"text","value":"6","key":"KjrMfAJI2X"},{"type":"text","value":":","key":"Pxt0gFg5r4"}],"template":"Figure %s:","key":"XUPMCeL69x"},{"type":"text","value":"Side-by-side daily animation for the NAO− winter of December 2009 –\nFebruary 2010.  Left: Z500 geopotential height (contour lines, m) with the\n250 hPa jet stream core (purple, ≥ 30 m/s).  Right: same Z500 contours\nover 2m temperature (°C).  ERA5 reanalysis, 12:00 UTC each day.","position":{"start":{"line":593,"column":1},"end":{"line":593,"column":1}},"key":"LZrjXGV5xq"}],"key":"kL0osljjSr"}],"key":"dGAySvcxFD"}],"label":"fig-18-combined-2009-2010","identifier":"fig-18-combined-2009-2010","enumerator":"6","html_id":"fig-18-combined-2009-2010","key":"D3Cwfl1kLd"}],"key":"E54K7l15ac"}],"key":"MG5Vu5UugG"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Monthly ERA5 Reanalysis","url":"/notebooks/nao-index","group":"World of Energy"},"next":{"title":"Resources","url":"/markdown/resources","group":"World of Energy"}}},"domain":"http://localhost:3000"}