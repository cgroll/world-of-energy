<!DOCTYPE html><html lang="en" class="" style="scroll-padding:60px"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Earth’s Seasons — From Sunlight to Vegetation - World of Energy</title><meta property="og:title" content="Earth’s Seasons — From Sunlight to Vegetation - World of Energy"/><meta name="generator" content="mystmd"/><meta name="keywords" content=""/><meta name="image" content="/world-of-energy/build/10_sunlight_animatio-9f5169e2f60428cecb2f2dec79a84414.gif"/><meta property="og:image" content="/world-of-energy/build/10_sunlight_animatio-9f5169e2f60428cecb2f2dec79a84414.gif"/><link rel="stylesheet" href="/world-of-energy/build/_assets/app-2K3KGISG.css"/><link rel="stylesheet" href="/world-of-energy/build/_assets/thebe-core-VKVHG5VY.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jupyter-matplotlib@0.11.3/css/mpl_widget.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css" integrity="sha384-MlJdn/WNKDGXveldHDdyRP1R4CTHr3FeuDNfhsLPYrq2t0UBkUdK2jyTnXPEK1NQ" crossorigin="anonymous"/><link rel="icon" href="/world-of-energy/favicon.ico"/><link rel="stylesheet" href="/world-of-energy/myst-theme.css"/><script>
  const savedTheme = localStorage.getItem("myst:theme");
  const theme = window.matchMedia("(prefers-color-scheme: light)").matches ? 'light' : 'dark';
  const classes = document.documentElement.classList;
  const hasAnyTheme = classes.contains('light') || classes.contains('dark');
  if (!hasAnyTheme) classes.add(savedTheme ?? theme);
</script></head><body class="m-0 transition-colors duration-500 bg-white dark:bg-stone-900"><div class="myst-skip-to-article fixed top-1 left-1 h-[0px] w-[0px] focus-within:z-40 focus-within:h-auto focus-within:w-auto bg-white overflow-hidden focus-within:p-2 focus-within:ring-1" aria-label="skip to content options"><a href="#skip-to-frontmatter" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article frontmatter</a><a href="#skip-to-article" class="myst-skip-to-link block px-2 py-1 text-black underline">Skip to article content</a></div><dialog id="myst-no-css" style="position:fixed;left:0px;top:0px;width:100%;height:100vh;font-size:4rem;padding:1rem;color:black;background:white"><strong>Site not loading correctly?</strong><p>This may be due to an incorrect <code>BASE_URL</code> configuration. See<!-- --> <a href="https://mystmd.org/guide/deployment#deploy-base-url">the MyST Documentation</a> <!-- -->for reference.</p><script>
    (() => {
            // Test for has-styling variable set by the MyST stylesheet
            const node = document.currentScript.parentNode;
            const hasCSS = window.getComputedStyle(node).getPropertyValue("--has-styling");
            if (hasCSS === ""){
                    node.showModal();
            }

    })()
</script></dialog><div class="myst-top-nav bg-white/80 backdrop-blur dark:bg-stone-900/80 shadow dark:shadow-stone-700 p-3 md:px-8 sticky w-full top-0 z-30 h-[60px]"><nav class="myst-top-nav-bar flex items-center justify-between flex-nowrap max-w-[1440px] mx-auto"><div class="flex flex-row xl:min-w-[19.5rem] mr-2 sm:mr-7 justify-start items-center shrink-0"><div class="block xl:hidden"><button class="myst-top-nav-menu-button flex items-center justify-center border-stone-400 text-stone-800 hover:text-stone-900 dark:text-stone-200 hover:dark:text-stone-100 w-10 h-10"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem"><path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd"></path></svg><span class="sr-only">Open Menu</span></button></div><a class="myst-home-link flex items-center ml-3 dark:text-white w-fit md:ml-5 xl:ml-7" href="/world-of-energy/"><div class="myst-home-link-logo mr-3 flex items-center dark:bg-white dark:rounded px-1"><img src="/world-of-energy/build/logo-6a28fa76e54acbda2ff6b5ff676e9f78.png" class="h-9" height="2.25rem"/></div><span class="text-md sm:text-xl tracking-tight sm:mr-5 sr-only">Made with MyST</span></a></div><div class="flex items-center flex-grow w-auto"><div class="flex-grow hidden text-md lg:block"></div><div class="flex-grow block"></div><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R75cp:" data-state="closed" class="myst-search-bar flex items-center h-10 aspect-square sm:w-64 text-left text-gray-600 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 myst-search-bar-disabled hover:ring-blue-500 dark:hover:ring-blue-500 hover:border-blue-500 dark:hover:border-blue-500"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="p-2.5 h-10 w-10 aspect-square"><path fill-rule="evenodd" d="M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z" clip-rule="evenodd"></path></svg><span class="myst-search-text-placeholder hidden sm:block grow">Search</span><div aria-hidden="true" class="myst-search-shortcut items-center hidden mx-1 font-mono text-sm text-gray-600 dark:text-gray-300 sm:flex gap-x-1"><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none hide-mac">CTRL</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none show-mac">⌘</kbd><kbd class="px-2 py-1 border border-gray-300 dark:border-gray-600 rounded-md shadow-[0px_2px_0px_0px_rgba(0,0,0,0.08)] dark:shadow-none ">K</kbd><script>
;(() => {
const script = document.currentScript;
const root = script.parentElement;

const isMac = /mac/i.test(
      window.navigator.userAgentData?.platform ?? window.navigator.userAgent,
    );
root.querySelectorAll(".hide-mac").forEach(node => {node.classList.add(isMac ? "hidden" : "block")});
root.querySelectorAll(".show-mac").forEach(node => {node.classList.add(!isMac ? "hidden" : "block")});
})()</script></div></button><button class="myst-theme-button theme rounded-full aspect-square border border-stone-700 dark:border-white hover:bg-neutral-100 border-solid overflow-hidden text-stone-700 dark:text-white hover:text-stone-500 dark:hover:text-neutral-800 w-10 h-10 mx-3" title="Toggle theme between light and dark mode" aria-label="Toggle theme between light and dark mode"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-moon-icon h-full w-full p-0.5 hidden dark:block"><path fill-rule="evenodd" d="M9.528 1.718a.75.75 0 0 1 .162.819A8.97 8.97 0 0 0 9 6a9 9 0 0 0 9 9 8.97 8.97 0 0 0 3.463-.69.75.75 0 0 1 .981.98 10.503 10.503 0 0 1-9.694 6.46c-5.799 0-10.5-4.7-10.5-10.5 0-4.368 2.667-8.112 6.46-9.694a.75.75 0 0 1 .818.162Z" clip-rule="evenodd"></path></svg><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" class="myst-theme-sun-icon h-full w-full p-0.5 dark:hidden"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"></path></svg></button><div class="block sm:hidden"></div><div class="hidden sm:block"></div></div></nav></div><div class="myst-primary-sidebar fixed xl:article-grid grid-gap xl:w-full xl:pointer-events-none overflow-auto max-xl:w-[75vw] max-xl:max-w-[350px] max-xl:!top-0 max-xl:h-screen hidden z-10" style="top:60px"><div class="myst-primary-sidebar-pointer pointer-events-auto xl:col-margin-left flex-col overflow-hidden max-xl:h-full hidden xl:flex"><div class="myst-primary-sidebar-nav flex-grow py-6 overflow-y-auto primary-scrollbar"><nav aria-label="Navigation" class="myst-primary-sidebar-topnav overflow-y-hidden transition-opacity lg:hidden ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="w-full px-1 dark:text-white font-medium"></div></nav><div class="my-3 border-b-2 lg:hidden"></div><nav aria-label="Table of Contents" class="myst-primary-sidebar-toc flex-grow overflow-y-hidden transition-opacity ml-3 xl:ml-0 mr-3 max-w-[350px]"><div class="myst-toc w-full px-1 dark:text-white"><a title="World of Energy" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30 font-bold" href="/world-of-energy/">World of Energy</a><a title="Electricity prices in Germany" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/world-of-energy/notebooks/smard-de-prices">Electricity prices in Germany</a><a title="Fossil Fuel Costs and Electricity Price Reconstruction" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/world-of-energy/notebooks/reconstruct-prices">Fossil Fuel Costs and Electricity Price Reconstruction</a><a title="Seasonality Heatmaps" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/world-of-energy/notebooks/load-seasonalities">Seasonality Heatmaps</a><a title="Earth’s Seasons — From Sunlight to Vegetation" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/world-of-energy/notebooks/earth-seasons">Earth’s Seasons — From Sunlight to Vegetation</a><a title="Map Projections — ERA5 2 m Temperature" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/world-of-energy/notebooks/projections">Map Projections — ERA5 2 m Temperature</a><a title="Resources" class="block break-words focus:outline outline-blue-200 outline-2 rounded myst-toc-item p-2 my-1 rounded-lg hover:bg-slate-300/30" href="/world-of-energy/markdown/resources">Resources</a></div></nav></div><div class="myst-primary-sidebar-footer flex-none py-6 transition-all duration-700 translate-y-6 opacity-0 ml-3 xl:ml-0 mr-3 max-w-[350px]"><a class="myst-made-with-myst flex mx-auto text-gray-700 w-fit hover:text-blue-700 dark:text-gray-200 dark:hover:text-blue-400" href="https://mystmd.org/made-with-myst" target="_blank" rel="noreferrer"><svg style="width:24px;height:24px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" stroke="none"><g id="icon"><path fill="currentColor" d="M23.8,54.8v-3.6l4.7-0.8V17.5l-4.7-0.8V13H36l13.4,31.7h0.2l13-31.7h12.6v3.6l-4.7,0.8v32.9l4.7,0.8v3.6h-15
          v-3.6l4.9-0.8V20.8H65L51.4,53.3h-3.8l-14-32.5h-0.1l0.2,17.4v12.1l5,0.8v3.6H23.8z"></path><path fill="#F37726" d="M47,86.9c0-5.9-3.4-8.8-10.1-8.8h-8.4c-5.2,0-9.4-1.3-12.5-3.8c-3.1-2.5-5.4-6.2-6.8-11l4.8-1.6
          c1.8,5.6,6.4,8.6,13.8,8.8h9.2c6.4,0,10.8,2.5,13.1,7.5c2.3-5,6.7-7.5,13.1-7.5h8.4c7.8,0,12.7-2.9,14.6-8.7l4.8,1.6
          c-1.4,4.9-3.6,8.6-6.8,11.1c-3.1,2.5-7.3,3.7-12.4,3.8H63c-6.7,0-10,2.9-10,8.8"></path></g></svg><span class="self-center ml-2 text-sm">Made with MyST</span></a></div></div></div><main class="article-grid grid-gap"><article class="article-grid subgrid-gap col-screen article content"><div class="hidden"></div><div id="skip-to-frontmatter" aria-label="article frontmatter" class="myst-fm-block mb-8 pt-9"><div class="myst-fm-block-header flex items-center mb-5 h-6 text-sm font-light"><div class="flex-grow"></div><div class="myst-fm-block-badges"><a href="https://github.com/cgroll/world-of-energy" title="GitHub Repository: cgroll/world-of-energy" target="_blank" rel="noopener noreferrer" class="myst-fm-github-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" width="1.25rem" height="1.25rem" class="myst-fm-github-icon inline-block mr-1 opacity-60 hover:opacity-100"><path d="M12 2.5c-5.4 0-9.8 4.4-9.8 9.7 0 4.3 2.8 8 6.7 9.2.5.1.7-.2.7-.5v-1.8c-2.4.5-3.1-.6-3.3-1.1-.1-.3-.6-1.1-1-1.4-.3-.2-.8-.6 0-.6s1.3.7 1.5 1c.9 1.5 2.3 1.1 2.8.8.1-.6.3-1.1.6-1.3-2.2-.2-4.4-1.1-4.4-4.8 0-1.1.4-1.9 1-2.6-.1-.2-.4-1.2.1-2.6 0 0 .8-.3 2.7 1 .8-.2 1.6-.3 2.4-.3.8 0 1.7.1 2.4.3 1.9-1.3 2.7-1 2.7-1 .5 1.3.2 2.3.1 2.6.6.7 1 1.5 1 2.6 0 3.7-2.3 4.6-4.4 4.8.4.3.7.9.7 1.8V21c0 .3.2.6.7.5 3.9-1.3 6.6-4.9 6.6-9.2 0-5.4-4.4-9.8-9.8-9.8z"></path></svg></a></div><a href="https://github.com/cgroll/world-of-energy/edit/main/book/notebooks/10_earth_seasons.md" title="Edit This Page" target="_blank" rel="noopener noreferrer" class="myst-fm-edit-link text-inherit hover:text-inherit"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-edit-icon inline-block mr-1 opacity-60 hover:opacity-100"><path stroke-linecap="round" stroke-linejoin="round" d="m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"></path></svg></a><div class="myst-fm-downloads-dropdown relative flex inline-block mx-1 grow-0" data-headlessui-state=""><button class="myst-fm-downloads-button relative ml-2 -mr-1" id="headlessui-menu-button-:Rs8ucp:" type="button" aria-haspopup="menu" aria-expanded="false" data-headlessui-state=""><span class="sr-only">Downloads</span><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.25rem" height="1.25rem" class="myst-fm-downloads-icon"><title>Download</title><path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"></path></svg></button></div></div><h1 class="myst-fm-block-title mb-0">Earth’s Seasons — From Sunlight to Vegetation</h1><header class="myst-fm-authors-affiliations mt-4 not-prose"><div class="myst-fm-authors-list"><span class="myst-fm-author font-semibold text-sm myst-fm-author-item inline-block"><button class="myst-fm-author-popover focus:shadow-[0_0_0_2px] focus:shadow-black outline-none hover:underline" aria-label="Author Details" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R78ucp:" data-state="closed"><span class="myst-fm-author-name">Christian Groll</span></button></span></div></header></div><div class="block my-10 lg:sticky lg:z-10 lg:h-0 lg:pt-0 lg:my-0 lg:ml-10 lg:col-margin-right" style="top:60px"><nav></nav></div><div id="skip-to-article"></div><p>Why do we have seasons? The answer lies in a single geometric fact: the
Earth’s rotation axis is tilted by about <strong>23.4°</strong> relative to the plane of
its orbit around the Sun. As the Earth travels along its annual orbit, this
tilt causes different hemispheres to lean toward or away from the Sun,
changing both the <strong>angle</strong> at which sunlight strikes the surface and the
<strong>number of hours</strong> of daylight each location receives.</p><p>This chapter traces the chain of consequences:</p><ol start="1"><li><p><strong>Sunlight geometry</strong> — how the Sun illuminates different parts of the
Earth during the day, and how this pattern shifts between summer and winter.</p></li><li><p><strong>The subsolar point</strong> — the latitude where the Sun is directly overhead,
and how it migrates between the Tropics over the year.</p></li><li><p><strong>Solar elevation</strong> — the angle of the Sun above the horizon for any
location and time, which determines how concentrated the incoming energy is.</p></li><li><p><strong>Temperature</strong> — how the uneven distribution of sunlight drives the
global temperature pattern, both over the course of a day and across seasons.</p></li><li><p><strong>Vegetation</strong> — how the resulting temperature and moisture patterns
control where and when vegetation grows, visible from space as a seasonal
“green wave”.</p></li></ol><div id="KQWsVrOehk" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import calendar
import math
import os
from datetime import datetime, date, timedelta

import numpy as np
import matplotlib.pyplot as plt
import cartopy.crs as ccrs
import cartopy.feature as cfeature
from cartopy.feature.nightshade import Nightshade
from matplotlib.animation import FuncAnimation, PillowWriter
from PIL import Image, ImageDraw

from woe.paths import ProjPaths

paths = ProjPaths()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="fa9N15Xg0rDiAQaHl_llG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><h2 id="sunlight-on-earth-the-day-cycle" class="relative group"><span class="heading-text">Sunlight on Earth — the day cycle</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#sunlight-on-earth-the-day-cycle" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>At any given moment, exactly half of the Earth is illuminated by the Sun.
But the angle at which sunlight arrives varies enormously by latitude and
time of day. Near the equator, sunlight can arrive nearly <strong>vertically</strong>,
concentrating its energy on a small area. Near the poles, it arrives at a
<strong>shallow angle</strong>, spreading the same energy over a much larger area — which
is why polar regions are cold even when they receive 24 hours of daylight in
summer.</p><p>The two animations below show the illumination pattern over 24 hours on
the <strong>summer solstice</strong> (June 21) and the <strong>winter solstice</strong> (December 21).
The contrast is striking: in June, the North Pole enjoys continuous daylight
while the South Pole is in complete darkness. In December, the situation is
reversed.</p><div id="wzrpPFCCyb" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">dates = [datetime(2025, 6, 21), datetime(2025, 12, 21)]
n_frames = 64
frame_hours = np.linspace(0, 24, n_frames, endpoint=False)


def create_sunlight_animation(anim_date, output_path):
    fig, ax = plt.subplots(figsize=(16, 9), subplot_kw={&quot;projection&quot;: ccrs.Robinson()})
    fig.patch.set_facecolor(&quot;black&quot;)

    def draw_frame(fractional_hour):
        ax.clear()
        h = int(fractional_hour)
        m = int((fractional_hour - h) * 60)
        obs_time = datetime(anim_date.year, anim_date.month, anim_date.day, h, m, 0)

        # Solar geometry
        day_of_year = obs_time.timetuple().tm_yday
        declination = 23.44 * np.sin(np.radians(360 / 365 * (day_of_year - 81)))
        hours_utc = obs_time.hour + obs_time.minute / 60
        subsolar_lon = 180 - (hours_utc / 24) * 360

        ax.stock_img()
        ax.add_feature(Nightshade(obs_time, alpha=0.4))

        # Subsolar point marker
        ax.plot(
            subsolar_lon, declination,
            marker=&quot;*&quot;, markersize=18, color=&quot;yellow&quot;, markeredgecolor=&quot;orange&quot;,
            markeredgewidth=0.8, transform=ccrs.PlateCarree(), zorder=10,
        )

        # Declination latitude line
        ax.plot(
            [-180, 180], [declination, declination],
            color=&quot;yellow&quot;, linewidth=1.2, linestyle=&quot;--&quot;, alpha=0.7,
            transform=ccrs.PlateCarree(), zorder=9,
        )
        # Equator
        ax.plot(
            [-180, 180], [0, 0],
            color=&quot;white&quot;, linewidth=0.6, linestyle=&quot;:&quot;, alpha=0.5,
            transform=ccrs.PlateCarree(), zorder=9,
        )

        ax.add_feature(cfeature.COASTLINE, linewidth=0.4, color=&quot;0.3&quot;)
        ax.set_global()
        ax.set_facecolor(&quot;black&quot;)
        ax.set_title(
            f&quot;Sunlight on Earth — {obs_time:%Y-%m-%d %H:%M} UTC — &quot;
            f&quot;Subsolar point {declination:.1f}°N, {subsolar_lon:.1f}°E&quot;,
            fontsize=13, color=&quot;white&quot;, pad=12,
        )

    anim = FuncAnimation(fig, draw_frame, frames=list(frame_hours), interval=1000 / 15)
    anim.save(str(output_path), writer=PillowWriter(fps=15), dpi=120, savefig_kwargs={&quot;facecolor&quot;: &quot;black&quot;})
    plt.close(fig)
    print(f&quot;Saved animation to {output_path}&quot;)


for d in dates:
    suffix = f&quot;{d:%Y_%m_%d}&quot;
    create_sunlight_animation(d, paths.images_path / f&quot;10_sunlight_animation_{suffix}.gif&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="u-N5kVMTIyVwAmGis694A" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><figure id="fig-10-sunlight-summer" class="fig-figure"><img id="tAu1b8KUtz" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_sunlight_animatio-9f5169e2f60428cecb2f2dec79a84414.gif" alt="Sunlight on Earth over 24 hours on 2025-06-21 (summer solstice). The yellow
star marks the subsolar point; the dashed line shows the solar declination
latitude (~23.4°N). Notice that the Arctic never enters darkness." data-canonical-url="../../output/images/10_sunlight_animation_2025_06_21.gif" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-sunlight-summer" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->1<!-- -->:</a>Sunlight on Earth over 24 hours on 2025-06-21 (summer solstice). The yellow
star marks the subsolar point; the dashed line shows the solar declination
latitude (~23.4°N). Notice that the Arctic never enters darkness.</p></figcaption></figure><figure id="fig-10-sunlight-winter" class="fig-figure"><img id="v4zai5mVU0" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_sunlight_animatio-672529955da4fe9c79f7bded13c6da1e.gif" alt="Winter solstice (2025-12-21). The subsolar point has moved to ~23.4°S.
Now it is the Antarctic that enjoys continuous daylight, while the Arctic
remains in polar night." data-canonical-url="../../output/images/10_sunlight_animation_2025_12_21.gif" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-sunlight-winter" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->2<!-- -->:</a>Winter solstice (2025-12-21). The subsolar point has moved to ~23.4°S.
Now it is the Antarctic that enjoys continuous daylight, while the Arctic
remains in polar night.</p></figcaption></figure><h2 id="the-subsolar-point-and-its-annual-migration" class="relative group"><span class="heading-text">The subsolar point and its annual migration</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#the-subsolar-point-and-its-annual-migration" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The <strong>subsolar point</strong> is the location on Earth where the Sun is directly
overhead — i.e. the solar elevation is exactly 90°. Its latitude equals the
<strong>solar declination</strong>, which can be approximated as:</p><div id="oT36HgCaxa" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>δ</mi><mo>=</mo><mn>23.44</mn><mi mathvariant="normal">°</mi><mo>×</mo><mi>sin</mi><mo>⁡</mo><mtext> ⁣</mtext><mrow><mo fence="true">(</mo><mfrac><mrow><mn>360</mn><mi mathvariant="normal">°</mi></mrow><mn>365</mn></mfrac><mo>×</mo><mo stretchy="false">(</mo><mi>d</mi><mo>−</mo><mn>81</mn><mo stretchy="false">)</mo><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\delta = 23.44° \times \sin\!\left(\frac{360°}{365} \times (d - 81)\right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7778em;vertical-align:-0.0833em;"></span><span class="mord">23.44°</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:2.4em;vertical-align:-0.95em;"></span><span class="mop">sin</span><span class="mspace" style="margin-right:-0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size3">(</span></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">365</span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">360°</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.686em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mopen">(</span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord">81</span><span class="mclose">)</span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size3">)</span></span></span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#oT36HgCaxa" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->1<!-- -->)</a></div></div><p>where <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi></mrow><annotation encoding="application/x-tex">d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span></span></span></span></span> is the day of the year (so <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><mn>81</mn></mrow><annotation encoding="application/x-tex">d = 81</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">81</span></span></span></span></span> corresponds to the spring
equinox around March 22, when <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\delta = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span>).</p><p>Over the course of a year, the subsolar latitude oscillates between the
<strong>Tropic of Cancer</strong> (~23.4°N, around June 21) and the <strong>Tropic of
Capricorn</strong> (~23.4°S, around December 21). The animation below shows one
frame per week, tracing this migration at solar noon (12:00 UTC).</p><div id="isy1b0YSQf" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">weeks = np.arange(0, 52)
week_dates = [datetime(2025, 1, 1) + timedelta(weeks=int(w)) for w in weeks]

fig, ax = plt.subplots(figsize=(16, 9), subplot_kw={&quot;projection&quot;: ccrs.Robinson()})
fig.patch.set_facecolor(&quot;black&quot;)


def draw_subsolar_frame(i):
    ax.clear()
    d = week_dates[i]
    obs_time = datetime(d.year, d.month, d.day, 12, 0, 0)

    day_of_year = obs_time.timetuple().tm_yday
    declination = 23.44 * np.sin(np.radians(360 / 365 * (day_of_year - 81)))
    subsolar_lon = 0.0  # at 12:00 UTC

    ax.stock_img()
    ax.add_feature(Nightshade(obs_time, alpha=0.3))

    # Declination latitude line
    ax.plot(
        [-180, 180], [declination, declination],
        color=&quot;yellow&quot;, linewidth=2, linestyle=&quot;--&quot;, alpha=0.9,
        transform=ccrs.PlateCarree(), zorder=9,
    )
    # Subsolar point
    ax.plot(
        subsolar_lon, declination,
        marker=&quot;*&quot;, markersize=20, color=&quot;yellow&quot;, markeredgecolor=&quot;orange&quot;,
        markeredgewidth=0.8, transform=ccrs.PlateCarree(), zorder=10,
    )

    # Tropic lines
    for tropic_lat in [23.44, -23.44]:
        ax.plot(
            [-180, 180], [tropic_lat, tropic_lat],
            color=&quot;white&quot;, linewidth=0.5, linestyle=&quot;:&quot;, alpha=0.4,
            transform=ccrs.PlateCarree(), zorder=8,
        )
    # Equator
    ax.plot(
        [-180, 180], [0, 0],
        color=&quot;white&quot;, linewidth=0.6, linestyle=&quot;:&quot;, alpha=0.5,
        transform=ccrs.PlateCarree(), zorder=8,
    )

    ax.add_feature(cfeature.COASTLINE, linewidth=0.4, color=&quot;0.3&quot;)
    ax.set_global()
    ax.set_facecolor(&quot;black&quot;)
    ax.set_title(
        f&quot;Subsolar Latitude — {obs_time:%Y-%m-%d} (week {i + 1}/52) — &quot;
        f&quot;Declination {declination:.1f}°{&#x27;N&#x27; if declination &gt;= 0 else &#x27;S&#x27;}&quot;,
        fontsize=13, color=&quot;white&quot;, pad=12,
    )


anim = FuncAnimation(fig, draw_subsolar_frame, frames=len(week_dates), interval=1000 / 15)
output_file = paths.images_path / &quot;10_subsolar_migration.gif&quot;
anim.save(str(output_file), writer=PillowWriter(fps=15), dpi=120, savefig_kwargs={&quot;facecolor&quot;: &quot;black&quot;})
plt.close(fig)
print(f&quot;Saved animation to {output_file}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="2vPRgBVMQoJT1L2p4EnHa" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><figure id="fig-10-subsolar-migration" class="fig-figure"><img id="JpEv73DaeQ" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_subsolar_migratio-7f02c587f85e4503bdc79448488729cf.gif" alt="Migration of the subsolar latitude over the year (one frame per week). The
yellow dashed line shows where the Sun is directly overhead at noon UTC. It
oscillates between the Tropic of Cancer (~23.4°N in June) and the Tropic of
Capricorn (~23.4°S in December)." data-canonical-url="../../output/images/10_subsolar_migration.gif" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-subsolar-migration" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->3<!-- -->:</a>Migration of the subsolar latitude over the year (one frame per week). The
yellow dashed line shows where the Sun is directly overhead at noon UTC. It
oscillates between the Tropic of Cancer (~23.4°N in June) and the Tropic of
Capricorn (~23.4°S in December).</p></figcaption></figure><h2 id="solar-elevation-the-suns-angle-above-the-horizon" class="relative group"><span class="heading-text">Solar elevation — the Sun’s angle above the horizon</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#solar-elevation-the-suns-angle-above-the-horizon" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The <strong>solar elevation</strong> (or altitude angle) is the angle of the Sun above
the horizon, measured from 0° (sunrise/sunset) to 90° (directly overhead).
It determines how much energy a square metre of surface receives: a high
Sun concentrates light into a small area, while a low Sun spreads it thin.</p><p>For any location (latitude <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>φ</mi></mrow><annotation encoding="application/x-tex">\varphi</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.1944em;"></span><span class="mord mathnormal">φ</span></span></span></span></span>) and time, the elevation <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span></span> is:</p><div id="GDkHOowZrc" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>sin</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>α</mi><mo stretchy="false">)</mo><mo>=</mo><mi>sin</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>φ</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>sin</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>δ</mi><mo stretchy="false">)</mo><mo>+</mo><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>φ</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>δ</mi><mo stretchy="false">)</mo><mtext> </mtext><mi>cos</mi><mo>⁡</mo><mo stretchy="false">(</mo><mi>h</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\sin(\alpha) = \sin(\varphi)\,\sin(\delta) + \cos(\varphi)\,\cos(\delta)\,\cos(h)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathnormal">φ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">sin</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathnormal">φ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop">cos</span><span class="mopen">(</span><span class="mord mathnormal">h</span><span class="mclose">)</span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#GDkHOowZrc" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->2<!-- -->)</a></div></div><p>where <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi></mrow><annotation encoding="application/x-tex">\delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal" style="margin-right:0.03785em;">δ</span></span></span></span></span> is the solar declination (computed above) and <span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi></mrow><annotation encoding="application/x-tex">h</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span></span></span></span></span> is the
<strong>hour angle</strong> — the Sun’s angular displacement from local solar noon
(<span><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">h = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></span> at noon, 15° per hour).</p><p>The heatmaps below show solar elevation for every day of the year and every
minute of the day, for two cities at very different latitudes: <strong>Munich</strong>
(48.1°N) and <strong>Sydney</strong> (33.9°S). Grey areas indicate nighttime (elevation
below 0°).</p><div id="EObAqv1HZj" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">locations = [
    {&quot;name&quot;: &quot;Munich&quot;, &quot;lat&quot;: 48.14, &quot;lon&quot;: 11.58, &quot;utc_offset&quot;: 1, &quot;tz_label&quot;: &quot;CET&quot;},
    {&quot;name&quot;: &quot;Sydney&quot;, &quot;lat&quot;: -33.87, &quot;lon&quot;: 151.21, &quot;utc_offset&quot;: 11, &quot;tz_label&quot;: &quot;AEDT&quot;},
]

days = np.arange(1, 366)
hours_of_day = np.arange(0, 24, 1 / 60)  # one-minute resolution
day_grid, hour_grid = np.meshgrid(days, hours_of_day)

# Solar declination (same for all locations)
declination_rad = np.radians(
    23.44 * np.sin(np.radians(360 / 365 * (day_grid - 81)))
)

month_starts = [1, 32, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335]
month_labels = [&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;, &quot;May&quot;, &quot;Jun&quot;,
                &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;, &quot;Nov&quot;, &quot;Dec&quot;]

for loc in locations:
    lat_rad = np.radians(loc[&quot;lat&quot;])

    local_hours = hours_of_day
    utc_hours = local_hours - loc[&quot;utc_offset&quot;]
    day_grid_loc, utc_hour_grid = np.meshgrid(days, utc_hours)
    _, local_hour_grid = np.meshgrid(days, local_hours)

    # Hour angle: sun&#x27;s angular displacement from solar noon
    solar_hour = utc_hour_grid + loc[&quot;lon&quot;] / 15
    hour_angle_rad = np.radians(15 * (solar_hour - 12))

    # Solar elevation
    sin_elev = (
        np.sin(lat_rad) * np.sin(declination_rad)
        + np.cos(lat_rad) * np.cos(declination_rad) * np.cos(hour_angle_rad)
    )
    elevation_deg = np.degrees(np.arcsin(np.clip(sin_elev, -1, 1)))
    elevation_deg = np.where(elevation_deg &lt; 0, np.nan, elevation_deg)

    fig, ax = plt.subplots(figsize=(14, 6))

    cmap = plt.cm.YlOrRd.copy()
    cmap.set_bad(&quot;0.15&quot;)

    im = ax.pcolormesh(
        day_grid_loc, local_hour_grid, elevation_deg,
        cmap=cmap, vmin=0, vmax=70, shading=&quot;auto&quot;,
    )

    cb = fig.colorbar(im, ax=ax, pad=0.02)
    cb.set_label(&quot;Solar elevation (°)&quot;, fontsize=11)

    ax.set_xticks(month_starts)
    ax.set_xticklabels(month_labels)
    ax.set_yticks(range(0, 25, 3))
    ax.set_ylabel(f&quot;Hour of day ({loc[&#x27;tz_label&#x27;]}, UTC{loc[&#x27;utc_offset&#x27;]:+d})&quot;, fontsize=11)
    ax.set_xlabel(&quot;Day of year&quot;, fontsize=11)
    ax.set_title(
        f&quot;Solar Elevation — {loc[&#x27;name&#x27;]} ({abs(loc[&#x27;lat&#x27;]):.1f}°{&#x27;N&#x27; if loc[&#x27;lat&#x27;] &gt;= 0 else &#x27;S&#x27;}, &quot;
        f&quot;{abs(loc[&#x27;lon&#x27;]):.1f}°{&#x27;E&#x27; if loc[&#x27;lon&#x27;] &gt;= 0 else &#x27;W&#x27;})&quot;,
        fontsize=13,
    )

    fig.tight_layout()
    filename = f&quot;10_elevation_heatmap_{loc[&#x27;name&#x27;].lower()}.png&quot;
    fig.savefig(paths.images_path / filename, dpi=150, bbox_inches=&quot;tight&quot;)
    plt.show()</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="MY__TVKfYS_9hQSu1D6Gw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><figure id="fig-10-elevation-munich" class="fig-figure"><img id="aXA1wXyGIi" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_elevation_heatmap-5408188b9641db1dd3e85dec28e5cfa0.png" alt="Solar elevation at Munich (48.1°N, 11.6°E) for every day and minute of
the year. In summer, the Sun reaches ~65° and daylight lasts over 16 hours.
In winter, the maximum elevation drops to ~18° with less than 8 hours of
daylight. Grey areas indicate nighttime." data-canonical-url="../../output/images/10_elevation_heatmap_munich.png" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-elevation-munich" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->4<!-- -->:</a>Solar elevation at Munich (48.1°N, 11.6°E) for every day and minute of
the year. In summer, the Sun reaches ~65° and daylight lasts over 16 hours.
In winter, the maximum elevation drops to ~18° with less than 8 hours of
daylight. Grey areas indicate nighttime.</p></figcaption></figure><figure id="fig-10-elevation-sydney" class="fig-figure"><img id="skN7dfQUgc" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_elevation_heatmap-d4e869b760b24ce25117d747506560f9.png" alt="Solar elevation at Sydney (33.9°S, 151.2°E). Being in the Southern
Hemisphere, Sydney’s seasons are inverted — longest days around December,
shortest in June. The higher maximum elevation (~80°) reflects its lower
latitude compared to Munich, and the seasonal daylight variation is less
extreme." data-canonical-url="../../output/images/10_elevation_heatmap_sydney.png" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-elevation-sydney" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->5<!-- -->:</a>Solar elevation at Sydney (33.9°S, 151.2°E). Being in the Southern
Hemisphere, Sydney’s seasons are inverted — longest days around December,
shortest in June. The higher maximum elevation (~80°) reflects its lower
latitude compared to Munich, and the seasonal daylight variation is less
extreme.</p></figcaption></figure><h2 id="global-temperatures-the-diurnal-cycle" class="relative group"><span class="heading-text">Global temperatures — the diurnal cycle</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#global-temperatures-the-diurnal-cycle" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The varying sunlight intensity directly drives temperature patterns across
the globe. To observe this, we use <strong>ERA5 reanalysis data</strong> — a global
gridded dataset produced by the European Centre for Medium-Range Weather
Forecasts (ECMWF) that combines weather observations with numerical models.
The variable shown is <strong>2-metre temperature</strong> (the air temperature at 2 m
above the surface), which is the standard measure of surface air temperature.</p><p>Note that this dataset is <strong>ERA5-Land</strong>, which only covers land surfaces —
oceans appear black (no data). A key feature visible in the animation is how
quickly continents heat and cool: land has a low heat capacity, so
temperatures swing sharply between day and night. Oceans, by contrast, change
temperature much more slowly, which is why coastal cities have milder
climates than continental interiors.</p><div id="YWXzoe1Ozw" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">import ee
import geemap
from dotenv import load_dotenv

load_dotenv()
ee.Initialize(project=os.environ[&quot;EE_GCP_PROJECT_ID&quot;])</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="EBg4nsmHUGWsJoM1gUAbs" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="G6XA7Ihq0r" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">era5 = ee.ImageCollection(&quot;ECMWF/ERA5_LAND/HOURLY&quot;).select(&quot;temperature_2m&quot;)

start = &quot;2024-01-01&quot;
end = &quot;2025-01-01&quot;
era5_year = era5.filterDate(start, end)

# Build a 24-image collection: one mean image per UTC hour
hourly_images = []
for hour in range(24):
    hourly_mean = (
        era5_year
        .filter(ee.Filter.calendarRange(hour, hour, &quot;hour&quot;))
        .mean()
        .subtract(273.15)  # K -&gt; °C
    )
    hourly_mean = hourly_mean.set(&quot;hour&quot;, hour).set(&quot;label&quot;, f&quot;{hour:02d}:00 UTC&quot;)
    hourly_images.append(hourly_mean)

col = ee.ImageCollection(hourly_images)
print(f&quot;Collection size: {col.size().getInfo()} images&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="ZZm2yRnzu3RakKwdZwXZw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sS5rm4TzIC" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">vis_params = {
    &quot;min&quot;: -40,
    &quot;max&quot;: 40,
    &quot;palette&quot;: [
        &quot;#313695&quot;, &quot;#4575b4&quot;, &quot;#74add1&quot;, &quot;#abd9e9&quot;,
        &quot;#e0f3f8&quot;, &quot;#ffffbf&quot;, &quot;#fee090&quot;, &quot;#fdae61&quot;,
        &quot;#f46d43&quot;, &quot;#d73027&quot;, &quot;#a50026&quot;,
    ],
    &quot;dimensions&quot;: 800,
    &quot;framesPerSecond&quot;: 3,
}

gif_path = str(paths.images_path / &quot;10_ee_temperature_by_hour.gif&quot;)

geemap.download_ee_video(col, vis_params, gif_path)
print(f&quot;GIF saved to {gif_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="uVFIoLABxyQnz7zjCAKcr" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="gZJpPMwOS5" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">labels = [f&quot;{h:02d}:00 UTC&quot; for h in range(24)]

geemap.add_text_to_gif(
    gif_path,
    gif_path,
    xy=(&quot;5%&quot;, &quot;90%&quot;),
    text_sequence=labels,
    font_size=20,
    font_color=&quot;white&quot;,
    add_progress_bar=True,
    progress_bar_color=&quot;cyan&quot;,
    progress_bar_height=5,
)
print(f&quot;Annotated GIF saved to {gif_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="-ANF0utUdgJWONkfvS6Aw" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><figure id="fig-10-temperature-diurnal" class="fig-figure"><img id="RohwoK3Hdn" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_ee_temperature_by-9e38f222edc753027334514936abb9a6.gif" alt="Average 2-metre temperature by hour of day (UTC), computed from a full year
of ERA5-Land reanalysis data. The “heat wave” sweeps westward as the Sun
moves, and the large day-night temperature swing over continents is clearly
visible. Oceans appear black because ERA5-Land only covers land surfaces." data-canonical-url="../../output/images/10_ee_temperature_by_hour.gif" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-temperature-diurnal" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->6<!-- -->:</a>Average 2-metre temperature by hour of day (UTC), computed from a full year
of ERA5-Land reanalysis data. The “heat wave” sweeps westward as the Sun
moves, and the large day-night temperature swing over continents is clearly
visible. Oceans appear black because ERA5-Land only covers land surfaces.</p></figcaption></figure><h2 id="global-temperatures-the-seasonal-cycle" class="relative group"><span class="heading-text">Global temperatures — the seasonal cycle</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#global-temperatures-the-seasonal-cycle" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Over the course of months, the sustained difference in sunlight between
hemispheres creates the familiar <strong>seasons</strong>. Note that temperature extremes
typically lag the solstices by about 4–6 weeks — this <strong>thermal lag</strong> occurs
because the Earth’s surface and atmosphere take time to heat up and cool
down, similar to how the hottest part of the day is usually mid-afternoon
rather than noon.</p><p>The ocean again plays a moderating role: maritime and coastal climates have
milder seasonal swings, while continental interiors (like Siberia or central
Canada) experience the most extreme temperature differences between summer
and winter.</p><div id="IAvlGGrkdQ" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">monthly_images = []
monthly_labels = []
for month in range(1, 13):
    month_slices = []
    for year in range(2022, 2025):
        days_in_month = calendar.monthrange(year, month)[1]
        m_start = f&quot;{year}-{month:02d}-01&quot;
        m_end = f&quot;{year}-{month:02d}-{days_in_month:02d}T23:59&quot;
        month_slices.append(
            era5.filterDate(m_start, m_end)
            .filter(ee.Filter.calendarRange(12, 12, &quot;hour&quot;))
        )
    merged = month_slices[0]
    for s in month_slices[1:]:
        merged = merged.merge(s)
    monthly_mean = merged.mean().subtract(273.15)
    label = calendar.month_abbr[month]
    monthly_mean = monthly_mean.set(&quot;month&quot;, month).set(&quot;label&quot;, label)
    monthly_images.append(monthly_mean)
    monthly_labels.append(label)

col_monthly = ee.ImageCollection(monthly_images)
print(f&quot;Monthly collection size: {col_monthly.size().getInfo()} images&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="tjoC1fIteTFaBXIl4nMBG" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="oqjPfoGTzr" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">vis_params_monthly = {
    &quot;min&quot;: -40,
    &quot;max&quot;: 40,
    &quot;palette&quot;: [
        &quot;#313695&quot;, &quot;#4575b4&quot;, &quot;#74add1&quot;, &quot;#abd9e9&quot;,
        &quot;#e0f3f8&quot;, &quot;#ffffbf&quot;, &quot;#fee090&quot;, &quot;#fdae61&quot;,
        &quot;#f46d43&quot;, &quot;#d73027&quot;, &quot;#a50026&quot;,
    ],
    &quot;dimensions&quot;: 600,
    &quot;framesPerSecond&quot;: 1,
}

gif_monthly_path = str(paths.images_path / &quot;10_ee_temperature_by_month.gif&quot;)

geemap.download_ee_video(col_monthly, vis_params_monthly, gif_monthly_path)
print(f&quot;Monthly GIF saved to {gif_monthly_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="AuuMDpjKKazRVQDfE4oin" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="JsGKLLBHW7" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">geemap.add_text_to_gif(
    gif_monthly_path,
    gif_monthly_path,
    xy=(&quot;5%&quot;, &quot;90%&quot;),
    text_sequence=monthly_labels,
    font_size=20,
    font_color=&quot;white&quot;,
    add_progress_bar=True,
    progress_bar_color=&quot;cyan&quot;,
    progress_bar_height=5,
)
print(f&quot;Annotated monthly GIF saved to {gif_monthly_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="iGEg3VFP-HqFkuOip-lT3" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><figure id="fig-10-temperature-seasonal" class="fig-figure"><img id="msSSB5DGDR" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_ee_temperature_by-84f3d4b13d5c5e6cdd48327a12edeb05.gif" alt="Average 2-metre temperature by month, computed from ERA5-Land noon snapshots
across 2022–2024. The hemispheric temperature contrast shifts as the
subsolar latitude migrates. Continental interiors show the most extreme
seasonal swings. Oceans are not shown (ERA5-Land covers land only)." data-canonical-url="../../output/images/10_ee_temperature_by_month.gif" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-temperature-seasonal" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->7<!-- -->:</a>Average 2-metre temperature by month, computed from ERA5-Land noon snapshots
across 2022–2024. The hemispheric temperature contrast shifts as the
subsolar latitude migrates. Continental interiors show the most extreme
seasonal swings. Oceans are not shown (ERA5-Land covers land only).</p></figcaption></figure><h2 id="vegetation-the-seasonal-green-wave" class="relative group"><span class="heading-text">Vegetation — the seasonal green wave</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#vegetation-the-seasonal-green-wave" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>The temperature and moisture patterns driven by the Sun’s position have a
direct and visible impact on vegetation. We can observe this from space
using the <strong>Normalized Difference Vegetation Index (NDVI)</strong>, computed from
satellite imagery as:</p><div id="Hfrw6nGWs2" class="flex my-5 group"><div class="flex-grow overflow-x-auto overflow-y-hidden"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>NDVI</mtext><mo>=</mo><mfrac><mrow><mtext>NIR</mtext><mo>−</mo><mtext>Red</mtext></mrow><mrow><mtext>NIR</mtext><mo>+</mo><mtext>Red</mtext></mrow></mfrac></mrow><annotation encoding="application/x-tex">\text{NDVI} = \frac{\text{NIR} - \text{Red}}{\text{NIR} + \text{Red}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord text"><span class="mord">NDVI</span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:2.1408em;vertical-align:-0.7693em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.3714em;"><span style="top:-2.314em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">NIR</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord text"><span class="mord">Red</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.677em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">NIR</span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord text"><span class="mord">Red</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7693em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></span></div><div class="relative self-center flex-none pl-2 m-0 text-right select-none"><a class="no-underline text-inherit hover:text-inherit text-inherit hover:text-inherit select-none hover:underline" href="#Hfrw6nGWs2" title="Link to this Equation" aria-label="Link to this Equation">(<!-- -->3<!-- -->)</a></div></div><p>where NIR is near-infrared reflectance and Red is visible red reflectance.
Healthy green vegetation <strong>strongly reflects</strong> near-infrared light (which
it doesn’t need) and <strong>absorbs</strong> red light (which it uses for
photosynthesis). This makes NDVI a reliable indicator of vegetation health:</p><ul><li><p><strong>NDVI &gt; 0.6</strong> — dense, healthy vegetation (tropical forests, croplands
in growing season)</p></li><li><p><strong>NDVI 0.2–0.6</strong> — moderate vegetation (grasslands, sparse forests)</p></li><li><p><strong>NDVI &lt; 0.1</strong> — bare soil, water, snow, or desert</p></li></ul><p>We use <strong>MODIS Terra</strong> 16-day NDVI composites (MOD13A2, 1 km resolution)
to build a multi-year median for each 16-day period, producing ~23 frames
that reveal the seasonal “green wave”. The wave tracks the subsolar latitude
— as warmth and moisture arrive, vegetation pulses to life. We overlay the
subsolar declination line (yellow dashed) to make this connection visible.</p><div id="zaUnqQXO3X" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ndvi_col = ee.ImageCollection(&quot;MODIS/061/MOD13A2&quot;).select(&quot;NDVI&quot;)

ndvi_col = ndvi_col.map(
    lambda img: img.set(
        &quot;doy&quot;, ee.Date(img.get(&quot;system:time_start&quot;)).getRelative(&quot;day&quot;, &quot;year&quot;)
    )
)

# Use one year as the DOY template (23 composites, every 16 days)
distinct_doy = ndvi_col.filterDate(&quot;2020-01-01&quot;, &quot;2021-01-01&quot;)

# Join all years by matching DOY, then take the median
join_filter = ee.Filter.equals(leftField=&quot;doy&quot;, rightField=&quot;doy&quot;)
join = ee.Join.saveAll(&quot;doy_matches&quot;)
joined = ee.ImageCollection(join.apply(distinct_doy, ndvi_col, join_filter))

ndvi_composites = joined.map(
    lambda img: (
        ee.ImageCollection.fromImages(img.get(&quot;doy_matches&quot;))
        .reduce(ee.Reducer.median())
        .rename(&quot;NDVI&quot;)
        .copyProperties(img, [&quot;doy&quot;, &quot;system:time_start&quot;])
    )
)

print(f&quot;NDVI composites: {ndvi_composites.size().getInfo()} frames&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="8rtVitSVKD-4AfRyvu-dE" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="GzwDw7Igzt" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">ndvi_vis = {
    &quot;min&quot;: 0,
    &quot;max&quot;: 9000,
    &quot;palette&quot;: [
        &quot;FFFFFF&quot;, &quot;CE7E45&quot;, &quot;DF923D&quot;, &quot;F1B555&quot;, &quot;FCD163&quot;, &quot;99B718&quot;, &quot;74A901&quot;,
        &quot;66A000&quot;, &quot;529400&quot;, &quot;3E8601&quot;, &quot;207401&quot;, &quot;056201&quot;, &quot;004C00&quot;, &quot;023B01&quot;,
        &quot;012E01&quot;, &quot;011D01&quot;, &quot;011301&quot;,
    ],
}

ndvi_rgb = ndvi_composites.map(lambda img: img.visualize(**ndvi_vis))

gif_ndvi_params = {
    &quot;dimensions&quot;: 600,
    &quot;framesPerSecond&quot;: 4,
}

gif_ndvi_path = str(paths.images_path / &quot;10_ee_ndvi_by_doy.gif&quot;)

geemap.download_ee_video(ndvi_rgb, gif_ndvi_params, gif_ndvi_path)
print(f&quot;NDVI GIF saved to {gif_ndvi_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="7BhXvaLjY__soWS9VONNv" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="pBSItfR13B" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">doy_list = list(range(1, 366, 16))  # 1, 17, 33, ...
ndvi_labels = [
    (date(2024, 1, 1) + timedelta(days=d - 1)).strftime(&quot;%b %d&quot;)
    for d in doy_list
]

geemap.add_text_to_gif(
    gif_ndvi_path,
    gif_ndvi_path,
    xy=(&quot;5%&quot;, &quot;90%&quot;),
    text_sequence=ndvi_labels,
    font_size=20,
    font_color=&quot;white&quot;,
    add_progress_bar=True,
    progress_bar_color=&quot;green&quot;,
    progress_bar_height=5,
)
print(f&quot;Annotated NDVI GIF saved to {gif_ndvi_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="druopAIaPLR4YIPI-SLpc" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><h3 id="subsolar-latitude-overlay" class="relative group"><span class="heading-text">Subsolar latitude overlay</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#subsolar-latitude-overlay" title="Link to this Section" aria-label="Link to this Section">¶</a></h3><p>To highlight the connection between the Sun’s position and vegetation, we
draw the subsolar declination latitude as a yellow dashed line on each frame.</p><div id="vNpqXr79Ih" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">global_lat_min, global_lat_max = -90, 90


def solar_declination(doy: int) -&gt; float:
    &quot;&quot;&quot;Solar declination in degrees for a given day-of-year.&quot;&quot;&quot;
    return 23.44 * math.sin(math.radians(360 / 365 * (doy - 81)))


def add_subsolar_line(gif_in_path, lat_min, lat_max):
    &quot;&quot;&quot;Add a dashed yellow subsolar-latitude line to each frame of a GIF.&quot;&quot;&quot;
    gif = Image.open(gif_in_path)
    frames = []
    durations = []
    frame_idx = 0

    try:
        while True:
            frame = gif.copy().convert(&quot;RGBA&quot;)
            draw = ImageDraw.Draw(frame)
            w, h = frame.size

            doy = doy_list[frame_idx % len(doy_list)]
            decl = solar_declination(doy)
            y = int((lat_max - decl) / (lat_max - lat_min) * h)

            dash_len, gap_len = 12, 6
            x = 0
            while x &lt; w:
                draw.line([(x, y), (min(x + dash_len, w), y)], fill=&quot;yellow&quot;, width=2)
                x += dash_len + gap_len

            frames.append(frame)
            durations.append(gif.info.get(&quot;duration&quot;, 250))
            frame_idx += 1
            gif.seek(gif.tell() + 1)
    except EOFError:
        pass

    frames[0].save(
        gif_in_path,
        save_all=True,
        append_images=frames[1:],
        duration=durations,
        loop=0,
    )


add_subsolar_line(gif_ndvi_path, global_lat_min, global_lat_max)
print(f&quot;Subsolar line added to {gif_ndvi_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="faBFIZXw69_Ni8Y_ssUCs" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><figure id="fig-10-ndvi-global" class="fig-figure"><img id="YCwvX0Q5Md" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_ee_ndvi_by_doy-5a0ad479bdb5ba565bb5459b016b8e41.gif" alt="Global NDVI seasonal cycle (multi-year median of MODIS Terra 16-day
composites). The yellow dashed line marks the subsolar latitude. Vegetation
greens up in each hemisphere’s spring/summer, closely tracking the Sun’s
position. The boreal forest “green wave” sweeping northward in May–June is
one of the most visible seasonal changes on Earth." data-canonical-url="../../output/images/10_ee_ndvi_by_doy.gif" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-ndvi-global" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->8<!-- -->:</a>Global NDVI seasonal cycle (multi-year median of MODIS Terra 16-day
composites). The yellow dashed line marks the subsolar latitude. Vegetation
greens up in each hemisphere’s spring/summer, closely tracking the Sun’s
position. The boreal forest “green wave” sweeping northward in May–June is
one of the most visible seasonal changes on Earth.</p></figcaption></figure><h2 id="vegetation-africa-close-up" class="relative group"><span class="heading-text">Vegetation — Africa close-up</span><a class="no-underline text-inherit hover:text-inherit inline-block w-0 px-0 translate-x-[10px] font-normal select-none transition-opacity opacity-0 focus:opacity-100 group-hover:opacity-70" href="#vegetation-africa-close-up" title="Link to this Section" aria-label="Link to this Section">¶</a></h2><p>Africa straddles both tropics, making it an ideal region to observe the
seasonal vegetation pulse. The most dramatic change occurs in the <strong>Sahel</strong>
— the semi-arid transition zone between the Sahara and the tropical savannas.
During the West African monsoon (approximately June–September), moisture
from the Gulf of Guinea pushes northward, triggering a rapid greening of the
Sahel. This vegetation pulse closely follows the northward migration of the
subsolar latitude and retreats as the Sun moves south again.</p><div id="SZgw2kbkvr" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">africa = ee.Geometry.Rectangle([-20, -35, 55, 38])

ndvi_rgb_africa = ndvi_composites.map(
    lambda img: img.visualize(**ndvi_vis).clip(africa)
)

gif_ndvi_africa_params = {
    &quot;dimensions&quot;: 800,
    &quot;framesPerSecond&quot;: 4,
    &quot;region&quot;: africa,
}

gif_ndvi_africa_path = str(paths.images_path / &quot;10_ee_ndvi_africa_by_doy.gif&quot;)

geemap.download_ee_video(ndvi_rgb_africa, gif_ndvi_africa_params, gif_ndvi_africa_path)
print(f&quot;NDVI Africa GIF saved to {gif_ndvi_africa_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="nHV-lwWnYdj15Ymq0CJDu" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="Josl9owtR2" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">geemap.add_text_to_gif(
    gif_ndvi_africa_path,
    gif_ndvi_africa_path,
    xy=(&quot;5%&quot;, &quot;90%&quot;),
    text_sequence=ndvi_labels,
    font_size=20,
    font_color=&quot;white&quot;,
    add_progress_bar=True,
    progress_bar_color=&quot;green&quot;,
    progress_bar_height=5,
)
print(f&quot;Annotated NDVI Africa GIF saved to {gif_ndvi_africa_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="w-20RriQCw9J6VhnRvX7l" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><div id="sHoBQ9jnVE" class="myst-jp-nb-block relative group/block"><div class="myst-jp-nb-block-spinner flex sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:hidden"><div class="flex absolute top-0 right-0"></div></div><div class="myst-jp-nb-block sticky top-[115px] z-10 opacity-90 group-hover/block:opacity-100 group-hover/block:flex"><div class="absolute -top-[12px] right-0 flex flex-row rounded bg-white dark:bg-slate-800"></div></div><div class="relative myst-code group not-prose my-5 text-sm shadow hover:shadow-md dark:shadow-2xl dark:shadow-neutral-900 border border-l-4 border-gray-200 border-l-blue-400 dark:border-l-blue-400 dark:border-gray-800"><pre class="block overflow-auto p-3 myst-code-body hljs" style="background-color:unset"><code class="language-python" style="white-space:pre">add_subsolar_line(gif_ndvi_africa_path, lat_min=-35, lat_max=38)
print(f&quot;Subsolar line added to {gif_ndvi_africa_path}&quot;)</code></pre><button title="Copy to Clipboard" class="inline-flex items-center opacity-0 group-hover:opacity-100 hover:opacity-100 focus:opacity-100 active:opacity-100 cursor-pointer ml-2 transition-color duration-200 ease-in-out text-blue-400 hover:text-blue-500 absolute right-1 myst-code-copy-icon top-1" aria-pressed="false" aria-label="Copy code to clipboard"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="24" height="24"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"></path></svg></button></div><div data-name="outputs-container" data-mdast-node-id="DfL6x4BZpaPhrrdlRl7v5" class="max-w-full overflow-y-visible overflow-x-auto m-0 group not-prose relative text-left"></div></div><figure id="fig-10-ndvi-africa" class="fig-figure"><img id="IZzqWGUJNZ" style="margin-left:auto;margin-right:auto" src="/world-of-energy/build/10_ee_ndvi_africa_by-71a16434bc79c8ae6ccaa68a62bb160e.gif" alt="NDVI seasonal cycle over Africa. The Sahel’s rapid greening during the
monsoon season (June–September) is clearly visible as a band of green
pushing northward, closely following the subsolar latitude (yellow dashed
line). Southern Africa shows the opposite pattern, greening during the
austral summer (November–March)." data-canonical-url="../../output/images/10_ee_ndvi_africa_by_doy.gif" class=""/><figcaption class="group"><p><a class="no-underline text-inherit hover:text-inherit mr-1 font-semibold text-inherit hover:text-inherit hover:font-semibold select-none hover:underline" href="#fig-10-ndvi-africa" title="Link to this figure" aria-label="Link to this figure">Figure <!-- -->9<!-- -->:</a>NDVI seasonal cycle over Africa. The Sahel’s rapid greening during the
monsoon season (June–September) is clearly visible as a band of green
pushing northward, closely following the subsolar latitude (yellow dashed
line). Southern Africa shows the opposite pattern, greening during the
austral summer (November–March).</p></figcaption></figure><div class="myst-backmatter-parts"></div><div class="myst-footer-links flex pt-10 mb-10 space-x-4"><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-prev" href="/world-of-energy/notebooks/load-seasonalities"><div class="flex h-full align-middle"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:-translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"></path></svg><div class="flex-grow text-right"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">World of Energy</div>Seasonality Heatmaps</div></div></a><a class="myst-footer-link flex-1 block p-4 font-normal text-gray-600 no-underline border border-gray-200 rounded shadow-sm group hover:border-blue-600 dark:hover:border-blue-400 hover:text-blue-600 dark:hover:text-blue-400 dark:text-gray-100 dark:border-gray-500 hover:shadow-lg dark:shadow-neutral-700 myst-footer-link-next" href="/world-of-energy/notebooks/projections"><div class="flex h-full align-middle"><div class="flex-grow"><div class="myst-footer-link-group text-xs text-gray-500 dark:text-gray-400">World of Energy</div>Map Projections — ERA5 2 m Temperature</div><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" data-slot="icon" width="1.5rem" height="1.5rem" class="myst-footer-link-icon self-center transition-transform group-hover:translate-x-1 shrink-0"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></div></a></div></article></main><script>((a,l)=>{if(!window.history.state||!window.history.state.key){let u=Math.random().toString(32).slice(2);window.history.replaceState({key:u},"")}try{let d=JSON.parse(sessionStorage.getItem(a)||"{}")[l||window.history.state.key];typeof d=="number"&&window.scrollTo(0,d)}catch(u){console.error(u),sessionStorage.removeItem(a)}})("positions", null)</script><link rel="modulepreload" href="/world-of-energy/build/entry.client-PCJPW7TK.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-AQ2CODAG.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-JJXTQVMA.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-OZE3FFNP.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-G62B6HZR.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-C4DFGG5C.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-J7TUH54J.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-FZ2S7OYD.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-JEM6JXYA.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-34XIY2DH.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-KQM5FBHR.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-OCWQY3HK.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-7HNKBP4B.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-CUKUDK3R.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-3EBOCCHJ.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-O4VQNZ62.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-4OEDG4JQ.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-GUCIBHGO.js"/><link rel="modulepreload" href="/world-of-energy/build/root-PMP5BIHC.js"/><link rel="modulepreload" href="/world-of-energy/build/_shared/chunk-IX5KPAHP.js"/><link rel="modulepreload" href="/world-of-energy/build/routes/$-5ZLZ2O3Y.js"/><script>window.__remixContext = {"url":"/notebooks/earth-seasons","state":{"loaderData":{"root":{"config":{"version":3,"myst":"1.8.0","options":{"favicon":"/world-of-energy/build/fav-88e5601a0d49d42f1fbbb4c4b6269d5e.ico","logo":"/world-of-energy/build/logo-6a28fa76e54acbda2ff6b5ff676e9f78.png","folders":true},"nav":[],"actions":[],"projects":[{"title":"World of Energy","authors":[{"nameParsed":{"literal":"Christian Groll","given":"Christian","family":"Groll"},"name":"Christian Groll","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/cgroll/world-of-energy","copyright":"2026","toc":[{"file":"markdown/index.md"},{"file":"notebooks/03_smard_DE_prices.md"},{"file":"notebooks/04_reconstruct_prices.md"},{"file":"notebooks/05_load_seasonalities.md"},{"file":"notebooks/10_earth_seasons.md"},{"file":"notebooks/12_projections.md"},{"file":"markdown/resources.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"notebooks.smard-de-prices","title":"Electricity prices in Germany","description":"","date":"","thumbnail":"/world-of-energy/build/03_hourly_prices-1d5c001f3bb29306ba3ae7455ad3d729.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.reconstruct-prices","title":"Fossil Fuel Costs and Electricity Price Reconstruction","description":"","date":"","thumbnail":"/world-of-energy/build/04_srmc_timeseries-6c8f6032cf0bfb960014dc3ce079f3d4.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.load-seasonalities","title":"Seasonality Heatmaps","description":"","date":"","thumbnail":"/world-of-energy/build/05_seasonality_solar-8196d77aaacf5681003b118d29aff731.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.earth-seasons","title":"Earth’s Seasons — From Sunlight to Vegetation","description":"","date":"","thumbnail":"/world-of-energy/build/10_sunlight_animatio-9f5169e2f60428cecb2f2dec79a84414.gif","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.projections","title":"Map Projections — ERA5 2 m Temperature","description":"","date":"","thumbnail":"/world-of-energy/build/12_t2m_projections_o-6ef7d345b8eb64ff0d14ae0bf9f8ab60.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"markdown.resources","title":"Resources","description":"","date":"","thumbnail":"/world-of-energy/build/2026-02-05-12-15-50-f1e19b52d5a4ba0e9231bd1859e7c701.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}]},"CONTENT_CDN_PORT":"3100","MODE":"static","BASE_URL":"/world-of-energy"},"routes/$":{"config":{"version":3,"myst":"1.8.0","options":{"favicon":"/world-of-energy/build/fav-88e5601a0d49d42f1fbbb4c4b6269d5e.ico","logo":"/world-of-energy/build/logo-6a28fa76e54acbda2ff6b5ff676e9f78.png","folders":true},"nav":[],"actions":[],"projects":[{"title":"World of Energy","authors":[{"nameParsed":{"literal":"Christian Groll","given":"Christian","family":"Groll"},"name":"Christian Groll","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/cgroll/world-of-energy","copyright":"2026","toc":[{"file":"markdown/index.md"},{"file":"notebooks/03_smard_DE_prices.md"},{"file":"notebooks/04_reconstruct_prices.md"},{"file":"notebooks/05_load_seasonalities.md"},{"file":"notebooks/10_earth_seasons.md"},{"file":"notebooks/12_projections.md"},{"file":"markdown/resources.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"notebooks.smard-de-prices","title":"Electricity prices in Germany","description":"","date":"","thumbnail":"/world-of-energy/build/03_hourly_prices-1d5c001f3bb29306ba3ae7455ad3d729.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.reconstruct-prices","title":"Fossil Fuel Costs and Electricity Price Reconstruction","description":"","date":"","thumbnail":"/world-of-energy/build/04_srmc_timeseries-6c8f6032cf0bfb960014dc3ce079f3d4.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.load-seasonalities","title":"Seasonality Heatmaps","description":"","date":"","thumbnail":"/world-of-energy/build/05_seasonality_solar-8196d77aaacf5681003b118d29aff731.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.earth-seasons","title":"Earth’s Seasons — From Sunlight to Vegetation","description":"","date":"","thumbnail":"/world-of-energy/build/10_sunlight_animatio-9f5169e2f60428cecb2f2dec79a84414.gif","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.projections","title":"Map Projections — ERA5 2 m Temperature","description":"","date":"","thumbnail":"/world-of-energy/build/12_t2m_projections_o-6ef7d345b8eb64ff0d14ae0bf9f8ab60.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"markdown.resources","title":"Resources","description":"","date":"","thumbnail":"/world-of-energy/build/2026-02-05-12-15-50-f1e19b52d5a4ba0e9231bd1859e7c701.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}]},"page":{"version":3,"kind":"Notebook","sha256":"274f7c66771eab2dff8b148f4b4f73e63ed2673d9d3e578e608ec60c62456817","slug":"notebooks.earth-seasons","location":"/notebooks/10_earth_seasons.md","dependencies":[],"frontmatter":{"title":"Earth’s Seasons — From Sunlight to Vegetation","kernelspec":{"name":"python3","display_name":"Python 3","language":"python"},"jupytext":{"text_representation":{"format_name":"percent"}},"content_includes_title":false,"authors":[{"nameParsed":{"literal":"Christian Groll","given":"Christian","family":"Groll"},"name":"Christian Groll","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/cgroll/world-of-energy","copyright":"2026","source_url":"https://github.com/cgroll/world-of-energy/blob/main/book/notebooks/10_earth_seasons.md","edit_url":"https://github.com/cgroll/world-of-energy/edit/main/book/notebooks/10_earth_seasons.md","thumbnail":"/world-of-energy/build/10_sunlight_animatio-9f5169e2f60428cecb2f2dec79a84414.gif","exports":[{"format":"md","filename":"10_earth_seasons.md","url":"/world-of-energy/build/10_earth_seasons-641ce21bba1683c55d420eabfc0fc56e.md"}]},"mdast":{"type":"root","children":[{"type":"block","children":[{"type":"paragraph","position":{"start":{"line":13,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Why do we have seasons? The answer lies in a single geometric fact: the\nEarth’s rotation axis is tilted by about ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"FCTVCAdZxY"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"23.4°","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"ZrQ06tqIOA"}],"key":"m4jN1JdaFs"},{"type":"text","value":" relative to the plane of\nits orbit around the Sun. As the Earth travels along its annual orbit, this\ntilt causes different hemispheres to lean toward or away from the Sun,\nchanging both the ","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"RuIME9XlOt"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"angle","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"b26rwlSzzR"}],"key":"spJxpStTis"},{"type":"text","value":" at which sunlight strikes the surface and the\n","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"hhu8irlnzx"},{"type":"strong","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"number of hours","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"gaKmfXMO5n"}],"key":"whhMNpReVZ"},{"type":"text","value":" of daylight each location receives.","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"dINNUVeabQ"}],"key":"NjuCkC5oVu"},{"type":"paragraph","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"children":[{"type":"text","value":"This chapter traces the chain of consequences:","position":{"start":{"line":20,"column":1},"end":{"line":20,"column":1}},"key":"LxOy0xsfTZ"}],"key":"GxmxhErDwq"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":22,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":22,"column":1},"end":{"line":23,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"children":[{"type":"text","value":"Sunlight geometry","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"g3bsMNJPG1"}],"key":"Hm6tPYwBf7"},{"type":"text","value":" — how the Sun illuminates different parts of the\nEarth during the day, and how this pattern shifts between summer and winter.","position":{"start":{"line":22,"column":1},"end":{"line":22,"column":1}},"key":"HlQ1IrOg9L"}],"key":"xtadQB2vWu"}],"key":"S8yIK0OnQG"},{"type":"listItem","spread":true,"position":{"start":{"line":24,"column":1},"end":{"line":25,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"children":[{"type":"text","value":"The subsolar point","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"cC7JlNsNrl"}],"key":"BkElCz5nZF"},{"type":"text","value":" — the latitude where the Sun is directly overhead,\nand how it migrates between the Tropics over the year.","position":{"start":{"line":24,"column":1},"end":{"line":24,"column":1}},"key":"alr0OPIvTh"}],"key":"dwO4imZgF8"}],"key":"DGuD0BVis1"},{"type":"listItem","spread":true,"position":{"start":{"line":26,"column":1},"end":{"line":27,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"children":[{"type":"text","value":"Solar elevation","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"cVAYRPT3pN"}],"key":"iis5YCcL3a"},{"type":"text","value":" — the angle of the Sun above the horizon for any\nlocation and time, which determines how concentrated the incoming energy is.","position":{"start":{"line":26,"column":1},"end":{"line":26,"column":1}},"key":"QGbFjYLhs5"}],"key":"p1RBf0hvDM"}],"key":"OnDZBB2C3g"},{"type":"listItem","spread":true,"position":{"start":{"line":28,"column":1},"end":{"line":29,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"children":[{"type":"text","value":"Temperature","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"L7ew6i5cu5"}],"key":"jZKmQ5y78u"},{"type":"text","value":" — how the uneven distribution of sunlight drives the\nglobal temperature pattern, both over the course of a day and across seasons.","position":{"start":{"line":28,"column":1},"end":{"line":28,"column":1}},"key":"F7ltWMxnpA"}],"key":"velx8H6XPI"}],"key":"nf7r2PxNLh"},{"type":"listItem","spread":true,"position":{"start":{"line":30,"column":1},"end":{"line":33,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"children":[{"type":"text","value":"Vegetation","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"sLLq9zs4hd"}],"key":"eskDEvZ58A"},{"type":"text","value":" — how the resulting temperature and moisture patterns\ncontrol where and when vegetation grows, visible from space as a seasonal\n“green wave”.","position":{"start":{"line":30,"column":1},"end":{"line":30,"column":1}},"key":"tKVzCvYgvB"}],"key":"SAKui2UkIP"}],"key":"dWSFZtsZ6i"}],"key":"l5pMxTxZjQ"}],"key":"KJj06kupAh"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import calendar\nimport math\nimport os\nfrom datetime import datetime, date, timedelta\n\nimport numpy as np\nimport matplotlib.pyplot as plt\nimport cartopy.crs as ccrs\nimport cartopy.feature as cfeature\nfrom cartopy.feature.nightshade import Nightshade\nfrom matplotlib.animation import FuncAnimation, PillowWriter\nfrom PIL import Image, ImageDraw\n\nfrom woe.paths import ProjPaths\n\npaths = ProjPaths()","key":"VV5jUd6n3n"},{"type":"outputs","id":"fa9N15Xg0rDiAQaHl_llG","children":[],"key":"iuh8fSCkIL"}],"key":"KQWsVrOehk"},{"type":"block","children":[{"type":"heading","depth":2,"position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"children":[{"type":"text","value":"Sunlight on Earth — the day cycle","position":{"start":{"line":53,"column":1},"end":{"line":53,"column":1}},"key":"f2UKM040Mk"}],"identifier":"sunlight-on-earth-the-day-cycle","label":"Sunlight on Earth — the day cycle","html_id":"sunlight-on-earth-the-day-cycle","implicit":true,"key":"FTE1W32Aug"},{"type":"paragraph","position":{"start":{"line":55,"column":1},"end":{"line":61,"column":1}},"children":[{"type":"text","value":"At any given moment, exactly half of the Earth is illuminated by the Sun.\nBut the angle at which sunlight arrives varies enormously by latitude and\ntime of day. Near the equator, sunlight can arrive nearly ","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"EVsfRz5yoi"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"vertically","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"CCVmFCmngo"}],"key":"jf9YPwY4HA"},{"type":"text","value":",\nconcentrating its energy on a small area. Near the poles, it arrives at a\n","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"aidachkHet"},{"type":"strong","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"children":[{"type":"text","value":"shallow angle","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"L0GxeCJKro"}],"key":"zwVvhH4G5A"},{"type":"text","value":", spreading the same energy over a much larger area — which\nis why polar regions are cold even when they receive 24 hours of daylight in\nsummer.","position":{"start":{"line":55,"column":1},"end":{"line":55,"column":1}},"key":"AQAqgI7V0h"}],"key":"XRXd5SrlHH"},{"type":"paragraph","position":{"start":{"line":63,"column":1},"end":{"line":67,"column":1}},"children":[{"type":"text","value":"The two animations below show the illumination pattern over 24 hours on\nthe ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"ynWNkv9uxs"},{"type":"strong","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"summer solstice","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"uGmjqvpTts"}],"key":"ITf8ssxRKF"},{"type":"text","value":" (June 21) and the ","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"L8vJpoRADp"},{"type":"strong","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"children":[{"type":"text","value":"winter solstice","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"iuEoygtUow"}],"key":"E4G0zR0yXV"},{"type":"text","value":" (December 21).\nThe contrast is striking: in June, the North Pole enjoys continuous daylight\nwhile the South Pole is in complete darkness. In December, the situation is\nreversed.","position":{"start":{"line":63,"column":1},"end":{"line":63,"column":1}},"key":"zqW2XM5ZZJ"}],"key":"Nl10E6e1ta"}],"key":"gki7H3o1Dj"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"dates = [datetime(2025, 6, 21), datetime(2025, 12, 21)]\nn_frames = 64\nframe_hours = np.linspace(0, 24, n_frames, endpoint=False)\n\n\ndef create_sunlight_animation(anim_date, output_path):\n    fig, ax = plt.subplots(figsize=(16, 9), subplot_kw={\"projection\": ccrs.Robinson()})\n    fig.patch.set_facecolor(\"black\")\n\n    def draw_frame(fractional_hour):\n        ax.clear()\n        h = int(fractional_hour)\n        m = int((fractional_hour - h) * 60)\n        obs_time = datetime(anim_date.year, anim_date.month, anim_date.day, h, m, 0)\n\n        # Solar geometry\n        day_of_year = obs_time.timetuple().tm_yday\n        declination = 23.44 * np.sin(np.radians(360 / 365 * (day_of_year - 81)))\n        hours_utc = obs_time.hour + obs_time.minute / 60\n        subsolar_lon = 180 - (hours_utc / 24) * 360\n\n        ax.stock_img()\n        ax.add_feature(Nightshade(obs_time, alpha=0.4))\n\n        # Subsolar point marker\n        ax.plot(\n            subsolar_lon, declination,\n            marker=\"*\", markersize=18, color=\"yellow\", markeredgecolor=\"orange\",\n            markeredgewidth=0.8, transform=ccrs.PlateCarree(), zorder=10,\n        )\n\n        # Declination latitude line\n        ax.plot(\n            [-180, 180], [declination, declination],\n            color=\"yellow\", linewidth=1.2, linestyle=\"--\", alpha=0.7,\n            transform=ccrs.PlateCarree(), zorder=9,\n        )\n        # Equator\n        ax.plot(\n            [-180, 180], [0, 0],\n            color=\"white\", linewidth=0.6, linestyle=\":\", alpha=0.5,\n            transform=ccrs.PlateCarree(), zorder=9,\n        )\n\n        ax.add_feature(cfeature.COASTLINE, linewidth=0.4, color=\"0.3\")\n        ax.set_global()\n        ax.set_facecolor(\"black\")\n        ax.set_title(\n            f\"Sunlight on Earth — {obs_time:%Y-%m-%d %H:%M} UTC — \"\n            f\"Subsolar point {declination:.1f}°N, {subsolar_lon:.1f}°E\",\n            fontsize=13, color=\"white\", pad=12,\n        )\n\n    anim = FuncAnimation(fig, draw_frame, frames=list(frame_hours), interval=1000 / 15)\n    anim.save(str(output_path), writer=PillowWriter(fps=15), dpi=120, savefig_kwargs={\"facecolor\": \"black\"})\n    plt.close(fig)\n    print(f\"Saved animation to {output_path}\")\n\n\nfor d in dates:\n    suffix = f\"{d:%Y_%m_%d}\"\n    create_sunlight_animation(d, paths.images_path / f\"10_sunlight_animation_{suffix}.gif\")","key":"U1UECvpvYg"},{"type":"outputs","id":"u-N5kVMTIyVwAmGis694A","children":[],"key":"qxJfNg3jyL"}],"key":"wzrpPFCCyb"},{"type":"block","children":[{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_sunlight_animatio-9f5169e2f60428cecb2f2dec79a84414.gif","alt":"Sunlight on Earth over 24 hours on 2025-06-21 (summer solstice). The yellow\nstar marks the subsolar point; the dashed line shows the solar declination\nlatitude (~23.4°N). Notice that the Arctic never enters darkness.","data":{"altTextIsAutoGenerated":true},"key":"tAu1b8KUtz","urlSource":"../../output/images/10_sunlight_animation_2025_06_21.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":136,"column":1},"end":{"line":138,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-sunlight-summer","identifier":"fig-10-sunlight-summer","html_id":"fig-10-sunlight-summer","enumerator":"1","children":[{"type":"text","value":"Figure ","key":"vB3nAV4CXs"},{"type":"text","value":"1","key":"EBsv33HTZe"},{"type":"text","value":":","key":"SFjln95pmy"}],"template":"Figure %s:","key":"pwkIb13RBs"},{"type":"text","value":"Sunlight on Earth over 24 hours on 2025-06-21 (summer solstice). The yellow\nstar marks the subsolar point; the dashed line shows the solar declination\nlatitude (~23.4°N). Notice that the Arctic never enters darkness.","position":{"start":{"line":136,"column":1},"end":{"line":136,"column":1}},"key":"ymucm3XomS"}],"key":"UbvcOCr7ys"}],"key":"erZEpWg00w"}],"label":"fig-10-sunlight-summer","identifier":"fig-10-sunlight-summer","enumerator":"1","html_id":"fig-10-sunlight-summer","key":"oSFNuXsti8"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_sunlight_animatio-672529955da4fe9c79f7bded13c6da1e.gif","alt":"Winter solstice (2025-12-21). The subsolar point has moved to ~23.4°S.\nNow it is the Antarctic that enjoys continuous daylight, while the Arctic\nremains in polar night.","data":{"altTextIsAutoGenerated":true},"key":"v4zai5mVU0","urlSource":"../../output/images/10_sunlight_animation_2025_12_21.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":143,"column":1},"end":{"line":145,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-sunlight-winter","identifier":"fig-10-sunlight-winter","html_id":"fig-10-sunlight-winter","enumerator":"2","children":[{"type":"text","value":"Figure ","key":"tUQ93UyNdL"},{"type":"text","value":"2","key":"j8nSOr67KJ"},{"type":"text","value":":","key":"rmQakLWSZU"}],"template":"Figure %s:","key":"big6P3TFH8"},{"type":"text","value":"Winter solstice (2025-12-21). The subsolar point has moved to ~23.4°S.\nNow it is the Antarctic that enjoys continuous daylight, while the Arctic\nremains in polar night.","position":{"start":{"line":143,"column":1},"end":{"line":143,"column":1}},"key":"N0UtDsB07M"}],"key":"XRqxxaoWFa"}],"key":"CbmrnND2EU"}],"label":"fig-10-sunlight-winter","identifier":"fig-10-sunlight-winter","enumerator":"2","html_id":"fig-10-sunlight-winter","key":"UjRtTuCbMF"}],"key":"hH4qJQBfOq"},{"type":"block","position":{"start":{"line":148,"column":1},"end":{"line":148,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"children":[{"type":"text","value":"The subsolar point and its annual migration","position":{"start":{"line":150,"column":1},"end":{"line":150,"column":1}},"key":"eBXJkCfksO"}],"identifier":"the-subsolar-point-and-its-annual-migration","label":"The subsolar point and its annual migration","html_id":"the-subsolar-point-and-its-annual-migration","implicit":true,"key":"X0vBp3yp1I"},{"type":"paragraph","position":{"start":{"line":152,"column":1},"end":{"line":154,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"WkubekG3Dd"},{"type":"strong","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"text","value":"subsolar point","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"zPpNyzzIbV"}],"key":"H3tixb1bUm"},{"type":"text","value":" is the location on Earth where the Sun is directly\noverhead — i.e. the solar elevation is exactly 90°. Its latitude equals the\n","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"LCNHLdXht8"},{"type":"strong","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"children":[{"type":"text","value":"solar declination","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"r5XBYuKb3a"}],"key":"Pejhi6WfH4"},{"type":"text","value":", which can be approximated as:","position":{"start":{"line":152,"column":1},"end":{"line":152,"column":1}},"key":"UIkhYtr2jJ"}],"key":"icNyL0MbRY"},{"type":"math","value":"\\delta = 23.44° \\times \\sin\\!\\left(\\frac{360°}{365} \\times (d - 81)\\right)","position":{"start":{"line":156,"column":1},"end":{"line":158,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eδ\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e23.44\u003c/mn\u003e\u003cmi mathvariant=\"normal\"\u003e°\u003c/mi\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmi\u003esin\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmtext\u003e ⁣\u003c/mtext\u003e\u003cmrow\u003e\u003cmo fence=\"true\"\u003e(\u003c/mo\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmn\u003e360\u003c/mn\u003e\u003cmi mathvariant=\"normal\"\u003e°\u003c/mi\u003e\u003c/mrow\u003e\u003cmn\u003e365\u003c/mn\u003e\u003c/mfrac\u003e\u003cmo\u003e×\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003ed\u003c/mi\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmn\u003e81\u003c/mn\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo fence=\"true\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\delta = 23.44° \\times \\sin\\!\\left(\\frac{360°}{365} \\times (d - 81)\\right)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03785em;\"\u003eδ\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.7778em;vertical-align:-0.0833em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e23.44°\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e×\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.4em;vertical-align:-0.95em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003esin\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:-0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"minner\"\u003e\u003cspan class=\"mopen delimcenter\" style=\"top:0em;\"\u003e\u003cspan class=\"delimsizing size3\"\u003e(\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.3714em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e365\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord\"\u003e360°\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.686em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e×\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e81\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mclose delimcenter\" style=\"top:0em;\"\u003e\u003cspan class=\"delimsizing size3\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"1","key":"oT36HgCaxa"},{"type":"paragraph","position":{"start":{"line":160,"column":1},"end":{"line":161,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"key":"nel3shA2yC"},{"type":"inlineMath","value":"d","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ed\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ed\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"jOfMXd8xKP"},{"type":"text","value":" is the day of the year (so ","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"key":"o9frHgAn1f"},{"type":"inlineMath","value":"d = 81","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003ed\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e81\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003ed = 81\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003ed\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e81\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"m6cSyGwifD"},{"type":"text","value":" corresponds to the spring\nequinox around March 22, when ","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"key":"ODPaY8Siw0"},{"type":"inlineMath","value":"\\delta = 0","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eδ\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\delta = 0\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03785em;\"\u003eδ\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"AhmQiqFTNp"},{"type":"text","value":").","position":{"start":{"line":160,"column":1},"end":{"line":160,"column":1}},"key":"Ni4XtPcDdD"}],"key":"P4orqktBH5"},{"type":"paragraph","position":{"start":{"line":163,"column":1},"end":{"line":166,"column":1}},"children":[{"type":"text","value":"Over the course of a year, the subsolar latitude oscillates between the\n","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"jOEqf639dR"},{"type":"strong","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"text","value":"Tropic of Cancer","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"UcMiaKjtn9"}],"key":"I0Z60V238I"},{"type":"text","value":" (~23.4°N, around June 21) and the ","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"OhBxkpVULT"},{"type":"strong","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"children":[{"type":"text","value":"Tropic of\nCapricorn","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"Na7FUk9S9b"}],"key":"pvg0Kb6PLG"},{"type":"text","value":" (~23.4°S, around December 21). The animation below shows one\nframe per week, tracing this migration at solar noon (12:00 UTC).","position":{"start":{"line":163,"column":1},"end":{"line":163,"column":1}},"key":"dy7KCo2YYl"}],"key":"CPD5dLijIC"}],"key":"jF1N5115gg"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"weeks = np.arange(0, 52)\nweek_dates = [datetime(2025, 1, 1) + timedelta(weeks=int(w)) for w in weeks]\n\nfig, ax = plt.subplots(figsize=(16, 9), subplot_kw={\"projection\": ccrs.Robinson()})\nfig.patch.set_facecolor(\"black\")\n\n\ndef draw_subsolar_frame(i):\n    ax.clear()\n    d = week_dates[i]\n    obs_time = datetime(d.year, d.month, d.day, 12, 0, 0)\n\n    day_of_year = obs_time.timetuple().tm_yday\n    declination = 23.44 * np.sin(np.radians(360 / 365 * (day_of_year - 81)))\n    subsolar_lon = 0.0  # at 12:00 UTC\n\n    ax.stock_img()\n    ax.add_feature(Nightshade(obs_time, alpha=0.3))\n\n    # Declination latitude line\n    ax.plot(\n        [-180, 180], [declination, declination],\n        color=\"yellow\", linewidth=2, linestyle=\"--\", alpha=0.9,\n        transform=ccrs.PlateCarree(), zorder=9,\n    )\n    # Subsolar point\n    ax.plot(\n        subsolar_lon, declination,\n        marker=\"*\", markersize=20, color=\"yellow\", markeredgecolor=\"orange\",\n        markeredgewidth=0.8, transform=ccrs.PlateCarree(), zorder=10,\n    )\n\n    # Tropic lines\n    for tropic_lat in [23.44, -23.44]:\n        ax.plot(\n            [-180, 180], [tropic_lat, tropic_lat],\n            color=\"white\", linewidth=0.5, linestyle=\":\", alpha=0.4,\n            transform=ccrs.PlateCarree(), zorder=8,\n        )\n    # Equator\n    ax.plot(\n        [-180, 180], [0, 0],\n        color=\"white\", linewidth=0.6, linestyle=\":\", alpha=0.5,\n        transform=ccrs.PlateCarree(), zorder=8,\n    )\n\n    ax.add_feature(cfeature.COASTLINE, linewidth=0.4, color=\"0.3\")\n    ax.set_global()\n    ax.set_facecolor(\"black\")\n    ax.set_title(\n        f\"Subsolar Latitude — {obs_time:%Y-%m-%d} (week {i + 1}/52) — \"\n        f\"Declination {declination:.1f}°{'N' if declination \u003e= 0 else 'S'}\",\n        fontsize=13, color=\"white\", pad=12,\n    )\n\n\nanim = FuncAnimation(fig, draw_subsolar_frame, frames=len(week_dates), interval=1000 / 15)\noutput_file = paths.images_path / \"10_subsolar_migration.gif\"\nanim.save(str(output_file), writer=PillowWriter(fps=15), dpi=120, savefig_kwargs={\"facecolor\": \"black\"})\nplt.close(fig)\nprint(f\"Saved animation to {output_file}\")","key":"hWzZ26ccwO"},{"type":"outputs","id":"2vPRgBVMQoJT1L2p4EnHa","children":[],"key":"nPE0UFCV9k"}],"key":"isy1b0YSQf"},{"type":"block","children":[{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_subsolar_migratio-7f02c587f85e4503bdc79448488729cf.gif","alt":"Migration of the subsolar latitude over the year (one frame per week). The\nyellow dashed line shows where the Sun is directly overhead at noon UTC. It\noscillates between the Tropic of Cancer (~23.4°N in June) and the Tropic of\nCapricorn (~23.4°S in December).","data":{"altTextIsAutoGenerated":true},"key":"JpEv73DaeQ","urlSource":"../../output/images/10_subsolar_migration.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":234,"column":1},"end":{"line":237,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-subsolar-migration","identifier":"fig-10-subsolar-migration","html_id":"fig-10-subsolar-migration","enumerator":"3","children":[{"type":"text","value":"Figure ","key":"VjJHenoK2N"},{"type":"text","value":"3","key":"GECW3TyPET"},{"type":"text","value":":","key":"kEhn8NW35y"}],"template":"Figure %s:","key":"kYV9VRQku0"},{"type":"text","value":"Migration of the subsolar latitude over the year (one frame per week). The\nyellow dashed line shows where the Sun is directly overhead at noon UTC. It\noscillates between the Tropic of Cancer (~23.4°N in June) and the Tropic of\nCapricorn (~23.4°S in December).","position":{"start":{"line":234,"column":1},"end":{"line":234,"column":1}},"key":"LK6kWLNWmB"}],"key":"wAanKW9Tl8"}],"key":"w6WAaagzOb"}],"label":"fig-10-subsolar-migration","identifier":"fig-10-subsolar-migration","enumerator":"3","html_id":"fig-10-subsolar-migration","key":"TPEj6Lp5dd"}],"key":"RG3cdCoEHZ"},{"type":"block","position":{"start":{"line":240,"column":1},"end":{"line":240,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"children":[{"type":"text","value":"Solar elevation — the Sun’s angle above the horizon","position":{"start":{"line":242,"column":1},"end":{"line":242,"column":1}},"key":"MabqqRoHo6"}],"identifier":"solar-elevation-the-suns-angle-above-the-horizon","label":"Solar elevation — the Sun’s angle above the horizon","html_id":"solar-elevation-the-suns-angle-above-the-horizon","implicit":true,"key":"lFOv48FiaF"},{"type":"paragraph","position":{"start":{"line":244,"column":1},"end":{"line":247,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"key":"CS3VqV4cjb"},{"type":"strong","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"children":[{"type":"text","value":"solar elevation","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"key":"iI9E8QfEwa"}],"key":"PlMSGFd82n"},{"type":"text","value":" (or altitude angle) is the angle of the Sun above\nthe horizon, measured from 0° (sunrise/sunset) to 90° (directly overhead).\nIt determines how much energy a square metre of surface receives: a high\nSun concentrates light into a small area, while a low Sun spreads it thin.","position":{"start":{"line":244,"column":1},"end":{"line":244,"column":1}},"key":"mzJK85XHZT"}],"key":"S6T2KBlBob"},{"type":"paragraph","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"children":[{"type":"text","value":"For any location (latitude ","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"gzr7HiHLPR"},{"type":"inlineMath","value":"\\varphi","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eφ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\varphi\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.625em;vertical-align:-0.1944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eφ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"WZC3YQXDow"},{"type":"text","value":") and time, the elevation ","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"JjXJJsESna"},{"type":"inlineMath","value":"\\alpha","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eα\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\alpha\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.4306em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.0037em;\"\u003eα\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"LjVsxyxREV"},{"type":"text","value":" is:","position":{"start":{"line":249,"column":1},"end":{"line":249,"column":1}},"key":"Z8HRAdz6f3"}],"key":"zoKk11OfM1"},{"type":"math","value":"\\sin(\\alpha) = \\sin(\\varphi)\\,\\sin(\\delta) + \\cos(\\varphi)\\,\\cos(\\delta)\\,\\cos(h)","position":{"start":{"line":251,"column":1},"end":{"line":253,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003esin\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eα\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmi\u003esin\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eφ\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003esin\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eδ\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmi\u003ecos\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eφ\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003ecos\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eδ\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003cmtext\u003e \u003c/mtext\u003e\u003cmi\u003ecos\u003c/mi\u003e\u003cmo\u003e⁡\u003c/mo\u003e\u003cmo stretchy=\"false\"\u003e(\u003c/mo\u003e\u003cmi\u003eh\u003c/mi\u003e\u003cmo stretchy=\"false\"\u003e)\u003c/mo\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\sin(\\alpha) = \\sin(\\varphi)\\,\\sin(\\delta) + \\cos(\\varphi)\\,\\cos(\\delta)\\,\\cos(h)\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003esin\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.0037em;\"\u003eα\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003esin\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eφ\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003esin\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03785em;\"\u003eδ\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003ecos\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eφ\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003ecos\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03785em;\"\u003eδ\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.1667em;\"\u003e\u003c/span\u003e\u003cspan class=\"mop\"\u003ecos\u003c/span\u003e\u003cspan class=\"mopen\"\u003e(\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eh\u003c/span\u003e\u003cspan class=\"mclose\"\u003e)\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"2","key":"GDkHOowZrc"},{"type":"paragraph","position":{"start":{"line":255,"column":1},"end":{"line":257,"column":1}},"children":[{"type":"text","value":"where ","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"AfBBu7qy4K"},{"type":"inlineMath","value":"\\delta","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eδ\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\delta\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\" style=\"margin-right:0.03785em;\"\u003eδ\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"cBLZKQM8gb"},{"type":"text","value":" is the solar declination (computed above) and ","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"IUqwm59PiO"},{"type":"inlineMath","value":"h","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eh\u003c/mi\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eh\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eh\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"EOioMyexcy"},{"type":"text","value":" is the\n","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"UFIWYCht8K"},{"type":"strong","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"children":[{"type":"text","value":"hour angle","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"n8wVE2tKyc"}],"key":"coTHBSZoRj"},{"type":"text","value":" — the Sun’s angular displacement from local solar noon\n(","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"yHh83X5hHx"},{"type":"inlineMath","value":"h = 0","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"html":"\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmi\u003eh\u003c/mi\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmn\u003e0\u003c/mn\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003eh = 0\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6944em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord mathnormal\"\u003eh\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6444em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e0\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","key":"HV4tP2XHAf"},{"type":"text","value":" at noon, 15° per hour).","position":{"start":{"line":255,"column":1},"end":{"line":255,"column":1}},"key":"AcTISh3sn1"}],"key":"BZJlXlyOva"},{"type":"paragraph","position":{"start":{"line":259,"column":1},"end":{"line":262,"column":1}},"children":[{"type":"text","value":"The heatmaps below show solar elevation for every day of the year and every\nminute of the day, for two cities at very different latitudes: ","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"Sqez99ryLw"},{"type":"strong","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"children":[{"type":"text","value":"Munich","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"rjnKiIyixy"}],"key":"rosnXzTahW"},{"type":"text","value":"\n(48.1°N) and ","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"caeLPsJNF2"},{"type":"strong","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"children":[{"type":"text","value":"Sydney","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"mapMjMwabp"}],"key":"RflCdN5Q2o"},{"type":"text","value":" (33.9°S). Grey areas indicate nighttime (elevation\nbelow 0°).","position":{"start":{"line":259,"column":1},"end":{"line":259,"column":1}},"key":"CQ2TemHDBM"}],"key":"dNUavOYLU2"}],"key":"nbYl3EHZ6o"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"locations = [\n    {\"name\": \"Munich\", \"lat\": 48.14, \"lon\": 11.58, \"utc_offset\": 1, \"tz_label\": \"CET\"},\n    {\"name\": \"Sydney\", \"lat\": -33.87, \"lon\": 151.21, \"utc_offset\": 11, \"tz_label\": \"AEDT\"},\n]\n\ndays = np.arange(1, 366)\nhours_of_day = np.arange(0, 24, 1 / 60)  # one-minute resolution\nday_grid, hour_grid = np.meshgrid(days, hours_of_day)\n\n# Solar declination (same for all locations)\ndeclination_rad = np.radians(\n    23.44 * np.sin(np.radians(360 / 365 * (day_grid - 81)))\n)\n\nmonth_starts = [1, 32, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335]\nmonth_labels = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\",\n                \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"]\n\nfor loc in locations:\n    lat_rad = np.radians(loc[\"lat\"])\n\n    local_hours = hours_of_day\n    utc_hours = local_hours - loc[\"utc_offset\"]\n    day_grid_loc, utc_hour_grid = np.meshgrid(days, utc_hours)\n    _, local_hour_grid = np.meshgrid(days, local_hours)\n\n    # Hour angle: sun's angular displacement from solar noon\n    solar_hour = utc_hour_grid + loc[\"lon\"] / 15\n    hour_angle_rad = np.radians(15 * (solar_hour - 12))\n\n    # Solar elevation\n    sin_elev = (\n        np.sin(lat_rad) * np.sin(declination_rad)\n        + np.cos(lat_rad) * np.cos(declination_rad) * np.cos(hour_angle_rad)\n    )\n    elevation_deg = np.degrees(np.arcsin(np.clip(sin_elev, -1, 1)))\n    elevation_deg = np.where(elevation_deg \u003c 0, np.nan, elevation_deg)\n\n    fig, ax = plt.subplots(figsize=(14, 6))\n\n    cmap = plt.cm.YlOrRd.copy()\n    cmap.set_bad(\"0.15\")\n\n    im = ax.pcolormesh(\n        day_grid_loc, local_hour_grid, elevation_deg,\n        cmap=cmap, vmin=0, vmax=70, shading=\"auto\",\n    )\n\n    cb = fig.colorbar(im, ax=ax, pad=0.02)\n    cb.set_label(\"Solar elevation (°)\", fontsize=11)\n\n    ax.set_xticks(month_starts)\n    ax.set_xticklabels(month_labels)\n    ax.set_yticks(range(0, 25, 3))\n    ax.set_ylabel(f\"Hour of day ({loc['tz_label']}, UTC{loc['utc_offset']:+d})\", fontsize=11)\n    ax.set_xlabel(\"Day of year\", fontsize=11)\n    ax.set_title(\n        f\"Solar Elevation — {loc['name']} ({abs(loc['lat']):.1f}°{'N' if loc['lat'] \u003e= 0 else 'S'}, \"\n        f\"{abs(loc['lon']):.1f}°{'E' if loc['lon'] \u003e= 0 else 'W'})\",\n        fontsize=13,\n    )\n\n    fig.tight_layout()\n    filename = f\"10_elevation_heatmap_{loc['name'].lower()}.png\"\n    fig.savefig(paths.images_path / filename, dpi=150, bbox_inches=\"tight\")\n    plt.show()","key":"fUCqsHfTjB"},{"type":"outputs","id":"MY__TVKfYS_9hQSu1D6Gw","children":[],"key":"obcYovpcYT"}],"key":"EObAqv1HZj"},{"type":"block","children":[{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_elevation_heatmap-5408188b9641db1dd3e85dec28e5cfa0.png","alt":"Solar elevation at Munich (48.1°N, 11.6°E) for every day and minute of\nthe year. In summer, the Sun reaches ~65° and daylight lasts over 16 hours.\nIn winter, the maximum elevation drops to ~18° with less than 8 hours of\ndaylight. Grey areas indicate nighttime.","data":{"altTextIsAutoGenerated":true},"key":"aXA1wXyGIi","urlSource":"../../output/images/10_elevation_heatmap_munich.png"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":335,"column":1},"end":{"line":338,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-elevation-munich","identifier":"fig-10-elevation-munich","html_id":"fig-10-elevation-munich","enumerator":"4","children":[{"type":"text","value":"Figure ","key":"gM33jc5a0G"},{"type":"text","value":"4","key":"GD5id1K56f"},{"type":"text","value":":","key":"fXVHLS7Rjv"}],"template":"Figure %s:","key":"foMhiPDvBA"},{"type":"text","value":"Solar elevation at Munich (48.1°N, 11.6°E) for every day and minute of\nthe year. In summer, the Sun reaches ~65° and daylight lasts over 16 hours.\nIn winter, the maximum elevation drops to ~18° with less than 8 hours of\ndaylight. Grey areas indicate nighttime.","position":{"start":{"line":335,"column":1},"end":{"line":335,"column":1}},"key":"lXl9by2q6b"}],"key":"Vbc4BnBDle"}],"key":"zzoyXU9Dmo"}],"label":"fig-10-elevation-munich","identifier":"fig-10-elevation-munich","enumerator":"4","html_id":"fig-10-elevation-munich","key":"ejZGwCmiUa"},{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_elevation_heatmap-d4e869b760b24ce25117d747506560f9.png","alt":"Solar elevation at Sydney (33.9°S, 151.2°E). Being in the Southern\nHemisphere, Sydney’s seasons are inverted — longest days around December,\nshortest in June. The higher maximum elevation (~80°) reflects its lower\nlatitude compared to Munich, and the seasonal daylight variation is less\nextreme.","data":{"altTextIsAutoGenerated":true},"key":"skN7dfQUgc","urlSource":"../../output/images/10_elevation_heatmap_sydney.png"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":343,"column":1},"end":{"line":347,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-elevation-sydney","identifier":"fig-10-elevation-sydney","html_id":"fig-10-elevation-sydney","enumerator":"5","children":[{"type":"text","value":"Figure ","key":"Jl8StzZywI"},{"type":"text","value":"5","key":"L7g9fWT8iw"},{"type":"text","value":":","key":"U84z50QaNc"}],"template":"Figure %s:","key":"VLJq3r1bBR"},{"type":"text","value":"Solar elevation at Sydney (33.9°S, 151.2°E). Being in the Southern\nHemisphere, Sydney’s seasons are inverted — longest days around December,\nshortest in June. The higher maximum elevation (~80°) reflects its lower\nlatitude compared to Munich, and the seasonal daylight variation is less\nextreme.","position":{"start":{"line":343,"column":1},"end":{"line":343,"column":1}},"key":"uireG1zwXN"}],"key":"AumfSNMX8L"}],"key":"RkvHxwcDrq"}],"label":"fig-10-elevation-sydney","identifier":"fig-10-elevation-sydney","enumerator":"5","html_id":"fig-10-elevation-sydney","key":"zt6gIugxKl"}],"key":"r7vkTnxUjz"},{"type":"block","position":{"start":{"line":350,"column":1},"end":{"line":350,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":352,"column":1},"end":{"line":352,"column":1}},"children":[{"type":"text","value":"Global temperatures — the diurnal cycle","position":{"start":{"line":352,"column":1},"end":{"line":352,"column":1}},"key":"mWXB6SobCp"}],"identifier":"global-temperatures-the-diurnal-cycle","label":"Global temperatures — the diurnal cycle","html_id":"global-temperatures-the-diurnal-cycle","implicit":true,"key":"Rjz1G8ejOj"},{"type":"paragraph","position":{"start":{"line":354,"column":1},"end":{"line":359,"column":1}},"children":[{"type":"text","value":"The varying sunlight intensity directly drives temperature patterns across\nthe globe. To observe this, we use ","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"NoMLAGmC1J"},{"type":"strong","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"children":[{"type":"text","value":"ERA5 reanalysis data","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"oNOLEi04s1"}],"key":"FjN02hPBuq"},{"type":"text","value":" — a global\ngridded dataset produced by the European Centre for Medium-Range Weather\nForecasts (ECMWF) that combines weather observations with numerical models.\nThe variable shown is ","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"WFake8jKIP"},{"type":"strong","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"children":[{"type":"text","value":"2-metre temperature","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"N5afkDtTEl"}],"key":"idUI1jePiJ"},{"type":"text","value":" (the air temperature at 2 m\nabove the surface), which is the standard measure of surface air temperature.","position":{"start":{"line":354,"column":1},"end":{"line":354,"column":1}},"key":"qizWnDoBZj"}],"key":"tg0RuuGvCj"},{"type":"paragraph","position":{"start":{"line":361,"column":1},"end":{"line":366,"column":1}},"children":[{"type":"text","value":"Note that this dataset is ","position":{"start":{"line":361,"column":1},"end":{"line":361,"column":1}},"key":"mifkVlJrzY"},{"type":"strong","position":{"start":{"line":361,"column":1},"end":{"line":361,"column":1}},"children":[{"type":"text","value":"ERA5-Land","position":{"start":{"line":361,"column":1},"end":{"line":361,"column":1}},"key":"OHr48AZsMX"}],"key":"HIKfUcf44P"},{"type":"text","value":", which only covers land surfaces —\noceans appear black (no data). A key feature visible in the animation is how\nquickly continents heat and cool: land has a low heat capacity, so\ntemperatures swing sharply between day and night. Oceans, by contrast, change\ntemperature much more slowly, which is why coastal cities have milder\nclimates than continental interiors.","position":{"start":{"line":361,"column":1},"end":{"line":361,"column":1}},"key":"V9e30cbYlG"}],"key":"iNP4FHhJgu"}],"key":"Ex6DQdv1b1"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"import ee\nimport geemap\nfrom dotenv import load_dotenv\n\nload_dotenv()\nee.Initialize(project=os.environ[\"EE_GCP_PROJECT_ID\"])","key":"xONdYsCLBu"},{"type":"outputs","id":"EBg4nsmHUGWsJoM1gUAbs","children":[],"key":"IiIBp3m4Km"}],"key":"YWXzoe1Ozw"},{"type":"block","children":[],"key":"rmL33zXcFm"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"era5 = ee.ImageCollection(\"ECMWF/ERA5_LAND/HOURLY\").select(\"temperature_2m\")\n\nstart = \"2024-01-01\"\nend = \"2025-01-01\"\nera5_year = era5.filterDate(start, end)\n\n# Build a 24-image collection: one mean image per UTC hour\nhourly_images = []\nfor hour in range(24):\n    hourly_mean = (\n        era5_year\n        .filter(ee.Filter.calendarRange(hour, hour, \"hour\"))\n        .mean()\n        .subtract(273.15)  # K -\u003e °C\n    )\n    hourly_mean = hourly_mean.set(\"hour\", hour).set(\"label\", f\"{hour:02d}:00 UTC\")\n    hourly_images.append(hourly_mean)\n\ncol = ee.ImageCollection(hourly_images)\nprint(f\"Collection size: {col.size().getInfo()} images\")","key":"nNyhIJmjla"},{"type":"outputs","id":"ZZm2yRnzu3RakKwdZwXZw","children":[],"key":"x1aT5Ha1Jg"}],"key":"G6XA7Ihq0r"},{"type":"block","children":[],"key":"nUOaJ620Uf"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"vis_params = {\n    \"min\": -40,\n    \"max\": 40,\n    \"palette\": [\n        \"#313695\", \"#4575b4\", \"#74add1\", \"#abd9e9\",\n        \"#e0f3f8\", \"#ffffbf\", \"#fee090\", \"#fdae61\",\n        \"#f46d43\", \"#d73027\", \"#a50026\",\n    ],\n    \"dimensions\": 800,\n    \"framesPerSecond\": 3,\n}\n\ngif_path = str(paths.images_path / \"10_ee_temperature_by_hour.gif\")\n\ngeemap.download_ee_video(col, vis_params, gif_path)\nprint(f\"GIF saved to {gif_path}\")","key":"g2AK00cIx2"},{"type":"outputs","id":"uVFIoLABxyQnz7zjCAKcr","children":[],"key":"BG9w7sRkD8"}],"key":"sS5rm4TzIC"},{"type":"block","children":[],"key":"BiEv1zSa3X"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"labels = [f\"{h:02d}:00 UTC\" for h in range(24)]\n\ngeemap.add_text_to_gif(\n    gif_path,\n    gif_path,\n    xy=(\"5%\", \"90%\"),\n    text_sequence=labels,\n    font_size=20,\n    font_color=\"white\",\n    add_progress_bar=True,\n    progress_bar_color=\"cyan\",\n    progress_bar_height=5,\n)\nprint(f\"Annotated GIF saved to {gif_path}\")","key":"CgcCFTzFp6"},{"type":"outputs","id":"-ANF0utUdgJWONkfvS6Aw","children":[],"key":"GuXubuRsh7"}],"key":"gZJpPMwOS5"},{"type":"block","children":[{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_ee_temperature_by-9e38f222edc753027334514936abb9a6.gif","alt":"Average 2-metre temperature by hour of day (UTC), computed from a full year\nof ERA5-Land reanalysis data. The “heat wave” sweeps westward as the Sun\nmoves, and the large day-night temperature swing over continents is clearly\nvisible. Oceans appear black because ERA5-Land only covers land surfaces.","data":{"altTextIsAutoGenerated":true},"key":"RohwoK3Hdn","urlSource":"../../output/images/10_ee_temperature_by_hour.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":438,"column":1},"end":{"line":441,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-temperature-diurnal","identifier":"fig-10-temperature-diurnal","html_id":"fig-10-temperature-diurnal","enumerator":"6","children":[{"type":"text","value":"Figure ","key":"SqooRUQpw6"},{"type":"text","value":"6","key":"oxdZ2HY2WV"},{"type":"text","value":":","key":"iXScHmSRBZ"}],"template":"Figure %s:","key":"Ymw6MV90qR"},{"type":"text","value":"Average 2-metre temperature by hour of day (UTC), computed from a full year\nof ERA5-Land reanalysis data. The “heat wave” sweeps westward as the Sun\nmoves, and the large day-night temperature swing over continents is clearly\nvisible. Oceans appear black because ERA5-Land only covers land surfaces.","position":{"start":{"line":438,"column":1},"end":{"line":438,"column":1}},"key":"chc6qpv8Ho"}],"key":"ZtLWeAppC4"}],"key":"k1KZyBXVAK"}],"label":"fig-10-temperature-diurnal","identifier":"fig-10-temperature-diurnal","enumerator":"6","html_id":"fig-10-temperature-diurnal","key":"qPPpv5EJlb"}],"key":"XPVCdifiPY"},{"type":"block","position":{"start":{"line":444,"column":1},"end":{"line":444,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":446,"column":1},"end":{"line":446,"column":1}},"children":[{"type":"text","value":"Global temperatures — the seasonal cycle","position":{"start":{"line":446,"column":1},"end":{"line":446,"column":1}},"key":"d4pUfti83K"}],"identifier":"global-temperatures-the-seasonal-cycle","label":"Global temperatures — the seasonal cycle","html_id":"global-temperatures-the-seasonal-cycle","implicit":true,"key":"B71vYnLWD9"},{"type":"paragraph","position":{"start":{"line":448,"column":1},"end":{"line":453,"column":1}},"children":[{"type":"text","value":"Over the course of months, the sustained difference in sunlight between\nhemispheres creates the familiar ","position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"key":"V7kDG2JKwm"},{"type":"strong","position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"children":[{"type":"text","value":"seasons","position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"key":"k5wd7l5sSu"}],"key":"qacpjQ8AaZ"},{"type":"text","value":". Note that temperature extremes\ntypically lag the solstices by about 4–6 weeks — this ","position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"key":"i2EfNdcrIa"},{"type":"strong","position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"children":[{"type":"text","value":"thermal lag","position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"key":"GyNiHIaB9J"}],"key":"DOHnCBIoVo"},{"type":"text","value":" occurs\nbecause the Earth’s surface and atmosphere take time to heat up and cool\ndown, similar to how the hottest part of the day is usually mid-afternoon\nrather than noon.","position":{"start":{"line":448,"column":1},"end":{"line":448,"column":1}},"key":"F2FqgKqMpP"}],"key":"G3jIyFe0GK"},{"type":"paragraph","position":{"start":{"line":455,"column":1},"end":{"line":458,"column":1}},"children":[{"type":"text","value":"The ocean again plays a moderating role: maritime and coastal climates have\nmilder seasonal swings, while continental interiors (like Siberia or central\nCanada) experience the most extreme temperature differences between summer\nand winter.","position":{"start":{"line":455,"column":1},"end":{"line":455,"column":1}},"key":"Atd3wasmRL"}],"key":"ChTbYRAMRQ"}],"key":"NVpisZrnUH"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"monthly_images = []\nmonthly_labels = []\nfor month in range(1, 13):\n    month_slices = []\n    for year in range(2022, 2025):\n        days_in_month = calendar.monthrange(year, month)[1]\n        m_start = f\"{year}-{month:02d}-01\"\n        m_end = f\"{year}-{month:02d}-{days_in_month:02d}T23:59\"\n        month_slices.append(\n            era5.filterDate(m_start, m_end)\n            .filter(ee.Filter.calendarRange(12, 12, \"hour\"))\n        )\n    merged = month_slices[0]\n    for s in month_slices[1:]:\n        merged = merged.merge(s)\n    monthly_mean = merged.mean().subtract(273.15)\n    label = calendar.month_abbr[month]\n    monthly_mean = monthly_mean.set(\"month\", month).set(\"label\", label)\n    monthly_images.append(monthly_mean)\n    monthly_labels.append(label)\n\ncol_monthly = ee.ImageCollection(monthly_images)\nprint(f\"Monthly collection size: {col_monthly.size().getInfo()} images\")","key":"WdUUH40QKc"},{"type":"outputs","id":"tjoC1fIteTFaBXIl4nMBG","children":[],"key":"AOXYT1KPmb"}],"key":"IAvlGGrkdQ"},{"type":"block","children":[],"key":"xfrrGsJWDq"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"vis_params_monthly = {\n    \"min\": -40,\n    \"max\": 40,\n    \"palette\": [\n        \"#313695\", \"#4575b4\", \"#74add1\", \"#abd9e9\",\n        \"#e0f3f8\", \"#ffffbf\", \"#fee090\", \"#fdae61\",\n        \"#f46d43\", \"#d73027\", \"#a50026\",\n    ],\n    \"dimensions\": 600,\n    \"framesPerSecond\": 1,\n}\n\ngif_monthly_path = str(paths.images_path / \"10_ee_temperature_by_month.gif\")\n\ngeemap.download_ee_video(col_monthly, vis_params_monthly, gif_monthly_path)\nprint(f\"Monthly GIF saved to {gif_monthly_path}\")","key":"aO1pfLPGoY"},{"type":"outputs","id":"AuuMDpjKKazRVQDfE4oin","children":[],"key":"psEv1nadFK"}],"key":"oqjPfoGTzr"},{"type":"block","children":[],"key":"AGDzBYH0zT"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"geemap.add_text_to_gif(\n    gif_monthly_path,\n    gif_monthly_path,\n    xy=(\"5%\", \"90%\"),\n    text_sequence=monthly_labels,\n    font_size=20,\n    font_color=\"white\",\n    add_progress_bar=True,\n    progress_bar_color=\"cyan\",\n    progress_bar_height=5,\n)\nprint(f\"Annotated monthly GIF saved to {gif_monthly_path}\")","key":"C4FnXOREho"},{"type":"outputs","id":"iGEg3VFP-HqFkuOip-lT3","children":[],"key":"LXWYCF3Bee"}],"key":"JsGKLLBHW7"},{"type":"block","children":[{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_ee_temperature_by-84f3d4b13d5c5e6cdd48327a12edeb05.gif","alt":"Average 2-metre temperature by month, computed from ERA5-Land noon snapshots\nacross 2022–2024. The hemispheric temperature contrast shifts as the\nsubsolar latitude migrates. Continental interiors show the most extreme\nseasonal swings. Oceans are not shown (ERA5-Land covers land only).","data":{"altTextIsAutoGenerated":true},"key":"msSSB5DGDR","urlSource":"../../output/images/10_ee_temperature_by_month.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":522,"column":1},"end":{"line":525,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-temperature-seasonal","identifier":"fig-10-temperature-seasonal","html_id":"fig-10-temperature-seasonal","enumerator":"7","children":[{"type":"text","value":"Figure ","key":"qcsR6TRjas"},{"type":"text","value":"7","key":"guUSjaMxUZ"},{"type":"text","value":":","key":"LOT0l5raZ3"}],"template":"Figure %s:","key":"rXGBjFFDWA"},{"type":"text","value":"Average 2-metre temperature by month, computed from ERA5-Land noon snapshots\nacross 2022–2024. The hemispheric temperature contrast shifts as the\nsubsolar latitude migrates. Continental interiors show the most extreme\nseasonal swings. Oceans are not shown (ERA5-Land covers land only).","position":{"start":{"line":522,"column":1},"end":{"line":522,"column":1}},"key":"WTp9JfbQfb"}],"key":"mpkCjFhGcv"}],"key":"xklhCSEM2D"}],"label":"fig-10-temperature-seasonal","identifier":"fig-10-temperature-seasonal","enumerator":"7","html_id":"fig-10-temperature-seasonal","key":"SOPAJKkcUv"}],"key":"A1D2Vexr2p"},{"type":"block","position":{"start":{"line":528,"column":1},"end":{"line":528,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":530,"column":1},"end":{"line":530,"column":1}},"children":[{"type":"text","value":"Vegetation — the seasonal green wave","position":{"start":{"line":530,"column":1},"end":{"line":530,"column":1}},"key":"FdjPYmfwhY"}],"identifier":"vegetation-the-seasonal-green-wave","label":"Vegetation — the seasonal green wave","html_id":"vegetation-the-seasonal-green-wave","implicit":true,"key":"L2bBSaB4k7"},{"type":"paragraph","position":{"start":{"line":532,"column":1},"end":{"line":535,"column":1}},"children":[{"type":"text","value":"The temperature and moisture patterns driven by the Sun’s position have a\ndirect and visible impact on vegetation. We can observe this from space\nusing the ","position":{"start":{"line":532,"column":1},"end":{"line":532,"column":1}},"key":"ir0KmszUFw"},{"type":"strong","position":{"start":{"line":532,"column":1},"end":{"line":532,"column":1}},"children":[{"type":"text","value":"Normalized Difference Vegetation Index (NDVI)","position":{"start":{"line":532,"column":1},"end":{"line":532,"column":1}},"key":"nxeispg2uW"}],"key":"sRqN95rLL7"},{"type":"text","value":", computed from\nsatellite imagery as:","position":{"start":{"line":532,"column":1},"end":{"line":532,"column":1}},"key":"vW2Kra15UT"}],"key":"SOygOPS4fS"},{"type":"math","value":"\\text{NDVI} = \\frac{\\text{NIR} - \\text{Red}}{\\text{NIR} + \\text{Red}}","position":{"start":{"line":537,"column":1},"end":{"line":539,"column":1}},"html":"\u003cspan class=\"katex-display\"\u003e\u003cspan class=\"katex\"\u003e\u003cspan class=\"katex-mathml\"\u003e\u003cmath xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"\u003e\u003csemantics\u003e\u003cmrow\u003e\u003cmtext\u003eNDVI\u003c/mtext\u003e\u003cmo\u003e=\u003c/mo\u003e\u003cmfrac\u003e\u003cmrow\u003e\u003cmtext\u003eNIR\u003c/mtext\u003e\u003cmo\u003e−\u003c/mo\u003e\u003cmtext\u003eRed\u003c/mtext\u003e\u003c/mrow\u003e\u003cmrow\u003e\u003cmtext\u003eNIR\u003c/mtext\u003e\u003cmo\u003e+\u003c/mo\u003e\u003cmtext\u003eRed\u003c/mtext\u003e\u003c/mrow\u003e\u003c/mfrac\u003e\u003c/mrow\u003e\u003cannotation encoding=\"application/x-tex\"\u003e\\text{NDVI} = \\frac{\\text{NIR} - \\text{Red}}{\\text{NIR} + \\text{Red}}\u003c/annotation\u003e\u003c/semantics\u003e\u003c/math\u003e\u003c/span\u003e\u003cspan class=\"katex-html\" aria-hidden=\"true\"\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:0.6833em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eNDVI\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003cspan class=\"mrel\"\u003e=\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2778em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"base\"\u003e\u003cspan class=\"strut\" style=\"height:2.1408em;vertical-align:-0.7693em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mopen nulldelimiter\"\u003e\u003c/span\u003e\u003cspan class=\"mfrac\"\u003e\u003cspan class=\"vlist-t vlist-t2\"\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:1.3714em;\"\u003e\u003cspan style=\"top:-2.314em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eNIR\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e+\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eRed\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.23em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"frac-line\" style=\"border-bottom-width:0.04em;\"\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan style=\"top:-3.677em;\"\u003e\u003cspan class=\"pstrut\" style=\"height:3em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord\"\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eNIR\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mbin\"\u003e−\u003c/span\u003e\u003cspan class=\"mspace\" style=\"margin-right:0.2222em;\"\u003e\u003c/span\u003e\u003cspan class=\"mord text\"\u003e\u003cspan class=\"mord\"\u003eRed\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-s\"\u003e​\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"vlist-r\"\u003e\u003cspan class=\"vlist\" style=\"height:0.7693em;\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"mclose nulldelimiter\"\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e","enumerator":"3","key":"Hfrw6nGWs2"},{"type":"paragraph","position":{"start":{"line":541,"column":1},"end":{"line":544,"column":1}},"children":[{"type":"text","value":"where NIR is near-infrared reflectance and Red is visible red reflectance.\nHealthy green vegetation ","position":{"start":{"line":541,"column":1},"end":{"line":541,"column":1}},"key":"RXus4OQ39Z"},{"type":"strong","position":{"start":{"line":541,"column":1},"end":{"line":541,"column":1}},"children":[{"type":"text","value":"strongly reflects","position":{"start":{"line":541,"column":1},"end":{"line":541,"column":1}},"key":"jkZMCrTY3B"}],"key":"bhi6X2APmf"},{"type":"text","value":" near-infrared light (which\nit doesn’t need) and ","position":{"start":{"line":541,"column":1},"end":{"line":541,"column":1}},"key":"rZ03ABA46m"},{"type":"strong","position":{"start":{"line":541,"column":1},"end":{"line":541,"column":1}},"children":[{"type":"text","value":"absorbs","position":{"start":{"line":541,"column":1},"end":{"line":541,"column":1}},"key":"JqfKcyWRzW"}],"key":"w5rZxiygoc"},{"type":"text","value":" red light (which it uses for\nphotosynthesis). This makes NDVI a reliable indicator of vegetation health:","position":{"start":{"line":541,"column":1},"end":{"line":541,"column":1}},"key":"GADVc1vhNo"}],"key":"C5NzNtrk4h"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":546,"column":1},"end":{"line":550,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":546,"column":1},"end":{"line":547,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"children":[{"type":"text","value":"NDVI \u003e 0.6","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"key":"cUTBBmcX5R"}],"key":"U1LwWAeuhl"},{"type":"text","value":" — dense, healthy vegetation (tropical forests, croplands\nin growing season)","position":{"start":{"line":546,"column":1},"end":{"line":546,"column":1}},"key":"aOIkZNehqL"}],"key":"omghi4TqXQ"}],"key":"Df5cVDD8Mf"},{"type":"listItem","spread":true,"position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"children":[{"type":"text","value":"NDVI 0.2–0.6","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"key":"OO8A05eFQj"}],"key":"blaCbcJRXb"},{"type":"text","value":" — moderate vegetation (grasslands, sparse forests)","position":{"start":{"line":548,"column":1},"end":{"line":548,"column":1}},"key":"qVGGFOlUaR"}],"key":"rFgiHP4Q3m"}],"key":"sliLfCiqMO"},{"type":"listItem","spread":true,"position":{"start":{"line":549,"column":1},"end":{"line":550,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":549,"column":1},"end":{"line":549,"column":1}},"children":[{"type":"text","value":"NDVI \u003c 0.1","position":{"start":{"line":549,"column":1},"end":{"line":549,"column":1}},"key":"Po903G24Wp"}],"key":"bAplsvnJUZ"},{"type":"text","value":" — bare soil, water, snow, or desert","position":{"start":{"line":549,"column":1},"end":{"line":549,"column":1}},"key":"Mo3uKhzKdw"}],"key":"tUdewPIH11"}],"key":"xfdDfMSXVp"}],"key":"Ugj8erK62r"},{"type":"paragraph","position":{"start":{"line":551,"column":1},"end":{"line":555,"column":1}},"children":[{"type":"text","value":"We use ","position":{"start":{"line":551,"column":1},"end":{"line":551,"column":1}},"key":"iOWMYTa3rP"},{"type":"strong","position":{"start":{"line":551,"column":1},"end":{"line":551,"column":1}},"children":[{"type":"text","value":"MODIS Terra","position":{"start":{"line":551,"column":1},"end":{"line":551,"column":1}},"key":"yDtFd3MFL5"}],"key":"AhzSrly7wD"},{"type":"text","value":" 16-day NDVI composites (MOD13A2, 1 km resolution)\nto build a multi-year median for each 16-day period, producing ~23 frames\nthat reveal the seasonal “green wave”. The wave tracks the subsolar latitude\n— as warmth and moisture arrive, vegetation pulses to life. We overlay the\nsubsolar declination line (yellow dashed) to make this connection visible.","position":{"start":{"line":551,"column":1},"end":{"line":551,"column":1}},"key":"oYmBSaAx9g"}],"key":"yCay6i5Kex"}],"key":"Cb4V4k6yk4"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ndvi_col = ee.ImageCollection(\"MODIS/061/MOD13A2\").select(\"NDVI\")\n\nndvi_col = ndvi_col.map(\n    lambda img: img.set(\n        \"doy\", ee.Date(img.get(\"system:time_start\")).getRelative(\"day\", \"year\")\n    )\n)\n\n# Use one year as the DOY template (23 composites, every 16 days)\ndistinct_doy = ndvi_col.filterDate(\"2020-01-01\", \"2021-01-01\")\n\n# Join all years by matching DOY, then take the median\njoin_filter = ee.Filter.equals(leftField=\"doy\", rightField=\"doy\")\njoin = ee.Join.saveAll(\"doy_matches\")\njoined = ee.ImageCollection(join.apply(distinct_doy, ndvi_col, join_filter))\n\nndvi_composites = joined.map(\n    lambda img: (\n        ee.ImageCollection.fromImages(img.get(\"doy_matches\"))\n        .reduce(ee.Reducer.median())\n        .rename(\"NDVI\")\n        .copyProperties(img, [\"doy\", \"system:time_start\"])\n    )\n)\n\nprint(f\"NDVI composites: {ndvi_composites.size().getInfo()} frames\")","key":"JC3yHmIuEa"},{"type":"outputs","id":"8rtVitSVKD-4AfRyvu-dE","children":[],"key":"NMn14CjerI"}],"key":"zaUnqQXO3X"},{"type":"block","children":[],"key":"a8PtbFpjKe"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"ndvi_vis = {\n    \"min\": 0,\n    \"max\": 9000,\n    \"palette\": [\n        \"FFFFFF\", \"CE7E45\", \"DF923D\", \"F1B555\", \"FCD163\", \"99B718\", \"74A901\",\n        \"66A000\", \"529400\", \"3E8601\", \"207401\", \"056201\", \"004C00\", \"023B01\",\n        \"012E01\", \"011D01\", \"011301\",\n    ],\n}\n\nndvi_rgb = ndvi_composites.map(lambda img: img.visualize(**ndvi_vis))\n\ngif_ndvi_params = {\n    \"dimensions\": 600,\n    \"framesPerSecond\": 4,\n}\n\ngif_ndvi_path = str(paths.images_path / \"10_ee_ndvi_by_doy.gif\")\n\ngeemap.download_ee_video(ndvi_rgb, gif_ndvi_params, gif_ndvi_path)\nprint(f\"NDVI GIF saved to {gif_ndvi_path}\")","key":"z8WO50rniX"},{"type":"outputs","id":"7BhXvaLjY__soWS9VONNv","children":[],"key":"T4keWKR7A7"}],"key":"GzwDw7Igzt"},{"type":"block","children":[],"key":"f7NzxeqUF3"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"doy_list = list(range(1, 366, 16))  # 1, 17, 33, ...\nndvi_labels = [\n    (date(2024, 1, 1) + timedelta(days=d - 1)).strftime(\"%b %d\")\n    for d in doy_list\n]\n\ngeemap.add_text_to_gif(\n    gif_ndvi_path,\n    gif_ndvi_path,\n    xy=(\"5%\", \"90%\"),\n    text_sequence=ndvi_labels,\n    font_size=20,\n    font_color=\"white\",\n    add_progress_bar=True,\n    progress_bar_color=\"green\",\n    progress_bar_height=5,\n)\nprint(f\"Annotated NDVI GIF saved to {gif_ndvi_path}\")","key":"epfKyKqOwN"},{"type":"outputs","id":"druopAIaPLR4YIPI-SLpc","children":[],"key":"PjXtxjvQAG"}],"key":"pBSItfR13B"},{"type":"block","children":[{"type":"heading","depth":3,"position":{"start":{"line":631,"column":1},"end":{"line":631,"column":1}},"children":[{"type":"text","value":"Subsolar latitude overlay","position":{"start":{"line":631,"column":1},"end":{"line":631,"column":1}},"key":"hSNyXxnv8f"}],"identifier":"subsolar-latitude-overlay","label":"Subsolar latitude overlay","html_id":"subsolar-latitude-overlay","implicit":true,"key":"zMRDs7aT0b"},{"type":"paragraph","position":{"start":{"line":633,"column":1},"end":{"line":634,"column":1}},"children":[{"type":"text","value":"To highlight the connection between the Sun’s position and vegetation, we\ndraw the subsolar declination latitude as a yellow dashed line on each frame.","position":{"start":{"line":633,"column":1},"end":{"line":633,"column":1}},"key":"Jj0zzglo0t"}],"key":"DqINcbffgL"}],"key":"f66R3VlwtE"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"global_lat_min, global_lat_max = -90, 90\n\n\ndef solar_declination(doy: int) -\u003e float:\n    \"\"\"Solar declination in degrees for a given day-of-year.\"\"\"\n    return 23.44 * math.sin(math.radians(360 / 365 * (doy - 81)))\n\n\ndef add_subsolar_line(gif_in_path, lat_min, lat_max):\n    \"\"\"Add a dashed yellow subsolar-latitude line to each frame of a GIF.\"\"\"\n    gif = Image.open(gif_in_path)\n    frames = []\n    durations = []\n    frame_idx = 0\n\n    try:\n        while True:\n            frame = gif.copy().convert(\"RGBA\")\n            draw = ImageDraw.Draw(frame)\n            w, h = frame.size\n\n            doy = doy_list[frame_idx % len(doy_list)]\n            decl = solar_declination(doy)\n            y = int((lat_max - decl) / (lat_max - lat_min) * h)\n\n            dash_len, gap_len = 12, 6\n            x = 0\n            while x \u003c w:\n                draw.line([(x, y), (min(x + dash_len, w), y)], fill=\"yellow\", width=2)\n                x += dash_len + gap_len\n\n            frames.append(frame)\n            durations.append(gif.info.get(\"duration\", 250))\n            frame_idx += 1\n            gif.seek(gif.tell() + 1)\n    except EOFError:\n        pass\n\n    frames[0].save(\n        gif_in_path,\n        save_all=True,\n        append_images=frames[1:],\n        duration=durations,\n        loop=0,\n    )\n\n\nadd_subsolar_line(gif_ndvi_path, global_lat_min, global_lat_max)\nprint(f\"Subsolar line added to {gif_ndvi_path}\")","key":"v24dTF8VUZ"},{"type":"outputs","id":"faBFIZXw69_Ni8Y_ssUCs","children":[],"key":"UrYfINSBcJ"}],"key":"vNpqXr79Ih"},{"type":"block","children":[{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_ee_ndvi_by_doy-5a0ad479bdb5ba565bb5459b016b8e41.gif","alt":"Global NDVI seasonal cycle (multi-year median of MODIS Terra 16-day\ncomposites). The yellow dashed line marks the subsolar latitude. Vegetation\ngreens up in each hemisphere’s spring/summer, closely tracking the Sun’s\nposition. The boreal forest “green wave” sweeping northward in May–June is\none of the most visible seasonal changes on Earth.","data":{"altTextIsAutoGenerated":true},"key":"YCwvX0Q5Md","urlSource":"../../output/images/10_ee_ndvi_by_doy.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":690,"column":1},"end":{"line":694,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-ndvi-global","identifier":"fig-10-ndvi-global","html_id":"fig-10-ndvi-global","enumerator":"8","children":[{"type":"text","value":"Figure ","key":"J4wMgpyc6z"},{"type":"text","value":"8","key":"VvZJ3gXaoT"},{"type":"text","value":":","key":"tYAA2pjaaP"}],"template":"Figure %s:","key":"nSgxW7x8Cu"},{"type":"text","value":"Global NDVI seasonal cycle (multi-year median of MODIS Terra 16-day\ncomposites). The yellow dashed line marks the subsolar latitude. Vegetation\ngreens up in each hemisphere’s spring/summer, closely tracking the Sun’s\nposition. The boreal forest “green wave” sweeping northward in May–June is\none of the most visible seasonal changes on Earth.","position":{"start":{"line":690,"column":1},"end":{"line":690,"column":1}},"key":"TeJmUX4TyU"}],"key":"rEd241dpHo"}],"key":"VJGhteVIpZ"}],"label":"fig-10-ndvi-global","identifier":"fig-10-ndvi-global","enumerator":"8","html_id":"fig-10-ndvi-global","key":"raF1hfBCDv"}],"key":"EKyug5zIc6"},{"type":"block","position":{"start":{"line":697,"column":1},"end":{"line":697,"column":1}},"children":[{"type":"heading","depth":2,"position":{"start":{"line":699,"column":1},"end":{"line":699,"column":1}},"children":[{"type":"text","value":"Vegetation — Africa close-up","position":{"start":{"line":699,"column":1},"end":{"line":699,"column":1}},"key":"fZr3wKUE1T"}],"identifier":"vegetation-africa-close-up","label":"Vegetation — Africa close-up","html_id":"vegetation-africa-close-up","implicit":true,"key":"HRGBzLq78k"},{"type":"paragraph","position":{"start":{"line":701,"column":1},"end":{"line":707,"column":1}},"children":[{"type":"text","value":"Africa straddles both tropics, making it an ideal region to observe the\nseasonal vegetation pulse. The most dramatic change occurs in the ","position":{"start":{"line":701,"column":1},"end":{"line":701,"column":1}},"key":"py7ahJX2FM"},{"type":"strong","position":{"start":{"line":701,"column":1},"end":{"line":701,"column":1}},"children":[{"type":"text","value":"Sahel","position":{"start":{"line":701,"column":1},"end":{"line":701,"column":1}},"key":"pCfe0aJXeq"}],"key":"Hr9yOgj2Zm"},{"type":"text","value":"\n— the semi-arid transition zone between the Sahara and the tropical savannas.\nDuring the West African monsoon (approximately June–September), moisture\nfrom the Gulf of Guinea pushes northward, triggering a rapid greening of the\nSahel. This vegetation pulse closely follows the northward migration of the\nsubsolar latitude and retreats as the Sun moves south again.","position":{"start":{"line":701,"column":1},"end":{"line":701,"column":1}},"key":"oBGtTVljPY"}],"key":"KwJiS5mzUQ"}],"key":"B4OS7NY85i"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"africa = ee.Geometry.Rectangle([-20, -35, 55, 38])\n\nndvi_rgb_africa = ndvi_composites.map(\n    lambda img: img.visualize(**ndvi_vis).clip(africa)\n)\n\ngif_ndvi_africa_params = {\n    \"dimensions\": 800,\n    \"framesPerSecond\": 4,\n    \"region\": africa,\n}\n\ngif_ndvi_africa_path = str(paths.images_path / \"10_ee_ndvi_africa_by_doy.gif\")\n\ngeemap.download_ee_video(ndvi_rgb_africa, gif_ndvi_africa_params, gif_ndvi_africa_path)\nprint(f\"NDVI Africa GIF saved to {gif_ndvi_africa_path}\")","key":"oXYLxQ2INH"},{"type":"outputs","id":"nHV-lwWnYdj15Ymq0CJDu","children":[],"key":"bZ3MX5XGj5"}],"key":"SZgw2kbkvr"},{"type":"block","children":[],"key":"K7y7sGQUVl"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"geemap.add_text_to_gif(\n    gif_ndvi_africa_path,\n    gif_ndvi_africa_path,\n    xy=(\"5%\", \"90%\"),\n    text_sequence=ndvi_labels,\n    font_size=20,\n    font_color=\"white\",\n    add_progress_bar=True,\n    progress_bar_color=\"green\",\n    progress_bar_height=5,\n)\nprint(f\"Annotated NDVI Africa GIF saved to {gif_ndvi_africa_path}\")","key":"wXXRPxeaXp"},{"type":"outputs","id":"w-20RriQCw9J6VhnRvX7l","children":[],"key":"r3D1WL5Ini"}],"key":"Josl9owtR2"},{"type":"block","children":[],"key":"LdfVI2QVex"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"add_subsolar_line(gif_ndvi_africa_path, lat_min=-35, lat_max=38)\nprint(f\"Subsolar line added to {gif_ndvi_africa_path}\")","key":"j3o4zJvcJG"},{"type":"outputs","id":"DfL6x4BZpaPhrrdlRl7v5","children":[],"key":"bhgZDB3tlS"}],"key":"sHoBQ9jnVE"},{"type":"block","children":[{"type":"container","kind":"figure","children":[{"type":"image","url":"/world-of-energy/build/10_ee_ndvi_africa_by-71a16434bc79c8ae6ccaa68a62bb160e.gif","alt":"NDVI seasonal cycle over Africa. The Sahel’s rapid greening during the\nmonsoon season (June–September) is clearly visible as a band of green\npushing northward, closely following the subsolar latitude (yellow dashed\nline). Southern Africa shows the opposite pattern, greening during the\naustral summer (November–March).","data":{"altTextIsAutoGenerated":true},"key":"IZzqWGUJNZ","urlSource":"../../output/images/10_ee_ndvi_africa_by_doy.gif"},{"type":"caption","children":[{"type":"paragraph","position":{"start":{"line":750,"column":1},"end":{"line":754,"column":1}},"children":[{"type":"captionNumber","kind":"figure","label":"fig-10-ndvi-africa","identifier":"fig-10-ndvi-africa","html_id":"fig-10-ndvi-africa","enumerator":"9","children":[{"type":"text","value":"Figure ","key":"iVik9Dccjp"},{"type":"text","value":"9","key":"wOZvptBT5C"},{"type":"text","value":":","key":"NSu2xsrtPY"}],"template":"Figure %s:","key":"cRAJHiNA7x"},{"type":"text","value":"NDVI seasonal cycle over Africa. The Sahel’s rapid greening during the\nmonsoon season (June–September) is clearly visible as a band of green\npushing northward, closely following the subsolar latitude (yellow dashed\nline). Southern Africa shows the opposite pattern, greening during the\naustral summer (November–March).","position":{"start":{"line":750,"column":1},"end":{"line":750,"column":1}},"key":"z2c6n7U4vo"}],"key":"tDDH7c8xnT"}],"key":"xPNotK39Xz"}],"label":"fig-10-ndvi-africa","identifier":"fig-10-ndvi-africa","enumerator":"9","html_id":"fig-10-ndvi-africa","key":"XdUxvwLDyO"}],"key":"PhbiwP5xOu"}],"key":"oN43xrtqoL"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Seasonality Heatmaps","url":"/notebooks/load-seasonalities","group":"World of Energy"},"next":{"title":"Map Projections — ERA5 2 m Temperature","url":"/notebooks/projections","group":"World of Energy"}}},"domain":"http://localhost:3000"},"project":{"title":"World of Energy","authors":[{"nameParsed":{"literal":"Christian Groll","given":"Christian","family":"Groll"},"name":"Christian Groll","id":"contributors-myst-generated-uid-0"}],"github":"https://github.com/cgroll/world-of-energy","copyright":"2026","toc":[{"file":"markdown/index.md"},{"file":"notebooks/03_smard_DE_prices.md"},{"file":"notebooks/04_reconstruct_prices.md"},{"file":"notebooks/05_load_seasonalities.md"},{"file":"notebooks/10_earth_seasons.md"},{"file":"notebooks/12_projections.md"},{"file":"markdown/resources.md"}],"exports":[],"bibliography":[],"index":"index","pages":[{"slug":"notebooks.smard-de-prices","title":"Electricity prices in Germany","description":"","date":"","thumbnail":"/world-of-energy/build/03_hourly_prices-1d5c001f3bb29306ba3ae7455ad3d729.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.reconstruct-prices","title":"Fossil Fuel Costs and Electricity Price Reconstruction","description":"","date":"","thumbnail":"/world-of-energy/build/04_srmc_timeseries-6c8f6032cf0bfb960014dc3ce079f3d4.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.load-seasonalities","title":"Seasonality Heatmaps","description":"","date":"","thumbnail":"/world-of-energy/build/05_seasonality_solar-8196d77aaacf5681003b118d29aff731.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.earth-seasons","title":"Earth’s Seasons — From Sunlight to Vegetation","description":"","date":"","thumbnail":"/world-of-energy/build/10_sunlight_animatio-9f5169e2f60428cecb2f2dec79a84414.gif","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"notebooks.projections","title":"Map Projections — ERA5 2 m Temperature","description":"","date":"","thumbnail":"/world-of-energy/build/12_t2m_projections_o-6ef7d345b8eb64ff0d14ae0bf9f8ab60.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1},{"slug":"markdown.resources","title":"Resources","description":"","date":"","thumbnail":"/world-of-energy/build/2026-02-05-12-15-50-f1e19b52d5a4ba0e9231bd1859e7c701.png","thumbnailOptimized":"","banner":"","bannerOptimized":"","tags":[],"level":1}]}}},"actionData":null,"errors":null},"future":{"unstable_dev":false,"unstable_postcss":false,"unstable_tailwind":false,"v2_errorBoundary":true,"v2_headers":true,"v2_meta":true,"v2_normalizeFormMethod":true,"v2_routeConvention":true}};</script><script type="module" async="">import "/world-of-energy/build/manifest-54BD5942.js";
import * as route0 from "/world-of-energy/build/root-PMP5BIHC.js";
import * as route1 from "/world-of-energy/build/routes/$-5ZLZ2O3Y.js";
window.__remixRouteModules = {"root":route0,"routes/$":route1};

import("/world-of-energy/build/entry.client-PCJPW7TK.js");</script></body></html>